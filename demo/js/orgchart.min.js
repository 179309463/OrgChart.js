"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),OrgChart=function(){function e(t){_classCallCheck(this,e),this._name="OrgChart",Promise.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})};var n=this,i={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1},r=Object.assign(i,t),s=r.data,a=document.createElement("div"),o=document.querySelector(r.chartContainer);if(this.options=r,delete this.options.data,this.chart=a,this.chartContainer=o,a.dataset.options=JSON.stringify(r),a.setAttribute("class","orgchart"+(""!==r.chartClass?" "+r.chartClass:"")+("t2b"!==r.direction?" "+r.direction:"")),"object"===("undefined"==typeof s?"undefined":_typeof(s)))this.buildHierarchy(a,r.ajaxURL?s:this._attachRel(s,"00"),0);else if("string"==typeof s&&s.startsWith("#"))this.buildHierarchy(a,this._buildJsonDS(document.querySelector(s).children[0]),0);else{var l=document.createElement("i");l.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),a.appendChild(l),this._getJSON(s).then(function(e){n.buildHierarchy(a,r.ajaxURL?e:n._attachRel(e,"00"),0)}).catch(function(e){console.error("failed to fetch datasource for orgchart",e)}).finally(function(){var e=a.querySelector(".spinner");e.parentNode.removeChild(e)})}if(a.addEventListener("click",this._clickChart.bind(this)),r.exportButton&&!o.querySelector(".oc-export-btn")){var d=document.createElement("button"),c=document.createElement("a");d.setAttribute("class","oc-export-btn"+(""!==r.chartClass?" "+r.chartClass:"")),d.innerHTML="Export",d.addEventListener("click",this._clickExportButton.bind(this)),c.setAttribute("class","oc-download-btn"+(""!==r.chartClass?" "+r.chartClass:"")),c.setAttribute("download",r.exportFilename+".png"),o.appendChild(d),o.appendChild(c)}r.pan&&(o.style.overflow="hidden",a.addEventListener("mousedown",this._onPanStart.bind(this)),a.addEventListener("touchstart",this._onPanStart.bind(this)),document.body.addEventListener("mouseup",this._onPanEnd.bind(this)),document.body.addEventListener("touchend",this._onPanEnd.bind(this))),r.zoom&&(o.addEventListener("wheel",this._onWheeling.bind(this)),o.addEventListener("touchstart",this._onTouchStart.bind(this)),document.body.addEventListener("touchmove",this._onTouchMove.bind(this)),document.body.addEventListener("touchend",this._onTouchEnd.bind(this))),o.appendChild(a)}return _createClass(e,[{key:"_closest",value:function(e,t){return e&&(t(e)&&e!==this.chart?e:this._closest(e.parentNode,t))}},{key:"_siblings",value:function(e,t){return Array.from(e.parentNode.children).filter(function(n){return n!==e&&(!t||e.matches(t))})}},{key:"_prevAll",value:function(e,t){for(var n=[],i=e.previousElementSibling;i;)t&&!i.matches(t)||n.push(i),i=i.previousElementSibling;return n}},{key:"_nextAll",value:function(e,t){for(var n=[],i=e.nextElementSibling;i;)t&&!i.matches(t)||n.push(i),i=i.nextElementSibling;return n}},{key:"_isVisible",value:function(e){return null!==e.offsetParent}},{key:"_addClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.add(t)}):e.classList.add(t)})}},{key:"_removeClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t)})}},{key:"_css",value:function(e,t,n){e.forEach(function(e){e.style[t]=n})}},{key:"_removeAttr",value:function(e,t){e.forEach(function(e){e.removeAttribute(t)})}},{key:"_one",value:function(e,t,n,i){var r=function r(s){try{n.call(i,s)}finally{e.removeEventListener(t,r)}};e.addEventListener(t,r)}},{key:"_getDescElements",value:function(e,t){var n=[];return e.forEach(function(e){return n.push.apply(n,_toConsumableArray(e.querySelectorAll(t)))}),n}},{key:"_getJSON",value:function(e){return new Promise(function(t,n){function i(){4===this.readyState&&(200===this.status?t(JSON.parse(this.response)):n(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",e),r.onreadystatechange=i,r.responseType="json",r.setRequestHeader("Content-Type","application/json"),r.send()})}},{key:"_buildJsonDS",value:function(e){var t=this,n={name:e.firstChild.textContent.trim(),relationship:("LI"===e.parentNode.parentNode.nodeName?"1":"0")+(e.parentNode.children.length>1?1:0)+(e.children.length?1:0)};return e.id&&(n.id=e.id),e.querySelector("ul")&&Array.from(e.querySelector("ul").children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._buildJsonDS(e))}),n}},{key:"_attachRel",value:function(e,t){if(e.relationship=t+(e.children&&e.children.length>0?1:0),e.children){var n=!0,i=!1,r=void 0;try{for(var s,a=e.children[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;this._attachRel(o,"1"+(e.children.length>1?1:0))}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}return e}},{key:"_repaint",value:function(e){e&&(e.style.offsetWidth=e.offsetWidth)}},{key:"_isInAction",value:function(e){return e.querySelector(":scope > .edge").className.indexOf("fa-")>-1}},{key:"_getNodeState",value:function(e,t){var n=this,i=void 0,r={exist:!1,visible:!1};return"parent"===t?(i=this._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}),i&&(r.exist=!0),r.exist&&this._isVisible(i.parentNode.children[0])&&(r.visible=!0)):"children"===t?(i=this._closest(e,function(e){return"TR"===e.nodeName}).nextElementSibling,i&&(r.exist=!0),r.exist&&this._isVisible(i)&&(r.visible=!0)):"siblings"===t&&(i=this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode),i.length&&(r.exist=!0),r.exist&&i.some(function(e){return n._isVisible(e)})&&(r.visible=!0)),r}},{key:"getRelatedNodes",value:function(e,t){return"parent"===t?this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"):"children"===t?Array.from(this._closest(e,function(e){return"TABLE"===e.nodeName}).lastChild.children).map(function(e){return e.querySelector(".node")}):"siblings"===t?this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")}):[]}},{key:"_switchHorizontalArrow",value:function(e){var t=this.options,n=e.querySelector(".leftEdge"),i=e.querySelector(".rightEdge"),r=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;if(t.toggleSiblingsResp&&("undefined"==typeof t.ajaxURL||this._closest(e,function(e){return e.classList.contains(".nodes")}).dataset.siblingsLoaded)){var s=r.previousElementSibling,a=r.nextElementSibling;s&&(s.classList.contains("hidden")?(n.classList.add("fa-chevron-left"),n.classList.remove("fa-chevron-right")):(n.classList.add("fa-chevron-right"),n.classList.remove("fa-chevron-left"))),a&&(a.classList.contains("hidden")?(i.classList.add("fa-chevron-right"),i.classList.remove("fa-chevron-left")):(i.classList.add("fa-chevron-left"),i.classList.remove("fa-chevron-right")))}else{var o=this._siblings(r),l=!!o.length&&!o.some(function(e){return e.classList.contains("hidden")});n.classList.toggle("fa-chevron-right",l),n.classList.toggle("fa-chevron-left",!l),i.classList.toggle("fa-chevron-left",l),i.classList.toggle("fa-chevron-right",!l)}}},{key:"_hoverNode",value:function(e){var t=e.target,n=!1,i=t.querySelector(":scope > .topEdge"),r=t.querySelector(":scope > .bottomEdge"),s=t.querySelector(":scope > .leftEdge");"mouseenter"===e.type?(i&&(n=this._getNodeState(t,"parent").visible,i.classList.toggle("fa-chevron-up",!n),i.classList.toggle("fa-chevron-down",n)),r&&(n=this._getNodeState(t,"children").visible,r.classList.toggle("fa-chevron-down",!n),r.classList.toggle("fa-chevron-up",n)),s&&this._switchHorizontalArrow(t)):Array.from(t.querySelectorAll(":scope > .edge")).forEach(function(e){e.classList.remove("fa-chevron-up","fa-chevron-down","fa-chevron-right","fa-chevron-left")})}},{key:"_clickNode",value:function(e){var t=e.currentTarget,n=this.chart.querySelector(".focused");n&&n.classList.remove("focused"),t.classList.add("focused")}},{key:"_buildParentNode",value:function(e,t,n){var i=this,r=document.createElement("table");t.relationship="001",this._createNode(t,0).then(function(e){var t=i.chart;e.classList.remove("slide-up"),e.classList.add("slide-down");var s=document.createElement("tr"),a=document.createElement("tr"),o=document.createElement("tr"),l=document.createElement("tr");s.setAttribute("class","hidden"),s.innerHTML='<td colspan="2"></td>',r.appendChild(s),a.setAttribute("class","lines hidden"),a.innerHTML='<td colspan="2"><div class="downLine"></div></td>',r.appendChild(a),o.setAttribute("class","lines hidden"),o.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',r.appendChild(o),l.setAttribute("class","nodes"),l.innerHTML='<td colspan="2"></td>',r.appendChild(l),r.querySelector("td").appendChild(e),t.insertBefore(r,t.children[0]),r.children[3].children[0].appendChild(t.lastChild),n()}).catch(function(e){console.error("Failed to create parent node",e)})}},{key:"_switchVerticalArrow",value:function(e){e.classList.toggle("fa-chevron-up"),e.classList.toggle("fa-chevron-down")}},{key:"showParent",value:function(e){var t=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));this._removeClass(t,"hidden"),this._addClass(Array(t[0].children).slice(1,-1),"hidden");var n=t[2].querySelector(".node");this._one(n,"transitionend",function(){n.classList.remove("slide"),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(":scope > .topEdge"))},this),this._repaint(n),n.classList.add("slide"),n.classList.remove("slide-down")}},{key:"showSiblings",value:function(e,t){var n=this,i=[],r=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;i=t?"left"===t?this._prevAll(r):this._nextAll(r):this._siblings(r),this._removeClass(i,"hidden");var s=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));if(r=Array.from(s[0].querySelectorAll(":scope > .hidden")),t?this._removeClass(r.slice(0,2*i.length),"hidden"):this._removeClass(r,"hidden"),!this._getNodeState(e,"parent").visible){this._removeClass(s,"hidden");var a=s[2].querySelector(".node");this._one(a,"transitionend",function(e){e.target.classList.remove("slide")},this),this._repaint(a),a.classList.add("slide"),a.classList.remove("slide-down")}i.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&(e.classList.add("slide"),e.classList.remove("slide-left","slide-right"))})}),this._one(i[0].querySelector(".slide"),"transitionend",function(){var t=this;i.forEach(function(e){t._removeClass(Array.from(e.querySelectorAll(".slide")),"slide")}),this._isInAction(e)&&(this._switchHorizontalArrow(e),e.querySelector(".topEdge").classList.remove("fa-chevron-up"),e.querySelector(".topEdge").classList.add("fa-chevron-down"))},this)}},{key:"hideSiblings",value:function(e,t){var n=this,i=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode,r=this._siblings(i);if(r.forEach(function(e){e.querySelector(".spinner")&&(n.chart.dataset.inAjax=!1)}),!t||t&&"left"===t){var s=this._prevAll(i);s.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-right")})})}if(!t||t&&"left"!==t){var a=this._nextAll(i);a.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-left")})})}var o=[];this._siblings(i).forEach(function(e){Array.prototype.push.apply(o,Array.from(e.querySelectorAll(".slide")))});var l=[],d=!0,c=!1,h=void 0;try{for(var u,f=o[Symbol.iterator]();!(d=(u=f.next()).done);d=!0){var p=u.value,v=this._closest(p,function(e){return e.classList.contains("nodes")}).previousElementSibling;l.push(v),l.push(v.previousElementSibling)}}catch(e){c=!0,h=e}finally{try{!d&&f.return&&f.return()}finally{if(c)throw h}}l=[].concat(_toConsumableArray(new Set(l))),l.forEach(function(e){e.style.visibility="hidden"}),this._one(o[0],"transitionend",function(n){var r=this;l.forEach(function(e){e.removeAttribute("style")});var s=[];s=t?"left"===t?this._prevAll(i,":not(.hidden)"):this._nextAll(i,":not(.hidden)"):this._siblings(i);var a=Array.from(this._closest(i,function(e){return e.classList.contains("nodes")}).previousElementSibling.querySelectorAll(":scope > :not(.hidden)")),d=a.slice(1,t?2*s.length+1:-1);this._addClass(d,"hidden"),this._removeClass(o,"slide"),s.forEach(function(e){Array.from(e.querySelectorAll(".node")).slice(1).forEach(function(e){r._isVisible(e)&&(e.classList.remove("slide-left","slide-right"),e.classList.add("slide-up"))})}),s.forEach(function(e){r._addClass(Array.from(e.querySelectorAll(".lines")),"hidden"),r._addClass(Array.from(e.querySelectorAll(".nodes")),"hidden"),r._addClass(Array.from(e.querySelectorAll(".verticalNodes")),"hidden")}),this._addClass(s,"hidden"),this._isInAction(e)&&this._switchHorizontalArrow(e)},this)}},{key:"hideAncestorsSiblings",value:function(e){var t=Array.from(this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children).slice(0,3);t[0].querySelector(".spinner")&&(this.chart.dataset.inAjax=!1),this._getNodeState(e,"siblings").visible&&this.hideSiblings(e);var n=t.slice(1);this._css(n,"visibility","hidden");var i=t[0].querySelector(".node"),r=this._getNodeState(i,"parent").visible;i&&this._isVisible(i)&&(i.classList.add("slide","slide-down"),this._one(i,"transitionend",function(){i.classList.remove("slide"),this._removeAttr(n,"style"),this._addClass(t,"hidden")},this)),i&&r&&this.hideAncestorsSiblings(i)}},{key:"addParent",value:function(e,t){var n=this;this._buildParentNode(e,t,function(){if(!e.querySelector(":scope > .topEdge")){var t=document.createElement("i");t.setAttribute("class","edge verticalEdge topEdge fa"),e.appendChild(t)}n.showParent(e)})}},{key:"_startLoading",value:function(e,t){var n=this.options,i=this.chart;if("undefined"!=typeof i.dataset.inAjax&&"true"===i.dataset.inAjax)return!1;e.classList.add("hidden");var r=document.createElement("i");r.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),t.appendChild(r),this._addClass(Array.from(t.querySelectorAll(":scope > *:not(.spinner)")),"hazy"),i.dataset.inAjax=!0;var s=this.chartContainer.querySelector(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:""));return s&&(s.disabled=!0),!0}},{key:"_endLoading",value:function(e,t){var n=this.options;e.classList.remove("hidden"),t.querySelector(":scope > .spinner").remove(),this._removeClass(Array.from(t.querySelectorAll(":scope > .hazy")),"hazy"),this.chart.dataset.inAjax=!1;var i=this.chartContainer.querySelector(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:""));i&&(i.disabled=!1)}},{key:"_clickTopEdge",value:function(e){e.stopPropagation();var t=this,n=e.target,i=n.parentNode,r=this._getNodeState(i,"parent"),s=this.options;if(r.exist){var a=this._closest(i,function(e){return e.classList.contains("nodes")}),o=a.parentNode.firstChild.querySelector(".node");if(o.classList.contains("slide"))return;r.visible?(this.hideAncestorsSiblings(i),this._one(o,"transitionend",function(){this._isInAction(i)&&(this._switchVerticalArrow(n),this._switchHorizontalArrow(i))},this)):this.showParent(i)}else{var l=n.parentNode.id;this._startLoading(n,i)&&this._getJSON("function"==typeof s.ajaxURL.parent?s.ajaxURL.parent(i.dataset.source):s.ajaxURL.parent+l).then(function(e){"true"===t.chart.dataset.inAjax&&Object.keys(e).length&&t.addParent(i,e)}).catch(function(e){console.error("Failed to get parent node data.",e)}).finally(function(){t._endLoading(n,i)})}}},{key:"hideDescendants",value:function(e){var t=this,n=this._nextAll(e.parentNode.parentNode),i=[];n[2].querySelector(".spinner")&&(this.chart.dataset.inAjax=!1);var r=Array.from(n[2].querySelectorAll(".node")).filter(function(e){return t._isVisible(e)}),s=n[2].classList.contains("verticalNodes");s||(r.forEach(function(e){Array.prototype.push.apply(i,t._prevAll(t._closest(e,function(e){return e.classList.contains("nodes")}),".lines"))}),i=[].concat(_toConsumableArray(new Set(i))),this._css(i,"visibility","hidden")),this._one(r[0],"transitionend",function(a){this._removeClass(r,"slide"),s?t._addClass(n,"hidden"):(i.forEach(function(e){e.removeAttribute("style"),e.classList.add("hidden"),e.parentNode.lastChild.classList.add("hidden")}),this._addClass(Array.from(n[2].querySelectorAll(".verticalNodes")),"hidden")),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(r,"slide slide-up")}},{key:"showDescendants",value:function(e){var t=this,n=this,i=this._nextAll(e.parentNode.parentNode),r=[];this._removeClass(i,"hidden"),i.some(function(e){return e.classList.contains("verticalNodes")})?i.forEach(function(e){Array.prototype.push.apply(r,Array.from(e.querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}):Array.from(i[2].children).forEach(function(e){Array.prototype.push.apply(r,Array.from(e.querySelector("tr").querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}),this._repaint(r[0]),this._one(r[0],"transitionend",function(n){t._removeClass(r,"slide"),t._isInAction(e)&&t._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(r,"slide"),this._removeClass(r,"slide-up")}},{key:"_buildChildNode",value:function(e,t,n){var i=t.children||t.siblings;e.querySelector("td").setAttribute("colSpan",2*i.length),this.buildHierarchy(e,{children:i},0,n)}},{key:"addChildren",value:function(e,t){var n=this,i=this.options,r=0;this.chart.dataset.inEdit="addChildren",this._buildChildNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(++r===t.children.length){if(!e.querySelector(".bottomEdge")){var s=document.createElement("i");s.setAttribute("class","edge verticalEdge bottomEdge fa"),e.appendChild(s)}if(!e.querySelector(".symbol")){var a=document.createElement("i");a.setAttribute("class","fa "+i.parentNodeSymbol+" symbol"),e.querySelector(":scope > .title").appendChild(a)}n.showDescendants(e),n.chart.dataset.inEdit=""}})}},{key:"_clickBottomEdge",value:function(e){var t=this;e.stopPropagation();var n=this,i=this.options,r=e.target,s=r.parentNode,a=this._getNodeState(s,"children");if(a.exist){var o=this._closest(s,function(e){return"TR"===e.nodeName}).parentNode.children[3];if(Array.from(o.querySelectorAll(".node")).some(function(e){return t._isVisible(e)&&e.classList.contains("slide")}))return;a.visible?this.hideDescendants(s):this.showDescendants(s)}else{var l=r.parentNode.id;this._startLoading(r,s)&&this._getJSON("function"==typeof i.ajaxURL.children?i.ajaxURL.children(s.dataset.source):i.ajaxURL.children+l).then(function(e){"true"===n.chart.dataset.inAjax&&e.children.length&&n.addChildren(s,e)}).catch(function(e){console.error("Failed to get children nodes data",e)}).finally(function(){n._endLoading(r,s)})}}},{key:"_complementLine",value:function(e,t,n){var i=e.parentNode.parentNode.children;i[0].children[0].setAttribute("colspan",2*t),i[1].children[0].setAttribute("colspan",2*t);for(var r=0;r<n;r++){var s=document.createElement("td"),a=document.createElement("td");s.setAttribute("class","rightLine topLine"),s.innerHTML="&nbsp;",i[2].insertBefore(s,i[2].children[1]),a.setAttribute("class","leftLine topLine"),a.innerHTML="&nbsp;",i[2].insertBefore(a,i[2].children[1])}}},{key:"_buildSiblingNode",value:function(e,t,n){var i=this,r=this,s=t.siblings?t.siblings.length:t.children.length,a="TD"===e.parentNode.nodeName?this._closest(e,function(e){return"TR"===e.nodeName}).children.length:1,o=a+s,l=o>1?Math.floor(o/2-1):0;"TD"===e.parentNode.nodeName?!function(){var d=i._prevAll(e.parentNode.parentNode);d[0].remove(),d[1].remove();var c=0;r._buildChildNode.call(r,r._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}),t,function(){++c===s&&!function(){var t=Array.from(r._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}).lastChild.children);if(a>1)Array.from(e.parentNode.children).forEach(function(e){t[0].parentNode.insertBefore(e,t[0])}),e.parentNode.parentNode.remove(),r._complementLine(t[0],o,a),r._addClass(t,"hidden"),t.forEach(function(e){r._addClass(e.querySelectorAll(".node"),"slide-left")});else{var i=e.parentNode.parentNode;t[l].parentNode.insertBefore(e.parentNode,t[l+1]),i.remove(),r._complementLine(t[l],o,1),r._addClass(t,"hidden"),r._addClass(r._getDescElements(t.slice(0,l+1),".node"),"slide-right"),r._addClass(r._getDescElements(t.slice(l+1),".node"),"slide-left")}n()}()})}():!function(){var s=0;r.buildHierarchy.call(r,r.chart,t,0,function(){if(++s===o){var t=e.nextElementSibling.children[3].children[l],a=document.createElement("td");a.setAttribute("colspan",2),a.appendChild(e),t.parentNode.insertBefore(a,t.nextElementSibling),r._complementLine(t,o,1);var d=r._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0];d.classList.add("hidden"),r._addClass(Array.from(d.querySelectorAll(".node")),"slide-down");var c=i._siblings(e.parentNode);r._addClass(c,"hidden"),r._addClass(r._getDescElements(c.slice(0,l),".node"),"slide-right"),r._addClass(r._getDescElements(c.slice(l),".node"),"slide-left"),n()}})}()}},{key:"addSiblings",value:function(e,t){var n=this;this.chart.dataset.inEdit="addSiblings",this._buildSiblingNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(n._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).dataset.siblingsLoaded=!0,!e.querySelector(".leftEdge")){var t=document.createElement("i"),i=document.createElement("i");t.setAttribute("class","edge horizontalEdge rightEdge fa"),e.appendChild(t),i.setAttribute("class","edge horizontalEdge leftEdge fa"),e.appendChild(i)}n.showSiblings(e),n.chart.dataset.inEdit=""})}},{key:"_clickHorizontalEdge",value:function(e){var t=this;e.stopPropagation();var n=this,i=this.options,r=e.target,s=r.parentNode,a=this._getNodeState(s,"siblings");if(a.exist){var o=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode,l=this._siblings(o);if(l.some(function(e){var n=e.querySelector(".node");return t._isVisible(n)&&n.classList.contains("slide")}))return;if(i.toggleSiblingsResp){var d=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode.previousElementSibling,c=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode.nextElementSibling;r.classList.contains("leftEdge")?d.classList.contains("hidden")?this.showSiblings(s,"left"):this.hideSiblings(s,"left"):c.classList.contains("hidden")?this.showSiblings(s,"right"):this.hideSiblings(s,"right")}else a.visible?this.hideSiblings(s):this.showSiblings(s)}else{var h=r.parentNode.id,u=this._getNodeState(s,"parent").exist?"function"==typeof i.ajaxURL.siblings?i.ajaxURL.siblings(JSON.parse(s.dataset.source)):i.ajaxURL.siblings+h:"function"==typeof i.ajaxURL.families?i.ajaxURL.families(JSON.parse(s.dataset.source)):i.ajaxURL.families+h;this._startLoading(r,s)&&this._getJSON(u).then(function(e){"true"===n.chart.dataset.inAjax&&(e.siblings||e.children)&&n.addSiblings(s,e)}).catch(function(e){console.error("Failed to get sibling nodes data",e)}).finally(function(){n._endLoading(r,s)})}}},{key:"_clickToggleButton",value:function(e){var t=this,n=e.target,i=n.parentNode.nextElementSibling,r=i.querySelectorAll(".node"),s=i.children.map(function(e){return e.querySelector(".node")});if(!s.some(function(e){return e.classList.contains(".slide")}))if(n.classList.toggle("fa-plus-square"),n.classList.toggle("fa-minus-square"),r[0].classList.contains(".slide-up"))i.classList.remove("hidden"),this._repaint(s[0]),this._addClass(s,"slide"),this._removeClass(s,"slide-up"),s[0].addEventListener("transitionend",function(){t._removeClass(s,"slide")},{once:!0});else{this._addClass(r,"slide slide-up"),r[0].addEventListener("transitionend",function(){t._removeClass(r,"slide");var e=this._closest(r[0],function(e){return"ul"===e.nodeName});e.classList.add("hidden")},{once:!0});var a=r[0].querySelector(".toggleBtn").classList.remove("fa-minus-square");a.classList.add("fa-plus-square")}}},{key:"_dispatchClickEvent",value:function(e){var t=e.target.classList;t.contains("topEdge")?this._clickTopEdge(e):t.contains("rightEdge")||t.contains("leftEdge")?this._clickHorizontalEdge(e):t.contains("bottomEdge")?this._clickBottomEdge(e):t.contains("toggleBtn")?this._clickToggleButton(e):this._clickNode(e)}},{key:"_onDragStart",value:function(e){var t=e.target,n=this.options,i=/firefox/.test(window.navigator.userAgent.toLowerCase());if(i&&e.dataTransfer.setData("text/html","hack for firefox"),this.chart.style.transform){var r=void 0,s=void 0;document.querySelector(".ghost-node")?(r=this.chart.querySelector(":scope > .ghost-node"),s=r.children[0]):(r=document.createElementNS("http://www.w3.org/2000/svg","svg"),r.classList.add("ghost-node"),s=document.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(s),this.chart.appendChild(r));var a=this.chart.style.transform.split(","),o=Math.abs(window.parseFloat("t2b"===n.direction||"b2t"===n.direction?a[0].slice(a[0].indexOf("(")+1):a[1]));r.setAttribute("width",t.offsetWidth),r.setAttribute("height",t.offsetHeight),s.setAttribute("x",5*o),s.setAttribute("y",5*o),s.setAttribute("width",120*o),s.setAttribute("height",40*o),s.setAttribute("rx",4*o),s.setAttribute("ry",4*o),s.setAttribute("stroke-width",1*o);var l=e.offsetX*o,d=e.offsetY*o;if("l2r"===n.direction?(l=e.offsetY*o,d=e.offsetX*o):"r2l"===n.direction?(l=t.offsetWidth-e.offsetY*o,d=e.offsetX*o):"b2t"===n.direction&&(l=t.offsetWidth-e.offsetX*o,d=t.offsetHeight-e.offsetY*o),i){var c=document.createElement("img");c.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),e.dataTransfer.setDragImage(c,l,d),s.setAttribute("fill","rgb(255, 255, 255)"),s.setAttribute("stroke","rgb(191, 0, 0)")}else e.dataTransfer.setDragImage(r,l,d)}var h=e.target,u=this._closest(h,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"),f=Array.from(this._closest(h,function(e){return"TABLE"===e.nodeName}).querySelectorAll(".node"));this.dragged=h,Array.from(this.chart.querySelectorAll(".node")).forEach(function(e){f.includes(e)||(n.dropCriteria?n.dropCriteria(h,u,e)&&e.classList.add("allowedDrop"):e.classList.add("allowedDrop"))})}},{key:"_onDragOver",value:function(e){e.preventDefault();var t=e.currentTarget;t.classList.contains("allowedDrop")||(e.dataTransfer.dropEffect="none")}},{key:"_onDragEnd",value:function(e){Array.from(this.chart.querySelectorAll(".allowedDrop")).forEach(function(e){e.classList.remove("allowedDrop")})}},{key:"_onDrop",value:function(e){var t=e.currentTarget,n=this.chart,i=this.dragged,r=this._closest(i,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].children[0];if(this._removeClass(Array.from(n.querySelectorAll(".allowedDrop")),"allowedDrop"),t.parentNode.parentNode.nextElementSibling){var s=window.parseInt(t.parentNode.colSpan)+2;if(t.parentNode.setAttribute("colspan",s),t.parentNode.parentNode.nextElementSibling.children[0].setAttribute("colspan",s),!i.querySelector(".horizontalEdge")){var a=document.createElement("i"),o=document.createElement("i");a.setAttribute("class","edge horizontalEdge rightEdge fa"),i.appendChild(a),o.setAttribute("class","edge horizontalEdge leftEdge fa"),i.appendChild(o)}var l=t.parentNode.parentNode.nextElementSibling.nextElementSibling,d=document.createElement("td"),c=document.createElement("td");d.setAttribute("class","leftLine topLine"),d.innerHTML="&nbsp;",l.insertBefore(d,l.children[1]),c.setAttribute("class","rightLine topLine"),c.innerHTML="&nbsp;",l.insertBefore(c,l.children[2]),l.nextElementSibling.appendChild(this._closest(i,function(e){return"TABLE"===e.nodeName}).parentNode);var h=this._siblings(this._closest(i,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")});if(1===h.length){var u=document.createElement("i"),f=document.createElement("i");u.setAttribute("class","edge horizontalEdge rightEdge fa"),h[0].appendChild(u),f.setAttribute("class","edge horizontalEdge leftEdge fa"),h[0].appendChild(f)}}else{var p=document.createElement("i");p.setAttribute("class","edge verticalEdge bottomEdge fa"),t.appendChild(p),t.parentNode.setAttribute("colspan",2);var v=this._closest(t,function(e){return"TABLE"===e.nodeName}),g=document.createElement("tr"),m=document.createElement("tr"),y=document.createElement("tr");g.setAttribute("class","lines"),g.innerHTML='<td colspan="2"><div class="downLine"></div></td>',v.appendChild(g),m.setAttribute("class","lines"),m.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',v.appendChild(m),y.setAttribute("class","nodes"),v.appendChild(y),Array.from(i.querySelectorAll(".horizontalEdge")).forEach(function(e){i.removeChild(e)});var b=this._closest(i,function(e){return"TABLE"===e.nodeName}).parentNode;y.appendChild(b)}var _=window.parseInt(r.colSpan);if(_>2){r.setAttribute("colspan",_-2),r.parentNode.nextElementSibling.children[0].setAttribute("colspan",_-2);var E=r.parentNode.nextElementSibling.nextElementSibling;E.children[1].remove(),E.children[1].remove();var L=Array.from(r.parentNode.parentNode.children[3].children).map(function(e){return e.querySelector(".node")});1===L.length&&(L[0].querySelector(".leftEdge").remove(),L[0].querySelector(".rightEdge").remove())}else r.removeAttribute("colspan"),r.querySelector(".node").removeChild(r.querySelector(".bottomEdge")),Array.from(r.parentNode.parentNode.children).slice(1).forEach(function(e){return e.remove()});var A=new CustomEvent("nodedropped.orgchart",{detail:{draggedNode:i,dragZone:r.children[0],dropZone:t}});n.dispatchEvent(A)}},{key:"_createNode",value:function(e,t){var n=this,i=this.options;return new Promise(function(r,s){if(e.children){var a=!0,o=!1,l=void 0;try{for(var d,c=e.children[Symbol.iterator]();!(a=(d=c.next()).done);a=!0){var h=d.value;h.parentId=e.id}}catch(e){o=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw l}}}var u=document.createElement("div");delete e.children,u.dataset.source=JSON.stringify(e),e[i.nodeId]&&(u.id=e[i.nodeId]);var f=n.chart.dataset.inEdit,p=void 0;p=f?"addChildren"===f?" slide-up":"":t>=i.depth?" slide-up":"",u.setAttribute("class","node "+(e.className||"")+p),i.draggable&&u.setAttribute("draggable",!0),e.parentId&&u.setAttribute("data-parent",e.parentId),u.innerHTML='\n        <div class="title">'+e[i.nodeTitle]+"</div>\n        "+(i.nodeContent?'<div class="content">'+e[i.nodeContent]+"</div>":"")+"\n      ";var v=e.relationship||"";if(i.verticalDepth&&t+2>i.verticalDepth){if(t+1>=i.verticalDepth&&Number(v.substr(2,1))){var g=document.createElement("i");g.setAttribute("class","toggleBtn fa fa-minus-square"),u.appendChild(g)}}else{if(Number(v.substr(0,1))){var m=document.createElement("i");m.setAttribute("class","edge verticalEdge topEdge fa"),u.appendChild(m)}if(Number(v.substr(1,1))){var y=document.createElement("i"),b=document.createElement("i");y.setAttribute("class","edge horizontalEdge rightEdge fa"),u.appendChild(y),b.setAttribute("class","edge horizontalEdge leftEdge fa"),
u.appendChild(b)}if(Number(v.substr(2,1))){var _=document.createElement("i"),E=document.createElement("i"),L=u.querySelector(":scope > .title");_.setAttribute("class","edge verticalEdge bottomEdge fa"),u.appendChild(_),E.setAttribute("class","fa "+i.parentNodeSymbol+" symbol"),L.insertBefore(E,L.children[0])}}u.addEventListener("mouseenter",n._hoverNode.bind(n)),u.addEventListener("mouseleave",n._hoverNode.bind(n)),u.addEventListener("click",n._dispatchClickEvent.bind(n)),i.draggable&&(u.addEventListener("dragstart",n._onDragStart.bind(n)),u.addEventListener("dragover",n._onDragOver.bind(n)),u.addEventListener("dragend",n._onDragEnd.bind(n)),u.addEventListener("drop",n._onDrop.bind(n))),i.createNode&&i.createNode(u,e),r(u)})}},{key:"buildHierarchy",value:function(e,t,n,i){var r=this,s=this.options,a=void 0,o=t.children,l=s.verticalDepth&&n+1>=s.verticalDepth;Object.keys(t).length>1&&(a=l?e:document.createElement("table"),l||e.appendChild(a),this._createNode(t,n).then(function(e){if(l)a.appendChild(e);else{var t=document.createElement("tr");t.innerHTML="\n            <td "+(o?'colspan="'+2*o.length+'"':"")+">\n            </td>\n          ",t.children[0].appendChild(e),a.insertBefore(t,a.children[0]?a.children[0]:null)}i&&i()}).catch(function(e){console.error("Failed to creat node",e)})),o&&!function(){1===Object.keys(t).length&&(a=e);var l=void 0,d=s.verticalDepth&&n+2>=s.verticalDepth,c=r.chart.dataset.inEdit;if(l=c?"addSiblings"===c?"":" hidden":n+1>=s.depth?" hidden":"",!d){var h=document.createElement("tr");h.setAttribute("class","lines"+l),h.innerHTML='\n          <td colspan="'+2*o.length+'">\n            <div class="downLine"></div>\n          </td>\n        ',a.appendChild(h)}var u=document.createElement("tr");u.setAttribute("class","lines"+l),u.innerHTML='\n        <td class="rightLine">&nbsp;</td>\n        '+o.slice(1).map(function(){return'\n          <td class="leftLine topLine">&nbsp;</td>\n          <td class="rightLine topLine">&nbsp;</td>\n          '}).join("")+'\n        <td class="leftLine">&nbsp;</td>\n      ';var f=void 0;if(d)if(f=document.createElement("<ul>"),n+2===s.verticalDepth){var p=document.createElement("tr");p.setAttribute("class","verticalNodes"),p.innerHTML="<td></td>",p.firstChild.appendChild(f)}else a.appendChild(f);else f=document.createElement("tr"),f.setAttribute("class","nodes"+l),a.appendChild(u),a.appendChild(f);o.forEach(function(e){var t=void 0;d?t=document.createElement("li"):(t=document.createElement("td"),t.setAttribute("colspan",2)),f.appendChild(t),r.buildHierarchy(t,e,n+1,i)})}()}},{key:"_clickChart",value:function(e){var t=this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")});!t&&this.chart.querySelector(".node.focused")&&this.chart.querySelector(".node.focused").classList.remove("focused")}},{key:"_clickExportButton",value:function(){var e=this.options,t=this.chartContainer,n=t.querySelector(":scope > .mask"),i=t.querySelector(".orgchart:not(.hidden)"),r="l2r"===e.direction||"r2l"===e.direction;n?n.classList.remove("hidden"):(n=document.createElement("div"),n.setAttribute("class","mask"),n.innerHTML='<i class="fa fa-circle-o-notch fa-spin spinner"></i>',t.appendChild(n)),t.classList.add("canvasContainer"),window.html2canvas(i,{width:r?i.clientHeight:i.clientWidth,height:r?i.clientWidth:i.clientHeight,onclone:function(e){var t=e.querySelector(".canvasContainer");t.style.overflow="visible",t.querySelector(".orgchart:not(.hidden)").transform=""}}).then(function(e){var n=t.querySelector(".oc-download-btn");t.querySelector(".mask").classList.add("hidden"),n.setAttribute("href",e.toDataURL()),n.click()}).catch(function(e){console.error("Failed to export the curent orgchart!",e)}).finally(function(){t.classList.remove("canvasContainer")})}},{key:"_loopChart",value:function(e){var t=this,n={id:e.querySelector(".node").id};return e.children[3]&&Array.from(e.children[3].children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._loopChart(e.firstChild))}),n}},{key:"getHierarchy",value:function(){return this.chart.querySelector(".node").id?this._loopChart(this.chart.querySelector("table")):"Error: Nodes of orghcart to be exported must have id attribute!"}},{key:"_onPanStart",value:function(e){var t=e.currentTarget;if(this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")})||e.touches&&e.touches.length>1)return void(t.dataset.panning=!1);t.style.cursor="move",t.dataset.panning=!0;var n=0,i=0,r=window.getComputedStyle(t).transform;if("none"!==r){var s=r.split(",");r.includes("3d")?(n=Number.parseInt(s[12],10),i=Number.parseInt(s[13],10)):(n=Number.parseInt(s[4],10),i=Number.parseInt(s[5],10))}var a=0,o=0;if(e.targetTouches){if(1===e.targetTouches.length)a=e.targetTouches[0].pageX-n,o=e.targetTouches[0].pageY-i;else if(e.targetTouches.length>1)return}else a=e.pageX-n,o=e.pageY-i;t.dataset.panStart=JSON.stringify({startX:a,startY:o}),t.addEventListener("mousemove",this._onPanning.bind(this)),t.addEventListener("touchmove",this._onPanning.bind(this))}},{key:"_onPanning",value:function(e){var t=e.currentTarget;if("false"!==t.dataset.panning){var n=0,i=0,r=JSON.parse(t.dataset.panStart),s=r.startX,a=r.startY;if(e.targetTouches){if(1===e.targetTouches.length)n=e.targetTouches[0].pageX-s,i=e.targetTouches[0].pageY-a;else if(e.targetTouches.length>1)return}else n=e.pageX-s,i=e.pageY-a;var o=window.getComputedStyle(t).transform;if("none"===o)o.includes("3d")?t.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+i+", 0, 1)":t.style.transform="matrix(1, 0, 0, 1, "+n+", "+i+")";else{var l=o.split(",");o.includes("3d")?(l[12]=n,l[13]=i):(l[4]=n,l[5]=i+")"),t.style.transform=l.join(",")}}}},{key:"_onPanEnd",value:function(e){var t=this.chart;"true"===t.dataset.panning&&(t.dataset.panning=!1,t.style.cursor="default",document.body.removeEventListener("mousemove",this._onPanning),document.body.removeEventListener("touchmove",this._onPanning))}},{key:"_setChartScale",value:function(e,t){var n=window.getComputedStyle(e).transform;if("none"===n)e.style.transform="scale("+t+","+t+")";else{var i=n.split(",");n.includes("3d")?e.style.transform=n+" scale3d("+t+","+t+", 1)":(i[0]="matrix("+t,i[3]=t,e.style.transform=n+" scale("+t+","+t+")")}e.dataset.scale=t}},{key:"_onWheeling",value:function(e){e.preventDefault();var t=e.deltaY>0?.8:1.2;this._setChartScale(this.chart,t)}},{key:"_getPinchDist",value:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))}},{key:"_onTouchStart",value:function(e){var t=this.chart;if(e.touches&&2===e.touches.length){var n=this._getPinchDist(e);t.dataset.pinching=!0,t.dataset.pinchDistStart=n}}},{key:"_onTouchMove",value:function(e){var t=this.chart;if(t.dataset.pinching){var n=this._getPinchDist(e);t.dataset.pinchDistEnd=n}}},{key:"_onTouchEnd",value:function(e){var t=this.chart;if(t.dataset.pinching){t.dataset.pinching=!1;var n=t.dataset.pinchDistEnd-t.dataset.pinchDistStart;n>0?this._setChartScale(t,1):n<0&&this._setChartScale(t,-1)}}},{key:"name",get:function(){return this._name}}]),e}();exports.default=OrgChart;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0LmpzIl0sIm5hbWVzIjpbIk9yZ0NoYXJ0Iiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIlByb21pc2UiLCJwcm90b3R5cGUiLCJmaW5hbGx5IiwiY2FsbGJhY2siLCJQIiwiY29uc3RydWN0b3IiLCJ0aGVuIiwidmFsdWUiLCJyZXNvbHZlIiwicmVhc29uIiwidGhhdCIsImRlZmF1bHRPcHRpb25zIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0RmlsZW5hbWUiLCJwYXJlbnROb2RlU3ltYm9sIiwiZHJhZ2dhYmxlIiwiZGlyZWN0aW9uIiwicGFuIiwiem9vbSIsIm9wdHMiLCJPYmplY3QiLCJkYXRhIiwiY2hhcnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjaGFydENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhc2V0IiwiSlNPTiIsInN0cmluZ2lmeSIsInNldEF0dHJpYnV0ZSIsIl90eXBlb2YiLCJidWlsZEhpZXJhcmNoeSIsImFqYXhVUkwiLCJfYXR0YWNoUmVsIiwic3RhcnRzV2l0aCIsIl9idWlsZEpzb25EUyIsImNoaWxkcmVuIiwic3Bpbm5lciIsImFwcGVuZENoaWxkIiwicmVzcCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwicmVtb3ZlQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiYmluZCIsImV4cG9ydEJ1dHRvbiIsImV4cG9ydEJ0biIsImRvd25sb2FkQnRuIiwiaW5uZXJIVE1MIiwiX2NsaWNrRXhwb3J0QnV0dG9uIiwiX2dldEpTT04iLCJzdHlsZSIsIm92ZXJmbG93IiwiX29uUGFuU3RhcnQiLCJib2R5IiwiX29uUGFuRW5kIiwiX2NsaWNrQ2hhcnQiLCJfb25XaGVlbGluZyIsIl9vblRvdWNoU3RhcnQiLCJfb25Ub3VjaE1vdmUiLCJfb25Ub3VjaEVuZCIsImVsIiwiX2Nsb3Nlc3QiLCJwYXJlbnROb2RlIiwiZm4iLCJmaWx0ZXIiLCJleHByIiwibWF0Y2hlcyIsInByZXZTaWIiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwic2licyIsInB1c2giLCJBcnJheSIsIm5leHRTaWIiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJlbGVtZW50cyIsImNsYXNzTmFtZXMiLCJzcGxpdCIsImZvckVhY2giLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbmRleE9mIiwicmVtb3ZlIiwicHJvcCIsInZhbCIsImF0dHIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0eXBlIiwibGlzdGVuZXIiLCJzZWxmIiwib25lIiwiZXZlbnQiLCJhbmNlc3RvcnMiLCJzZWxlY3RvciIsInJlc3VsdHMiLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ1cmwiLCJyZWplY3QiLCJoYW5kbGVyIiwic3RhdHVzIiwicGFyc2UiLCJyZXNwb25zZSIsIkVycm9yIiwieGhyIiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJsaSIsIl90aGlzIiwic3ViT2JqIiwibmFtZSIsImZpcnN0Q2hpbGQiLCJ0ZXh0Q29udGVudCIsInRyaW0iLCJyZWxhdGlvbnNoaXAiLCJsZW5ndGgiLCJpZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmcm9tIiwiZmxhZ3MiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIm5leHQiLCJkb25lIiwiaXRlbSIsIm5vZGUiLCJvZmZzZXRXaWR0aCIsInJlbGF0aW9uIiwiX3RoaXMyIiwiY3JpdGVyaWEiLCJzdGF0ZSIsImV4aXN0IiwidmlzaWJsZSIsImNvbnRhaW5zIiwiX2lzVmlzaWJsZSIsIm5vZGVOYW1lIiwiX3NpYmxpbmdzIiwibGFzdENoaWxkIiwibWFwIiwibGVmdEVkZ2UiLCJyaWdodEVkZ2UiLCJ0ZW1wIiwic2libGluZ3NMb2FkZWQiLCJzaWJzVmlzaWJsZSIsInNvbWUiLCJ0b2dnbGUiLCJ0YXJnZXQiLCJmbGFnIiwidG9wRWRnZSIsImJvdHRvbUVkZ2UiLCJfZ2V0Tm9kZVN0YXRlIiwiY2xpY2tlZE5vZGUiLCJjdXJyZW50VGFyZ2V0IiwiZm9jdXNlZE5vZGUiLCJjdXJyZW50Um9vdCIsIm5vZGVEYXRhIiwidGFibGUiLCJfY3JlYXRlTm9kZSIsIm5vZGVEaXYiLCJzdXBlcmlvckxpbmUiLCJpbmZlcmlvckxpbmUiLCJjaGlsZHJlblRyIiwicGFyZW50VHIiLCJpbnNlcnRCZWZvcmUiLCJhcnJvdyIsInNsaWNlIiwicGFyZW50IiwiX29uZSIsInNpYmxpbmdzIiwiX3ByZXZBbGwiLCJfbmV4dEFsbCIsIl9yZW1vdmVDbGFzcyIsInVwcGVyTGV2ZWwiLCJzaWIiLCJfdGhpczQiLCJfc3dpdGNoSG9yaXpvbnRhbEFycm93IiwiX3RoaXM1Iiwibm9kZUNvbnRhaW5lciIsImluQWpheCIsInByZVNpYnMiLCJhbmltYXRlZE5vZGVzIiwibGluZXMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsInVuZGVmaW5lZCIsIl9zdGVwMiIsIl9pdGVyYXRvcjIiLCJyZXR1cm4iLCJTZXQiLCJsaW5lIiwidmlzaWJpbGl0eSIsIl90aGlzNiIsIl9zd2l0Y2hWZXJ0aWNhbEFycm93IiwiX3JlcGFpbnQiLCJzb21lTGluZXMiLCJfYWRkQ2xhc3MiLCJoaWRlU2libGluZ3MiLCJfY3NzIiwiZ3JhbmRmYXRoZXJWaXNpYmxlIiwiaGlkZUFuY2VzdG9yc1NpYmxpbmdzIiwiX2J1aWxkUGFyZW50Tm9kZSIsImRpc2FibGVkIiwic3RvcFByb3BhZ2F0aW9uIiwicGFyZW50U3RhdGUiLCJfaXNJbkFjdGlvbiIsInNob3dQYXJlbnQiLCJfc3RhcnRMb2FkaW5nIiwic291cmNlIiwia2V5cyIsImFkZFBhcmVudCIsImlzVmVydGljYWxEZXNjIiwiZGVzYyIsImRlc2NlbmRhbnRzIiwiX3JlbW92ZUF0dHIiLCJfdGhpczciLCJhcHBlbmRUbyIsImNvdW50IiwiaW5FZGl0IiwiX2J1aWxkQ2hpbGROb2RlIiwic3ltYm9sIiwic2hvd0Rlc2NlbmRhbnRzIiwiX3RoaXM4IiwiY2hpbGRyZW5TdGF0ZSIsImhpZGVEZXNjZW5kYW50cyIsIl9lbmRMb2FkaW5nIiwib25lU2libGluZyIsInNpYmxpbmdDb3VudCIsImkiLCJleGlzdGluZ1NpYmxpZ0NvdW50IiwicmlnaHRMaW5lIiwibGVmdExpbmUiLCJfdGhpczkiLCJuZXdTaWJsaW5nQ291bnQiLCJub2RlQ2hhcnQiLCJpbnNlcnRQb3N0aW9uIiwiTWF0aCIsImZsb29yIiwiY2hpbGRDb3VudCIsInNpYmxpbmdUZHMiLCJfZ2V0RGVzY0VsZW1lbnRzIiwibm9kZUNvdW50IiwidGQiLCJfY29tcGxlbWVudExpbmUiLCJ0ZW1wMiIsInRlbXAzIiwiX2J1aWxkU2libGluZ05vZGUiLCJjYWxsIiwic2hvd1NpYmxpbmdzIiwiX3RoaXMxMCIsImhFZGdlIiwic2libGluZ3NTdGF0ZSIsImZhbWlsaWVzIiwiYWRkU2libGluZ3MiLCJ0b2dnbGVCdG4iLCJkZXNjV3JhcHBlciIsImFkZENoaWxkcmVuIiwib25jZSIsInVsIiwiX2NsaWNrVG9wRWRnZSIsIl9jbGlja0hvcml6b250YWxFZGdlIiwiX2NsaWNrQm90dG9tRWRnZSIsIl9jbGlja05vZGUiLCJpc0ZpcmVmb3giLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJnaG9zdE5vZGUiLCJub2RlQ292ZXIiLCJjcmVhdGVFbGVtZW50TlMiLCJzY2FsZSIsImFicyIsIndpbmRvdyIsInBhcnNlRmxvYXQiLCJ0cmFuc1ZhbHVlcyIsInhPZmZzZXQiLCJvZmZzZXRZIiwieU9mZnNldCIsIm9mZnNldFgiLCJvZmZzZXRIZWlnaHQiLCJnaG9zdE5vZGVXcmFwcGVyIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwiZHJhZ2dlZCIsImRyYWdab25lIiwiZHJhZ0hpZXIiLCJkcm9wWm9uZSIsImRyb3BDb2xzcGFuIiwiY29sU3BhbiIsImxlZnRsaW5lIiwicmlnaHRsaW5lIiwiZHJvcFNpYnMiLCJ1cHBlclRyIiwibG93ZXJUciIsIm5vZGVUciIsImRyYWdnZWRUZCIsImRyYWdDb2xTcGFuIiwiZHJhZ1NpYnMiLCJ0ciIsImRldGFpbCIsImRpc3BhdGNoRXZlbnQiLCJsZXZlbCIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsImNoaWxkIiwicGFyZW50SWQiLCJpc0hpZGRlbiIsIl9jbGlja1RvZ2dsZUJ1dHRvbiIsIm5vZGVUaXRsZSIsIm5vZGVDb250ZW50IiwidmVydGljYWxEZXB0aCIsIk51bWJlciIsInN1YnN0ciIsInRpdGxlIiwiX2hvdmVyTm9kZSIsIl9kaXNwYXRjaENsaWNrRXZlbnQiLCJfb25EcmFnRW5kIiwiX29uRHJvcCIsImNyZWF0ZU5vZGUiLCJub2RlV3JhcHBlciIsImNoaWxkTm9kZXMiLCJpc1ZlcnRpY2FsTm9kZSIsImRyb3BDcml0ZXJpYSIsImlzVmVydGljYWxMYXllciIsImxpbmVMYXllciIsIm5vZGVMYXllciIsInBhcnNlSW50Iiwibm9kZUNlbGwiLCJjbG9zZXN0Tm9kZSIsIm1hc2siLCJodG1sMmNhbnZhcyIsInNvdXJjZUNoYXJ0IiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJvbmNsb25lIiwiY2xvbmVEb2MiLCJjYW52YXNDb250YWluZXIiLCJ0cmFuc2Zvcm0iLCJjYW52YXMiLCJjbGljayIsIl90aGlzMTEiLCJjdXN0b21FIiwiX2xvb3BDaGFydCIsInRvdWNoZXMiLCJwYW5uaW5nIiwiY3Vyc29yIiwibGFzdFgiLCJsYXN0WSIsImxhc3RUZiIsImdldENvbXB1dGVkU3R5bGUiLCJpbmNsdWRlcyIsInN0YXJ0WSIsInRhcmdldFRvdWNoZXMiLCJzdGFydFgiLCJwYWdlWCIsInBhZ2VZIiwiX29uUGFubmluZyIsIm5ld1giLCJuZXdZIiwicGFuU3RhcnQiLCJtYXRyaXgiLCJqb2luIiwibmV3U2NhbGUiLCJfc2V0Q2hhcnRTY2FsZSIsInNxcnQiLCJjbGllbnRYIiwiY2xpZW50WSIsImRpc3QiLCJfZ2V0UGluY2hEaXN0IiwicGluY2hEaXN0U3RhcnQiLCJwaW5jaGluZyIsImRpZmYiLCJwaW5jaERpc3RFbmQiXSwibWFwcGluZ3MiOiIrd0JBQXFCQSxvQkFDbkIsUUFBQUEsR0FBWUMsR0FBU0MsZ0JBQUFDLEtBQUFILEdBQ25CRyxLQUFLQyxNQUFRLFdBQ2JDLFFBQVFDLFVBQVVDLFFBQVUsU0FBVUMsR0FDcEMsR0FBSUMsR0FBSU4sS0FBS08sV0FFYixPQUFPUCxNQUFLUSxLQUNWLFNBQUFDLEdBQUEsTUFBU0gsR0FBRUksUUFBUUwsS0FBWUcsS0FBSyxXQUFBLE1BQU1DLE1BQzFDLFNBQUFFLEdBQUEsTUFBVUwsR0FBRUksUUFBUUwsS0FBWUcsS0FBSyxXQUFRLEtBQU1HLE9BSXZELElBQUlDLEdBQU9aLEtBQ1RhLEdBYmVoQixVQWNBLE9BYm5CaUIsT0FBQSxLQUFxQkMsb0JBQUEsRUFnQmZDLE1BQVMsSUFmYkMsV0FBYSxHQUNiZixjQUFrQkUsRUFDaEJjLGVBQWFYLFdBaUJYWSxpQkFBb0IsV0FmdEJDLFdBQVlaLEVBQ1ZhLFVBQVdYLE1BQXlCWSxLQUFBLEVBQUFDLE1BQXBDLEdBQ0FDLEVBQUFDLE9BQVlmLE9BQVFMLEVBQWlCUCxHQUFRNEIsRUFBQUYsRUFBTWIsS0FBU2dCLEVBQTVEQyxTQUFBQyxjQUFBLE9BQUFDLEVBRkZGLFNBQUFHLGNBQUFQLEVBQUFNLGVBWUUsSUFjSjlCLEtBQUtGLFFBQVUwQixRQXBCWFosTUFBT2QsUUFBWDRCLEtBQUExQixLQUNFYSxNQUFBQSxFQUNFYixLQUFBOEIsZUFEZUEsRUFFZkgsRUFBQUssUUFBVWxDLFFBRkttQyxLQUFBQyxVQUFBVixHQUdmRyxFQUFBUSxhQUFBLFFBQXNCLFlBSFAsS0FBQVgsRUFBQVAsV0FBQSxJQUFBTyxFQUFBUCxXQUFBLEtB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cyBPcmdDaGFydCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9uYW1lID0gJ09yZ0NoYXJ0JztcbiAgICBQcm9taXNlLnByb3RvdHlwZS5maW5hbGx5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICBsZXQgUCA9IHRoaXMuY29uc3RydWN0b3I7XG5cbiAgICAgIHJldHVybiB0aGlzLnRoZW4oXG4gICAgICAgIHZhbHVlID0+IFAucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKCgpID0+IHZhbHVlKSxcbiAgICAgICAgcmVhc29uID0+IFAucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKCgpID0+IHsgdGhyb3cgcmVhc29uOyB9KVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgICdub2RlVGl0bGUnOiAnbmFtZScsXG4gICAgICAgICdub2RlSWQnOiAnaWQnLFxuICAgICAgICAndG9nZ2xlU2libGluZ3NSZXNwJzogZmFsc2UsXG4gICAgICAgICdkZXB0aCc6IDk5OSxcbiAgICAgICAgJ2NoYXJ0Q2xhc3MnOiAnJyxcbiAgICAgICAgJ2V4cG9ydEJ1dHRvbic6IGZhbHNlLFxuICAgICAgICAnZXhwb3J0RmlsZW5hbWUnOiAnT3JnQ2hhcnQnLFxuICAgICAgICAncGFyZW50Tm9kZVN5bWJvbCc6ICdmYS11c2VycycsXG4gICAgICAgICdkcmFnZ2FibGUnOiBmYWxzZSxcbiAgICAgICAgJ2RpcmVjdGlvbic6ICd0MmInLFxuICAgICAgICAncGFuJzogZmFsc2UsXG4gICAgICAgICd6b29tJzogZmFsc2VcbiAgICAgIH0sXG4gICAgICBvcHRzID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyksXG4gICAgICBkYXRhID0gb3B0cy5kYXRhLFxuICAgICAgY2hhcnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgIGNoYXJ0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRzLmNoYXJ0Q29udGFpbmVyKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdHM7XG4gICAgZGVsZXRlIHRoaXMub3B0aW9ucy5kYXRhO1xuICAgIHRoaXMuY2hhcnQgPSBjaGFydDtcbiAgICB0aGlzLmNoYXJ0Q29udGFpbmVyID0gY2hhcnRDb250YWluZXI7XG4gICAgY2hhcnQuZGF0YXNldC5vcHRpb25zID0gSlNPTi5zdHJpbmdpZnkob3B0cyk7XG4gICAgY2hhcnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdvcmdjaGFydCcgKyAob3B0cy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIG9wdHMuY2hhcnRDbGFzcyA6ICcnKSArXG4gICAgICAob3B0cy5kaXJlY3Rpb24gIT09ICd0MmInID8gJyAnICsgb3B0cy5kaXJlY3Rpb24gOiAnJykpO1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpIHsgLy8gbG9jYWwganNvbiBkYXRhc291cmNlXG4gICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KGNoYXJ0LCBvcHRzLmFqYXhVUkwgPyBkYXRhIDogdGhpcy5fYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyAmJiBkYXRhLnN0YXJ0c1dpdGgoJyMnKSkgeyAvLyB1bCBkYXRhc291cmNlXG4gICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KGNoYXJ0LCB0aGlzLl9idWlsZEpzb25EUyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRhdGEpLmNoaWxkcmVuWzBdKSwgMCk7XG4gICAgfSBlbHNlIHsgLy8gYWpheCBkYXRhc291cmNlXG4gICAgICBsZXQgc3Bpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgc3Bpbm5lci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2ZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lcicpO1xuICAgICAgY2hhcnQuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgICB0aGlzLl9nZXRKU09OKGRhdGEpXG4gICAgICAudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5KGNoYXJ0LCBvcHRzLmFqYXhVUkwgPyByZXNwIDogdGhhdC5fYXR0YWNoUmVsKHJlc3AsICcwMCcpLCAwKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdmYWlsZWQgdG8gZmV0Y2ggZGF0YXNvdXJjZSBmb3Igb3JnY2hhcnQnLCBlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHNwaW5uZXIgPSBjaGFydC5xdWVyeVNlbGVjdG9yKCcuc3Bpbm5lcicpO1xuXG4gICAgICAgIHNwaW5uZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzcGlubmVyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjaGFydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2NsaWNrQ2hhcnQuYmluZCh0aGlzKSk7XG4gICAgLy8gYXBwZW5kIHRoZSBleHBvcnQgYnV0dG9uIHRvIHRoZSBjaGFydC1jb250YWluZXJcbiAgICBpZiAob3B0cy5leHBvcnRCdXR0b24gJiYgIWNoYXJ0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5vYy1leHBvcnQtYnRuJykpIHtcbiAgICAgIGxldCBleHBvcnRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSxcbiAgICAgICAgZG93bmxvYWRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cbiAgICAgIGV4cG9ydEJ0bi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ29jLWV4cG9ydC1idG4nICsgKG9wdHMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyBvcHRzLmNoYXJ0Q2xhc3MgOiAnJykpO1xuICAgICAgZXhwb3J0QnRuLmlubmVySFRNTCA9ICdFeHBvcnQnO1xuICAgICAgZXhwb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xpY2tFeHBvcnRCdXR0b24uYmluZCh0aGlzKSk7XG4gICAgICBkb3dubG9hZEJ0bi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ29jLWRvd25sb2FkLWJ0bicgKyAob3B0cy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIG9wdHMuY2hhcnRDbGFzcyA6ICcnKSk7XG4gICAgICBkb3dubG9hZEJ0bi5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgb3B0cy5leHBvcnRGaWxlbmFtZSArICcucG5nJyk7XG4gICAgICBjaGFydENvbnRhaW5lci5hcHBlbmRDaGlsZChleHBvcnRCdG4pO1xuICAgICAgY2hhcnRDb250YWluZXIuYXBwZW5kQ2hpbGQoZG93bmxvYWRCdG4pO1xuICAgIH1cblxuICAgIGlmIChvcHRzLnBhbikge1xuICAgICAgY2hhcnRDb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgIGNoYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX29uUGFuU3RhcnQuYmluZCh0aGlzKSk7XG4gICAgICBjaGFydC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5fb25QYW5TdGFydC5iaW5kKHRoaXMpKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uUGFuRW5kLmJpbmQodGhpcykpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uUGFuRW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGlmIChvcHRzLnpvb20pIHtcbiAgICAgIGNoYXJ0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5fb25XaGVlbGluZy5iaW5kKHRoaXMpKTtcbiAgICAgIGNoYXJ0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9vblRvdWNoU3RhcnQuYmluZCh0aGlzKSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlLmJpbmQodGhpcykpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hFbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgY2hhcnRDb250YWluZXIuYXBwZW5kQ2hpbGQoY2hhcnQpO1xuICB9XG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG4gIF9jbG9zZXN0KGVsLCBmbikge1xuICAgIHJldHVybiBlbCAmJiAoKGZuKGVsKSAmJiBlbCAhPT0gdGhpcy5jaGFydCkgPyBlbCA6IHRoaXMuX2Nsb3Nlc3QoZWwucGFyZW50Tm9kZSwgZm4pKTtcbiAgfVxuICBfc2libGluZ3MoZWwsIGV4cHIpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShlbC5wYXJlbnROb2RlLmNoaWxkcmVuKS5maWx0ZXIoKGNoaWxkKSA9PiB7XG4gICAgICBpZiAoY2hpbGQgIT09IGVsKSB7XG4gICAgICAgIGlmIChleHByKSB7XG4gICAgICAgICAgcmV0dXJuIGVsLm1hdGNoZXMoZXhwcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH1cbiAgX3ByZXZBbGwoZWwsIGV4cHIpIHtcbiAgICBsZXQgc2licyA9IFtdLFxuICAgICAgcHJldlNpYiA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cbiAgICB3aGlsZSAocHJldlNpYikge1xuICAgICAgaWYgKCFleHByIHx8IHByZXZTaWIubWF0Y2hlcyhleHByKSkge1xuICAgICAgICBzaWJzLnB1c2gocHJldlNpYik7XG4gICAgICB9XG4gICAgICBwcmV2U2liID0gcHJldlNpYi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIH1cbiAgICByZXR1cm4gc2licztcbiAgfVxuICBfbmV4dEFsbChlbCwgZXhwcikge1xuICAgIGxldCBzaWJzID0gW107XG4gICAgbGV0IG5leHRTaWIgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICB3aGlsZSAobmV4dFNpYikge1xuICAgICAgaWYgKCFleHByIHx8IG5leHRTaWIubWF0Y2hlcyhleHByKSkge1xuICAgICAgICBzaWJzLnB1c2gobmV4dFNpYik7XG4gICAgICB9XG4gICAgICBuZXh0U2liID0gbmV4dFNpYi5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgfVxuICAgIHJldHVybiBzaWJzO1xuICB9XG4gIF9pc1Zpc2libGUoZWwpIHtcbiAgICByZXR1cm4gZWwub2Zmc2V0UGFyZW50ICE9PSBudWxsO1xuICB9XG4gIF9hZGRDbGFzcyhlbGVtZW50cywgY2xhc3NOYW1lcykge1xuICAgIGVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBpZiAoY2xhc3NOYW1lcy5pbmRleE9mKCcgJykgPiAwKSB7XG4gICAgICAgIGNsYXNzTmFtZXMuc3BsaXQoJyAnKS5mb3JFYWNoKChjbGFzc05hbWUpID0+IGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIF9yZW1vdmVDbGFzcyhlbGVtZW50cywgY2xhc3NOYW1lcykge1xuICAgIGVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBpZiAoY2xhc3NOYW1lcy5pbmRleE9mKCcgJykgPiAwKSB7XG4gICAgICAgIGNsYXNzTmFtZXMuc3BsaXQoJyAnKS5mb3JFYWNoKChjbGFzc05hbWUpID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIF9jc3MoZWxlbWVudHMsIHByb3AsIHZhbCkge1xuICAgIGVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBlbC5zdHlsZVtwcm9wXSA9IHZhbDtcbiAgICB9KTtcbiAgfVxuICBfcmVtb3ZlQXR0cihlbGVtZW50cywgYXR0cikge1xuICAgIGVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgfSk7XG4gIH1cbiAgX29uZShlbCwgdHlwZSwgbGlzdGVuZXIsIHNlbGYpIHtcbiAgICBsZXQgb25lID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICBsaXN0ZW5lci5jYWxsKHNlbGYsIGV2ZW50KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgb25lKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBvbmUpO1xuICB9XG4gIF9nZXREZXNjRWxlbWVudHMoYW5jZXN0b3JzLCBzZWxlY3Rvcikge1xuICAgIGxldCByZXN1bHRzID0gW107XG5cbiAgICBhbmNlc3RvcnMuZm9yRWFjaCgoZWwpID0+IHJlc3VsdHMucHVzaCguLi5lbC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkpO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG4gIF9nZXRKU09OKHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IodGhpcy5zdGF0dXNUZXh0KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgLy8geGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfSk7XG4gIH1cbiAgX2J1aWxkSnNvbkRTKGxpKSB7XG4gICAgbGV0IHN1Yk9iaiA9IHtcbiAgICAgICduYW1lJzogbGkuZmlyc3RDaGlsZC50ZXh0Q29udGVudC50cmltKCksXG4gICAgICAncmVsYXRpb25zaGlwJzogKGxpLnBhcmVudE5vZGUucGFyZW50Tm9kZS5ub2RlTmFtZSA9PT0gJ0xJJyA/ICcxJyA6ICcwJykgK1xuICAgICAgICAobGkucGFyZW50Tm9kZS5jaGlsZHJlbi5sZW5ndGggPiAxID8gMSA6IDApICsgKGxpLmNoaWxkcmVuLmxlbmd0aCA/IDEgOiAwKVxuICAgIH07XG5cbiAgICBpZiAobGkuaWQpIHtcbiAgICAgIHN1Yk9iai5pZCA9IGxpLmlkO1xuICAgIH1cbiAgICBpZiAobGkucXVlcnlTZWxlY3RvcigndWwnKSkge1xuICAgICAgQXJyYXkuZnJvbShsaS5xdWVyeVNlbGVjdG9yKCd1bCcpLmNoaWxkcmVuKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICBpZiAoIXN1Yk9iai5jaGlsZHJlbikgeyBzdWJPYmouY2hpbGRyZW4gPSBbXTsgfVxuICAgICAgICBzdWJPYmouY2hpbGRyZW4ucHVzaCh0aGlzLl9idWlsZEpzb25EUyhlbCkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBzdWJPYmo7XG4gIH1cbiAgX2F0dGFjaFJlbChkYXRhLCBmbGFncykge1xuICAgIGRhdGEucmVsYXRpb25zaGlwID0gZmxhZ3MgKyAoZGF0YS5jaGlsZHJlbiAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDAgPyAxIDogMCk7XG4gICAgaWYgKGRhdGEuY2hpbGRyZW4pIHtcbiAgICAgIGZvciAobGV0IGl0ZW0gb2YgZGF0YS5jaGlsZHJlbikge1xuICAgICAgICB0aGlzLl9hdHRhY2hSZWwoaXRlbSwgJzEnICsgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMSA/IDEgOiAwKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIF9yZXBhaW50KG5vZGUpIHtcbiAgICBpZiAobm9kZSkge1xuICAgICAgbm9kZS5zdHlsZS5vZmZzZXRXaWR0aCA9IG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgfVxuICB9XG4gIC8vIHdoZXRoZXIgdGhlIGN1cnNvciBpcyBob3ZlcmluZyBvdmVyIHRoZSBub2RlXG4gIF9pc0luQWN0aW9uKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAuZWRnZScpLmNsYXNzTmFtZS5pbmRleE9mKCdmYS0nKSA+IC0xO1xuICB9XG4gIC8vIGRldGVjdCB0aGUgZXhpc3QvZGlzcGxheSBzdGF0ZSBvZiByZWxhdGVkIG5vZGVcbiAgX2dldE5vZGVTdGF0ZShub2RlLCByZWxhdGlvbikge1xuICAgIGxldCBjcml0ZXJpYSxcbiAgICAgIHN0YXRlID0geyAnZXhpc3QnOiBmYWxzZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuXG4gICAgaWYgKHJlbGF0aW9uID09PSAncGFyZW50Jykge1xuICAgICAgY3JpdGVyaWEgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0ICYmIGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKSk7XG4gICAgICBpZiAoY3JpdGVyaWEpIHtcbiAgICAgICAgc3RhdGUuZXhpc3QgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmV4aXN0ICYmIHRoaXMuX2lzVmlzaWJsZShjcml0ZXJpYS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdKSkge1xuICAgICAgICBzdGF0ZS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICBjcml0ZXJpYSA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RSJykubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgaWYgKGNyaXRlcmlhKSB7XG4gICAgICAgIHN0YXRlLmV4aXN0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5leGlzdCAmJiB0aGlzLl9pc1Zpc2libGUoY3JpdGVyaWEpKSB7XG4gICAgICAgIHN0YXRlLnZpc2libGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcbiAgICAgIGNyaXRlcmlhID0gdGhpcy5fc2libGluZ3ModGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlKTtcbiAgICAgIGlmIChjcml0ZXJpYS5sZW5ndGgpIHtcbiAgICAgICAgc3RhdGUuZXhpc3QgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmV4aXN0ICYmIGNyaXRlcmlhLnNvbWUoKGVsKSA9PiB0aGlzLl9pc1Zpc2libGUoZWwpKSkge1xuICAgICAgICBzdGF0ZS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cbiAgLy8gZmluZCB0aGUgcmVsYXRlZCBub2Rlc1xuICBnZXRSZWxhdGVkTm9kZXMobm9kZSwgcmVsYXRpb24pIHtcbiAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKSlcbiAgICAgICAgLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0ucXVlcnlTZWxlY3RvcignLm5vZGUnKTtcbiAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLmxhc3RDaGlsZC5jaGlsZHJlbilcbiAgICAgICAgLm1hcCgoZWwpID0+IGVsLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykpO1xuICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaWJsaW5ncyh0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGUpXG4gICAgICAgIC5tYXAoKGVsKSA9PiBlbC5xdWVyeVNlbGVjdG9yKCcubm9kZScpKTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIF9zd2l0Y2hIb3Jpem9udGFsQXJyb3cobm9kZSkge1xuICAgIGxldCBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgbGVmdEVkZ2UgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJy5sZWZ0RWRnZScpLFxuICAgICAgcmlnaHRFZGdlID0gbm9kZS5xdWVyeVNlbGVjdG9yKCcucmlnaHRFZGdlJyksXG4gICAgICB0ZW1wID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlO1xuXG4gICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwICYmICh0eXBlb2Ygb3B0cy5hamF4VVJMID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnLm5vZGVzJykpLmRhdGFzZXQuc2libGluZ3NMb2FkZWQpKSB7XG4gICAgICBsZXQgcHJldlNpYiA9IHRlbXAucHJldmlvdXNFbGVtZW50U2libGluZyxcbiAgICAgICAgbmV4dFNpYiA9IHRlbXAubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICBpZiAocHJldlNpYikge1xuICAgICAgICBpZiAocHJldlNpYi5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgICAgbGVmdEVkZ2UuY2xhc3NMaXN0LmFkZCgnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgbGVmdEVkZ2UuY2xhc3NMaXN0LnJlbW92ZSgnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxlZnRFZGdlLmNsYXNzTGlzdC5hZGQoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgICBsZWZ0RWRnZS5jbGFzc0xpc3QucmVtb3ZlKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG5leHRTaWIpIHtcbiAgICAgICAgaWYgKG5leHRTaWIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICAgIHJpZ2h0RWRnZS5jbGFzc0xpc3QuYWRkKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICAgcmlnaHRFZGdlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJpZ2h0RWRnZS5jbGFzc0xpc3QuYWRkKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgICByaWdodEVkZ2UuY2xhc3NMaXN0LnJlbW92ZSgnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBzaWJzID0gdGhpcy5fc2libGluZ3ModGVtcCksXG4gICAgICAgIHNpYnNWaXNpYmxlID0gc2licy5sZW5ndGggPyAhc2licy5zb21lKChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkgOiBmYWxzZTtcblxuICAgICAgbGVmdEVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1yaWdodCcsIHNpYnNWaXNpYmxlKTtcbiAgICAgIGxlZnRFZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tbGVmdCcsICFzaWJzVmlzaWJsZSk7XG4gICAgICByaWdodEVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1sZWZ0Jywgc2lic1Zpc2libGUpO1xuICAgICAgcmlnaHRFZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tcmlnaHQnLCAhc2lic1Zpc2libGUpO1xuICAgIH1cbiAgfVxuICBfaG92ZXJOb2RlKGV2ZW50KSB7XG4gICAgbGV0IG5vZGUgPSBldmVudC50YXJnZXQsXG4gICAgICBmbGFnID0gZmFsc2UsXG4gICAgICB0b3BFZGdlID0gbm9kZS5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAudG9wRWRnZScpLFxuICAgICAgYm90dG9tRWRnZSA9IG5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLmJvdHRvbUVkZ2UnKSxcbiAgICAgIGxlZnRFZGdlID0gbm9kZS5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAubGVmdEVkZ2UnKTtcblxuICAgIGlmIChldmVudC50eXBlID09PSAnbW91c2VlbnRlcicpIHtcbiAgICAgIGlmICh0b3BFZGdlKSB7XG4gICAgICAgIGZsYWcgPSB0aGlzLl9nZXROb2RlU3RhdGUobm9kZSwgJ3BhcmVudCcpLnZpc2libGU7XG4gICAgICAgIHRvcEVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi11cCcsICFmbGFnKTtcbiAgICAgICAgdG9wRWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLWRvd24nLCBmbGFnKTtcbiAgICAgIH1cbiAgICAgIGlmIChib3R0b21FZGdlKSB7XG4gICAgICAgIGZsYWcgPSB0aGlzLl9nZXROb2RlU3RhdGUobm9kZSwgJ2NoaWxkcmVuJykudmlzaWJsZTtcbiAgICAgICAgYm90dG9tRWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLWRvd24nLCAhZmxhZyk7XG4gICAgICAgIGJvdHRvbUVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi11cCcsIGZsYWcpO1xuICAgICAgfVxuICAgICAgaWYgKGxlZnRFZGdlKSB7XG4gICAgICAgIHRoaXMuX3N3aXRjaEhvcml6b250YWxBcnJvdyhub2RlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgQXJyYXkuZnJvbShub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IC5lZGdlJykpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWNoZXZyb24tdXAnLCAnZmEtY2hldnJvbi1kb3duJywgJ2ZhLWNoZXZyb24tcmlnaHQnLCAnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLy8gZGVmaW5lIG5vZGUgY2xpY2sgZXZlbnQgaGFuZGxlclxuICBfY2xpY2tOb2RlKGV2ZW50KSB7XG4gICAgbGV0IGNsaWNrZWROb2RlID0gZXZlbnQuY3VycmVudFRhcmdldCxcbiAgICAgIGZvY3VzZWROb2RlID0gdGhpcy5jaGFydC5xdWVyeVNlbGVjdG9yKCcuZm9jdXNlZCcpO1xuXG4gICAgaWYgKGZvY3VzZWROb2RlKSB7XG4gICAgICBmb2N1c2VkTm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1c2VkJyk7XG4gICAgfVxuICAgIGNsaWNrZWROb2RlLmNsYXNzTGlzdC5hZGQoJ2ZvY3VzZWQnKTtcbiAgfVxuICAvLyBidWlsZCB0aGUgcGFyZW50IG5vZGUgb2Ygc3BlY2lmaWMgbm9kZVxuICBfYnVpbGRQYXJlbnROb2RlKGN1cnJlbnRSb290LCBub2RlRGF0YSwgY2FsbGJhY2spIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG5cbiAgICBub2RlRGF0YS5yZWxhdGlvbnNoaXAgPSAnMDAxJztcbiAgICB0aGlzLl9jcmVhdGVOb2RlKG5vZGVEYXRhLCAwKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKG5vZGVEaXYpIHtcbiAgICAgICAgbGV0IGNoYXJ0ID0gdGhhdC5jaGFydDtcblxuICAgICAgICBub2RlRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLXVwJyk7XG4gICAgICAgIG5vZGVEaXYuY2xhc3NMaXN0LmFkZCgnc2xpZGUtZG93bicpO1xuICAgICAgICBsZXQgcGFyZW50VHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpLFxuICAgICAgICAgIHN1cGVyaW9yTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyksXG4gICAgICAgICAgaW5mZXJpb3JMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKSxcbiAgICAgICAgICBjaGlsZHJlblRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgICBwYXJlbnRUci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2hpZGRlbicpO1xuICAgICAgICBwYXJlbnRUci5pbm5lckhUTUwgPSBgPHRkIGNvbHNwYW49XCIyXCI+PC90ZD5gO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChwYXJlbnRUcik7XG4gICAgICAgIHN1cGVyaW9yTGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpbmVzIGhpZGRlbicpO1xuICAgICAgICBzdXBlcmlvckxpbmUuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+YDtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoc3VwZXJpb3JMaW5lKTtcbiAgICAgICAgaW5mZXJpb3JMaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGluZXMgaGlkZGVuJyk7XG4gICAgICAgIGluZmVyaW9yTGluZS5pbm5lckhUTUwgPSBgPHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+YDtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoaW5mZXJpb3JMaW5lKTtcbiAgICAgICAgY2hpbGRyZW5Uci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vZGVzJyk7XG4gICAgICAgIGNoaWxkcmVuVHIuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPVwiMlwiPjwvdGQ+YDtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoY2hpbGRyZW5Ucik7XG4gICAgICAgIHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RkJykuYXBwZW5kQ2hpbGQobm9kZURpdik7XG4gICAgICAgIGNoYXJ0Lmluc2VydEJlZm9yZSh0YWJsZSwgY2hhcnQuY2hpbGRyZW5bMF0pO1xuICAgICAgICB0YWJsZS5jaGlsZHJlblszXS5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChjaGFydC5sYXN0Q2hpbGQpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgcGFyZW50IG5vZGUnLCBlcnIpO1xuICAgICAgfSk7XG4gIH1cbiAgX3N3aXRjaFZlcnRpY2FsQXJyb3coYXJyb3cpIHtcbiAgICBhcnJvdy5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLXVwJyk7XG4gICAgYXJyb3cuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1kb3duJyk7XG4gIH1cbiAgLy8gc2hvdyB0aGUgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gIHNob3dQYXJlbnQobm9kZSkge1xuICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBzdXBlcmlvciBsZXZlbFxuICAgIGxldCB0ZW1wID0gdGhpcy5fcHJldkFsbCh0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKSk7XG5cbiAgICB0aGlzLl9yZW1vdmVDbGFzcyh0ZW1wLCAnaGlkZGVuJyk7XG4gICAgLy8ganVzdCBzaG93IG9ubHkgb25lIGxpbmVcbiAgICB0aGlzLl9hZGRDbGFzcyhBcnJheSh0ZW1wWzBdLmNoaWxkcmVuKS5zbGljZSgxLCAtMSksICdoaWRkZW4nKTtcbiAgICAvLyBzaG93IHBhcmVudCBub2RlIHdpdGggYW5pbWF0aW9uXG4gICAgbGV0IHBhcmVudCA9IHRlbXBbMl0ucXVlcnlTZWxlY3RvcignLm5vZGUnKTtcblxuICAgIHRoaXMuX29uZShwYXJlbnQsICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlJyk7XG4gICAgICBpZiAodGhpcy5faXNJbkFjdGlvbihub2RlKSkge1xuICAgICAgICB0aGlzLl9zd2l0Y2hWZXJ0aWNhbEFycm93KG5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnRvcEVkZ2UnKSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gICAgdGhpcy5fcmVwYWludChwYXJlbnQpO1xuICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCdzbGlkZScpO1xuICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1kb3duJyk7XG4gIH1cbiAgLy8gc2hvdyB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgc2hvd1NpYmxpbmdzKG5vZGUsIGRpcmVjdGlvbikge1xuICAgIC8vIGZpcnN0bHksIHNob3cgdGhlIHNpYmxpbmcgdGQgdGFnc1xuICAgIGxldCBzaWJsaW5ncyA9IFtdLFxuICAgICAgdGVtcCA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZTtcblxuICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgIHNpYmxpbmdzID0gZGlyZWN0aW9uID09PSAnbGVmdCcgPyB0aGlzLl9wcmV2QWxsKHRlbXApIDogdGhpcy5fbmV4dEFsbCh0ZW1wKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2libGluZ3MgPSB0aGlzLl9zaWJsaW5ncyh0ZW1wKTtcbiAgICB9XG4gICAgdGhpcy5fcmVtb3ZlQ2xhc3Moc2libGluZ3MsICdoaWRkZW4nKTtcbiAgICAvLyBzZWNvbmRseSwgc2hvdyB0aGUgbGluZXNcbiAgICBsZXQgdXBwZXJMZXZlbCA9IHRoaXMuX3ByZXZBbGwodGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKSkpO1xuXG4gICAgdGVtcCA9IEFycmF5LmZyb20odXBwZXJMZXZlbFswXS5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAuaGlkZGVuJykpO1xuICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKHRlbXAuc2xpY2UoMCwgc2libGluZ3MubGVuZ3RoICogMiksICdoaWRkZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3ModGVtcCwgJ2hpZGRlbicpO1xuICAgIH1cbiAgICAvLyB0aGlyZGx5LCBkbyBzb21lIGNsZWFuaW5nIHN0dWZmXG4gICAgaWYgKCF0aGlzLl9nZXROb2RlU3RhdGUobm9kZSwgJ3BhcmVudCcpLnZpc2libGUpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKHVwcGVyTGV2ZWwsICdoaWRkZW4nKTtcbiAgICAgIGxldCBwYXJlbnQgPSB1cHBlckxldmVsWzJdLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyk7XG5cbiAgICAgIHRoaXMuX29uZShwYXJlbnQsICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZScpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgICB0aGlzLl9yZXBhaW50KHBhcmVudCk7XG4gICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZCgnc2xpZGUnKTtcbiAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1kb3duJyk7XG4gICAgfVxuICAgIC8vIGxhc3RseSwgc2hvdyB0aGUgc2libGluZyBub2RlcyB3aXRoIGFuaW1hdGlvblxuICAgIHNpYmxpbmdzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5faXNWaXNpYmxlKG5vZGUpKSB7XG4gICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzbGlkZScpO1xuICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtbGVmdCcsICdzbGlkZS1yaWdodCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9vbmUoc2libGluZ3NbMF0ucXVlcnlTZWxlY3RvcignLnNsaWRlJyksICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgc2libGluZ3MuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZScpKSwgJ3NsaWRlJyk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLl9pc0luQWN0aW9uKG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX3N3aXRjaEhvcml6b250YWxBcnJvdyhub2RlKTtcbiAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yKCcudG9wRWRnZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWNoZXZyb24tdXAnKTtcbiAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yKCcudG9wRWRnZScpLmNsYXNzTGlzdC5hZGQoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9XG4gIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gIGhpZGVTaWJsaW5ncyhub2RlLCBkaXJlY3Rpb24pIHtcbiAgICBsZXQgbm9kZUNvbnRhaW5lciA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZSxcbiAgICAgIHNpYmxpbmdzID0gdGhpcy5fc2libGluZ3Mobm9kZUNvbnRhaW5lcik7XG5cbiAgICBzaWJsaW5ncy5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgIGlmIChzaWIucXVlcnlTZWxlY3RvcignLnNwaW5uZXInKSkge1xuICAgICAgICB0aGlzLmNoYXJ0LmRhdGFzZXQuaW5BamF4ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIWRpcmVjdGlvbiB8fCAoZGlyZWN0aW9uICYmIGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSkge1xuICAgICAgbGV0IHByZVNpYnMgPSB0aGlzLl9wcmV2QWxsKG5vZGVDb250YWluZXIpO1xuXG4gICAgICBwcmVTaWJzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgICBBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzVmlzaWJsZShub2RlKSkge1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzbGlkZScsICdzbGlkZS1yaWdodCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFkaXJlY3Rpb24gfHwgKGRpcmVjdGlvbiAmJiBkaXJlY3Rpb24gIT09ICdsZWZ0JykpIHtcbiAgICAgIGxldCBuZXh0U2licyA9IHRoaXMuX25leHRBbGwobm9kZUNvbnRhaW5lcik7XG5cbiAgICAgIG5leHRTaWJzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgICBBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzVmlzaWJsZShub2RlKSkge1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzbGlkZScsICdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBhbmltYXRlZE5vZGVzID0gW107XG5cbiAgICB0aGlzLl9zaWJsaW5ncyhub2RlQ29udGFpbmVyKS5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGFuaW1hdGVkTm9kZXMsIEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZScpKSk7XG4gICAgfSk7XG4gICAgbGV0IGxpbmVzID0gW107XG5cbiAgICBmb3IgKGxldCBub2RlIG9mIGFuaW1hdGVkTm9kZXMpIHtcbiAgICAgIGxldCB0ZW1wID0gdGhpcy5fY2xvc2VzdChub2RlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKTtcbiAgICAgIH0pLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cbiAgICAgIGxpbmVzLnB1c2godGVtcCk7XG4gICAgICBsaW5lcy5wdXNoKHRlbXAucHJldmlvdXNFbGVtZW50U2libGluZyk7XG4gICAgfVxuICAgIGxpbmVzID0gWy4uLm5ldyBTZXQobGluZXMpXTtcbiAgICBsaW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICBsaW5lLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICB9KTtcblxuICAgIHRoaXMuX29uZShhbmltYXRlZE5vZGVzWzBdLCAndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICBsaW5lLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgIH0pO1xuICAgICAgbGV0IHNpYnMgPSBbXTtcblxuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICBzaWJzID0gdGhpcy5fcHJldkFsbChub2RlQ29udGFpbmVyLCAnOm5vdCguaGlkZGVuKScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNpYnMgPSB0aGlzLl9uZXh0QWxsKG5vZGVDb250YWluZXIsICc6bm90KC5oaWRkZW4pJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNpYnMgPSB0aGlzLl9zaWJsaW5ncyhub2RlQ29udGFpbmVyKTtcbiAgICAgIH1cbiAgICAgIGxldCB0ZW1wID0gQXJyYXkuZnJvbSh0aGlzLl9jbG9zZXN0KG5vZGVDb250YWluZXIsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgICAgfSkucHJldmlvdXNFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiA6bm90KC5oaWRkZW4pJykpO1xuXG4gICAgICBsZXQgc29tZUxpbmVzID0gdGVtcC5zbGljZSgxLCBkaXJlY3Rpb24gPyBzaWJzLmxlbmd0aCAqIDIgKyAxIDogLTEpO1xuXG4gICAgICB0aGlzLl9hZGRDbGFzcyhzb21lTGluZXMsICdoaWRkZW4nKTtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKGFuaW1hdGVkTm9kZXMsICdzbGlkZScpO1xuICAgICAgc2licy5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgICAgQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuc2xpY2UoMSkuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLl9pc1Zpc2libGUobm9kZSkpIHtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtbGVmdCcsICdzbGlkZS1yaWdodCcpO1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzbGlkZS11cCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHNpYnMuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICAgIHRoaXMuX2FkZENsYXNzKEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5lcycpKSwgJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLl9hZGRDbGFzcyhBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZXMnKSksICdoaWRkZW4nKTtcbiAgICAgICAgdGhpcy5fYWRkQ2xhc3MoQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLnZlcnRpY2FsTm9kZXMnKSksICdoaWRkZW4nKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fYWRkQ2xhc3Moc2licywgJ2hpZGRlbicpO1xuXG4gICAgICBpZiAodGhpcy5faXNJbkFjdGlvbihub2RlKSkge1xuICAgICAgICB0aGlzLl9zd2l0Y2hIb3Jpem9udGFsQXJyb3cobm9kZSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gIH1cbiAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgYW5jZXN0b3Igbm9kZSBhbmQgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgaGlkZUFuY2VzdG9yc1NpYmxpbmdzKG5vZGUpIHtcbiAgICBsZXQgdGVtcCA9IEFycmF5LmZyb20odGhpcy5fY2xvc2VzdChub2RlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJyk7XG4gICAgfSkucGFyZW50Tm9kZS5jaGlsZHJlbikuc2xpY2UoMCwgMyk7XG5cbiAgICBpZiAodGVtcFswXS5xdWVyeVNlbGVjdG9yKCcuc3Bpbm5lcicpKSB7XG4gICAgICB0aGlzLmNoYXJ0LmRhdGFzZXQuaW5BamF4ID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXNcbiAgICBpZiAodGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdzaWJsaW5ncycpLnZpc2libGUpIHtcbiAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKG5vZGUpO1xuICAgIH1cbiAgICAvLyBoaWRlIHRoZSBsaW5lc1xuICAgIGxldCBsaW5lcyA9IHRlbXAuc2xpY2UoMSk7XG5cbiAgICB0aGlzLl9jc3MobGluZXMsICd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgIC8vIGhpZGUgdGhlIHN1cGVyaW9yIG5vZGVzIHdpdGggdHJhbnNpdGlvblxuICAgIGxldCBwYXJlbnQgPSB0ZW1wWzBdLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyksXG4gICAgICBncmFuZGZhdGhlclZpc2libGUgPSB0aGlzLl9nZXROb2RlU3RhdGUocGFyZW50LCAncGFyZW50JykudmlzaWJsZTtcblxuICAgIGlmIChwYXJlbnQgJiYgdGhpcy5faXNWaXNpYmxlKHBhcmVudCkpIHtcbiAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCdzbGlkZScsICdzbGlkZS1kb3duJyk7XG4gICAgICB0aGlzLl9vbmUocGFyZW50LCAndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlJyk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUF0dHIobGluZXMsICdzdHlsZScpO1xuICAgICAgICB0aGlzLl9hZGRDbGFzcyh0ZW1wLCAnaGlkZGVuJyk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgLy8gaWYgdGhlIGN1cnJlbnQgbm9kZSBoYXMgdGhlIHBhcmVudCBub2RlLCBoaWRlIGl0IHJlY3Vyc2l2ZWx5XG4gICAgaWYgKHBhcmVudCAmJiBncmFuZGZhdGhlclZpc2libGUpIHtcbiAgICAgIHRoaXMuaGlkZUFuY2VzdG9yc1NpYmxpbmdzKHBhcmVudCk7XG4gICAgfVxuICB9XG4gIC8vIGV4cG9zZWQgbWV0aG9kXG4gIGFkZFBhcmVudChjdXJyZW50Um9vdCwgZGF0YSkge1xuICAgIGxldCB0aGF0ID0gdGhpcztcblxuICAgIHRoaXMuX2J1aWxkUGFyZW50Tm9kZShjdXJyZW50Um9vdCwgZGF0YSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFjdXJyZW50Um9vdC5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAudG9wRWRnZScpKSB7XG4gICAgICAgIGxldCB0b3BFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgIHRvcEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhJyk7XG4gICAgICAgIGN1cnJlbnRSb290LmFwcGVuZENoaWxkKHRvcEVkZ2UpO1xuICAgICAgfVxuICAgICAgdGhhdC5zaG93UGFyZW50KGN1cnJlbnRSb290KTtcbiAgICB9KTtcbiAgfVxuICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgX3N0YXJ0TG9hZGluZyhhcnJvdywgbm9kZSkge1xuICAgIGxldCBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuXG4gICAgaWYgKHR5cGVvZiBjaGFydC5kYXRhc2V0LmluQWpheCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2hhcnQuZGF0YXNldC5pbkFqYXggPT09ICd0cnVlJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGFycm93LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIGxldCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgc3Bpbm5lci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2ZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lcicpO1xuICAgIG5vZGUuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgdGhpcy5fYWRkQ2xhc3MoQXJyYXkuZnJvbShub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+ICo6bm90KC5zcGlubmVyKScpKSwgJ2hhenknKTtcbiAgICBjaGFydC5kYXRhc2V0LmluQWpheCA9IHRydWU7XG5cbiAgICBsZXQgZXhwb3J0QnRuID0gdGhpcy5jaGFydENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcub2MtZXhwb3J0LWJ0bicgK1xuICAgICAgKG9wdHMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyBvcHRzLmNoYXJ0Q2xhc3MgOiAnJykpO1xuXG4gICAgaWYgKGV4cG9ydEJ0bikge1xuICAgICAgZXhwb3J0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gdGVybWluYXRlIGxvYWRpbmcgc3RhdHVzIGZvciByZXF1ZXN0aW5nIG5ldyBub2Rlc1xuICBfZW5kTG9hZGluZyhhcnJvdywgbm9kZSkge1xuICAgIGxldCBvcHRzID0gdGhpcy5vcHRpb25zO1xuXG4gICAgYXJyb3cuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgbm9kZS5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAuc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgIHRoaXMuX3JlbW92ZUNsYXNzKEFycmF5LmZyb20obm9kZS5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAuaGF6eScpKSwgJ2hhenknKTtcbiAgICB0aGlzLmNoYXJ0LmRhdGFzZXQuaW5BamF4ID0gZmFsc2U7XG4gICAgbGV0IGV4cG9ydEJ0biA9IHRoaXMuY2hhcnRDb250YWluZXIucXVlcnlTZWxlY3RvcignLm9jLWV4cG9ydC1idG4nICtcbiAgICAgIChvcHRzLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgb3B0cy5jaGFydENsYXNzIDogJycpKTtcblxuICAgIGlmIChleHBvcnRCdG4pIHtcbiAgICAgIGV4cG9ydEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICAvLyBkZWZpbmUgY2xpY2sgZXZlbnQgaGFuZGxlciBmb3IgdGhlIHRvcCBlZGdlXG4gIF9jbGlja1RvcEVkZ2UoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICB0b3BFZGdlID0gZXZlbnQudGFyZ2V0LFxuICAgICAgbm9kZSA9IHRvcEVkZ2UucGFyZW50Tm9kZSxcbiAgICAgIHBhcmVudFN0YXRlID0gdGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdwYXJlbnQnKSxcbiAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBpZiAocGFyZW50U3RhdGUuZXhpc3QpIHtcbiAgICAgIGxldCB0ZW1wID0gdGhpcy5fY2xvc2VzdChub2RlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKTtcbiAgICAgIH0pO1xuICAgICAgbGV0IHBhcmVudCA9IHRlbXAucGFyZW50Tm9kZS5maXJzdENoaWxkLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyk7XG5cbiAgICAgIGlmIChwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZScpKSB7IHJldHVybjsgfVxuICAgICAgLy8gaGlkZSB0aGUgYW5jZXN0b3Igbm9kZXMgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgICBpZiAocGFyZW50U3RhdGUudmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGVBbmNlc3RvcnNTaWJsaW5ncyhub2RlKTtcbiAgICAgICAgdGhpcy5fb25lKHBhcmVudCwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzSW5BY3Rpb24obm9kZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3N3aXRjaFZlcnRpY2FsQXJyb3codG9wRWRnZSk7XG4gICAgICAgICAgICB0aGlzLl9zd2l0Y2hIb3Jpem9udGFsQXJyb3cobm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0gZWxzZSB7IC8vIHNob3cgdGhlIGFuY2VzdG9ycyBhbmQgc2libGluZ3NcbiAgICAgICAgdGhpcy5zaG93UGFyZW50KG5vZGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBsb2FkIHRoZSBuZXcgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgbGV0IG5vZGVJZCA9IHRvcEVkZ2UucGFyZW50Tm9kZS5pZDtcblxuICAgICAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXNcbiAgICAgIGlmICh0aGlzLl9zdGFydExvYWRpbmcodG9wRWRnZSwgbm9kZSkpIHtcbiAgICAgICAgLy8gbG9hZCBuZXcgbm9kZXNcbiAgICAgICAgdGhpcy5fZ2V0SlNPTih0eXBlb2Ygb3B0cy5hamF4VVJMLnBhcmVudCA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgb3B0cy5hamF4VVJMLnBhcmVudChub2RlLmRhdGFzZXQuc291cmNlKSA6IG9wdHMuYWpheFVSTC5wYXJlbnQgKyBub2RlSWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgICAgaWYgKHRoYXQuY2hhcnQuZGF0YXNldC5pbkFqYXggPT09ICd0cnVlJykge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3ApLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aGF0LmFkZFBhcmVudChub2RlLCByZXNwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBwYXJlbnQgbm9kZSBkYXRhLicsIGVycik7XG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGF0Ll9lbmRMb2FkaW5nKHRvcEVkZ2UsIG5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgaGlkZURlc2NlbmRhbnRzKG5vZGUpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICB0ZW1wID0gdGhpcy5fbmV4dEFsbChub2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSksXG4gICAgICBsaW5lcyA9IFtdO1xuXG4gICAgaWYgKHRlbXBbMl0ucXVlcnlTZWxlY3RvcignLnNwaW5uZXInKSkge1xuICAgICAgdGhpcy5jaGFydC5kYXRhc2V0LmluQWpheCA9IGZhbHNlO1xuICAgIH1cbiAgICBsZXQgZGVzY2VuZGFudHMgPSBBcnJheS5mcm9tKHRlbXBbMl0ucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZmlsdGVyKChlbCkgPT4gdGhhdC5faXNWaXNpYmxlKGVsKSksXG4gICAgICBpc1ZlcnRpY2FsRGVzYyA9IHRlbXBbMl0uY2xhc3NMaXN0LmNvbnRhaW5zKCd2ZXJ0aWNhbE5vZGVzJyk7XG5cbiAgICBpZiAoIWlzVmVydGljYWxEZXNjKSB7XG4gICAgICBkZXNjZW5kYW50cy5mb3JFYWNoKChkZXNjKSA9PiB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGxpbmVzLFxuICAgICAgICAgIHRoYXQuX3ByZXZBbGwodGhhdC5fY2xvc2VzdChkZXNjLCAoZWwpID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKSksICcubGluZXMnKSk7XG4gICAgICB9KTtcbiAgICAgIGxpbmVzID0gWy4uLm5ldyBTZXQobGluZXMpXTtcbiAgICAgIHRoaXMuX2NzcyhsaW5lcywgJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgfVxuICAgIHRoaXMuX29uZShkZXNjZW5kYW50c1swXSwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKGRlc2NlbmRhbnRzLCAnc2xpZGUnKTtcbiAgICAgIGlmIChpc1ZlcnRpY2FsRGVzYykge1xuICAgICAgICB0aGF0Ll9hZGRDbGFzcyh0ZW1wLCAnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5lcy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICBlbC5wYXJlbnROb2RlLmxhc3RDaGlsZC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2FkZENsYXNzKEFycmF5LmZyb20odGVtcFsyXS5xdWVyeVNlbGVjdG9yQWxsKCcudmVydGljYWxOb2RlcycpKSwgJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2lzSW5BY3Rpb24obm9kZSkpIHtcbiAgICAgICAgdGhpcy5fc3dpdGNoVmVydGljYWxBcnJvdyhub2RlLnF1ZXJ5U2VsZWN0b3IoJy5ib3R0b21FZGdlJykpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICAgIHRoaXMuX2FkZENsYXNzKGRlc2NlbmRhbnRzLCAnc2xpZGUgc2xpZGUtdXAnKTtcbiAgfVxuICAvLyBzaG93IHRoZSBjaGlsZHJlbiBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgc2hvd0Rlc2NlbmRhbnRzKG5vZGUpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICB0ZW1wID0gdGhpcy5fbmV4dEFsbChub2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSksXG4gICAgICBkZXNjZW5kYW50cyA9IFtdO1xuXG4gICAgdGhpcy5fcmVtb3ZlQ2xhc3ModGVtcCwgJ2hpZGRlbicpO1xuICAgIGlmICh0ZW1wLnNvbWUoKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3ZlcnRpY2FsTm9kZXMnKSkpIHtcbiAgICAgIHRlbXAuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZGVzY2VuZGFudHMsIEFycmF5LmZyb20oZWwucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZmlsdGVyKChlbCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGF0Ll9pc1Zpc2libGUoZWwpO1xuICAgICAgICB9KSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgQXJyYXkuZnJvbSh0ZW1wWzJdLmNoaWxkcmVuKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShkZXNjZW5kYW50cyxcbiAgICAgICAgICBBcnJheS5mcm9tKGVsLnF1ZXJ5U2VsZWN0b3IoJ3RyJykucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZmlsdGVyKChlbCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQuX2lzVmlzaWJsZShlbCk7XG4gICAgICAgICAgfSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIHRoZSB0d28gZm9sbG93aW5nIHN0YXRlbWVudHMgYXJlIHVzZWQgdG8gZW5mb3JjZSBicm93c2VyIHRvIHJlcGFpbnRcbiAgICB0aGlzLl9yZXBhaW50KGRlc2NlbmRhbnRzWzBdKTtcbiAgICB0aGlzLl9vbmUoZGVzY2VuZGFudHNbMF0sICd0cmFuc2l0aW9uZW5kJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyhkZXNjZW5kYW50cywgJ3NsaWRlJyk7XG4gICAgICBpZiAodGhpcy5faXNJbkFjdGlvbihub2RlKSkge1xuICAgICAgICB0aGlzLl9zd2l0Y2hWZXJ0aWNhbEFycm93KG5vZGUucXVlcnlTZWxlY3RvcignLmJvdHRvbUVkZ2UnKSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gICAgdGhpcy5fYWRkQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZScpO1xuICAgIHRoaXMuX3JlbW92ZUNsYXNzKGRlc2NlbmRhbnRzLCAnc2xpZGUtdXAnKTtcbiAgfVxuICAvLyBidWlsZCB0aGUgY2hpbGQgbm9kZXMgb2Ygc3BlY2lmaWMgbm9kZVxuICBfYnVpbGRDaGlsZE5vZGUoYXBwZW5kVG8sIG5vZGVEYXRhLCBjYWxsYmFjaykge1xuICAgIGxldCBkYXRhID0gbm9kZURhdGEuY2hpbGRyZW4gfHwgbm9kZURhdGEuc2libGluZ3M7XG5cbiAgICBhcHBlbmRUby5xdWVyeVNlbGVjdG9yKCd0ZCcpLnNldEF0dHJpYnV0ZSgnY29sU3BhbicsIGRhdGEubGVuZ3RoICogMik7XG4gICAgdGhpcy5idWlsZEhpZXJhcmNoeShhcHBlbmRUbywgeyAnY2hpbGRyZW4nOiBkYXRhIH0sIDAsIGNhbGxiYWNrKTtcbiAgfVxuICAvLyBleHBvc2VkIG1ldGhvZFxuICBhZGRDaGlsZHJlbihub2RlLCBkYXRhKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGNvdW50ID0gMDtcblxuICAgIHRoaXMuY2hhcnQuZGF0YXNldC5pbkVkaXQgPSAnYWRkQ2hpbGRyZW4nO1xuICAgIHRoaXMuX2J1aWxkQ2hpbGROb2RlLmNhbGwodGhpcywgdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKSwgZGF0YSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCsrY291bnQgPT09IGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yKCcuYm90dG9tRWRnZScpKSB7XG4gICAgICAgICAgbGV0IGJvdHRvbUVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgICBib3R0b21FZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYScpO1xuICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoYm90dG9tRWRnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3IoJy5zeW1ib2wnKSkge1xuICAgICAgICAgIGxldCBzeW1ib2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgICBzeW1ib2wuc2V0QXR0cmlidXRlKCdjbGFzcycsICdmYSAnICsgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2wnKTtcbiAgICAgICAgICBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC50aXRsZScpLmFwcGVuZENoaWxkKHN5bWJvbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5zaG93RGVzY2VuZGFudHMobm9kZSk7XG4gICAgICAgIHRoYXQuY2hhcnQuZGF0YXNldC5pbkVkaXQgPSAnJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvLyBiaW5kIGNsaWNrIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBib3R0b20gZWRnZVxuICBfY2xpY2tCb3R0b21FZGdlKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGJvdHRvbUVkZ2UgPSBldmVudC50YXJnZXQsXG4gICAgICBub2RlID0gYm90dG9tRWRnZS5wYXJlbnROb2RlLFxuICAgICAgY2hpbGRyZW5TdGF0ZSA9IHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAnY2hpbGRyZW4nKTtcblxuICAgIGlmIChjaGlsZHJlblN0YXRlLmV4aXN0KSB7XG4gICAgICBsZXQgdGVtcCA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RSJztcbiAgICAgIH0pLnBhcmVudE5vZGUuY2hpbGRyZW5bM107XG5cbiAgICAgIGlmIChBcnJheS5mcm9tKHRlbXAucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuc29tZSgobm9kZSkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNWaXNpYmxlKG5vZGUpICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZScpO1xuICAgICAgfSkpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgaWYgKGNoaWxkcmVuU3RhdGUudmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGVEZXNjZW5kYW50cyhub2RlKTtcbiAgICAgIH0gZWxzZSB7IC8vIHNob3cgdGhlIGRlc2NlbmRhbnRzXG4gICAgICAgIHRoaXMuc2hvd0Rlc2NlbmRhbnRzKG5vZGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7IC8vIGxvYWQgdGhlIG5ldyBjaGlsZHJlbiBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICBsZXQgbm9kZUlkID0gYm90dG9tRWRnZS5wYXJlbnROb2RlLmlkO1xuXG4gICAgICBpZiAodGhpcy5fc3RhcnRMb2FkaW5nKGJvdHRvbUVkZ2UsIG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX2dldEpTT04odHlwZW9mIG9wdHMuYWpheFVSTC5jaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgb3B0cy5hamF4VVJMLmNoaWxkcmVuKG5vZGUuZGF0YXNldC5zb3VyY2UpIDogb3B0cy5hamF4VVJMLmNoaWxkcmVuICsgbm9kZUlkKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgIGlmICh0aGF0LmNoYXJ0LmRhdGFzZXQuaW5BamF4ID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGlmIChyZXNwLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aGF0LmFkZENoaWxkcmVuKG5vZGUsIHJlc3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGNoaWxkcmVuIG5vZGVzIGRhdGEnLCBlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhhdC5fZW5kTG9hZGluZyhib3R0b21FZGdlLCBub2RlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIHN1YnNlcXVlbnQgcHJvY2Vzc2luZyBvZiBidWlsZCBzaWJsaW5nIG5vZGVzXG4gIF9jb21wbGVtZW50TGluZShvbmVTaWJsaW5nLCBzaWJsaW5nQ291bnQsIGV4aXN0aW5nU2libGlnQ291bnQpIHtcbiAgICBsZXQgdGVtcCA9IG9uZVNpYmxpbmcucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuO1xuXG4gICAgdGVtcFswXS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBzaWJsaW5nQ291bnQgKiAyKTtcbiAgICB0ZW1wWzFdLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIHNpYmxpbmdDb3VudCAqIDIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXhpc3RpbmdTaWJsaWdDb3VudDsgaSsrKSB7XG4gICAgICBsZXQgcmlnaHRMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKSxcbiAgICAgICAgbGVmdExpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuXG4gICAgICByaWdodExpbmUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdyaWdodExpbmUgdG9wTGluZScpO1xuICAgICAgcmlnaHRMaW5lLmlubmVySFRNTCA9ICcmbmJzcDsnO1xuICAgICAgdGVtcFsyXS5pbnNlcnRCZWZvcmUocmlnaHRMaW5lLCB0ZW1wWzJdLmNoaWxkcmVuWzFdKTtcbiAgICAgIGxlZnRMaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGVmdExpbmUgdG9wTGluZScpO1xuICAgICAgbGVmdExpbmUuaW5uZXJIVE1MID0gJyZuYnNwOyc7XG4gICAgICB0ZW1wWzJdLmluc2VydEJlZm9yZShsZWZ0TGluZSwgdGVtcFsyXS5jaGlsZHJlblsxXSk7XG4gICAgfVxuICB9XG4gIC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcbiAgX2J1aWxkU2libGluZ05vZGUobm9kZUNoYXJ0LCBub2RlRGF0YSwgY2FsbGJhY2spIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICBuZXdTaWJsaW5nQ291bnQgPSBub2RlRGF0YS5zaWJsaW5ncyA/IG5vZGVEYXRhLnNpYmxpbmdzLmxlbmd0aCA6IG5vZGVEYXRhLmNoaWxkcmVuLmxlbmd0aCxcbiAgICAgIGV4aXN0aW5nU2libGlnQ291bnQgPSBub2RlQ2hhcnQucGFyZW50Tm9kZS5ub2RlTmFtZSA9PT0gJ1REJyA/IHRoaXMuX2Nsb3Nlc3Qobm9kZUNoYXJ0LCAoZWwpID0+IHtcbiAgICAgICAgcmV0dXJuIGVsLm5vZGVOYW1lID09PSAnVFInO1xuICAgICAgfSkuY2hpbGRyZW4ubGVuZ3RoIDogMSxcbiAgICAgIHNpYmxpbmdDb3VudCA9IGV4aXN0aW5nU2libGlnQ291bnQgKyBuZXdTaWJsaW5nQ291bnQsXG4gICAgICBpbnNlcnRQb3N0aW9uID0gKHNpYmxpbmdDb3VudCA+IDEpID8gTWF0aC5mbG9vcihzaWJsaW5nQ291bnQgLyAyIC0gMSkgOiAwO1xuXG4gICAgLy8ganVzdCBidWlsZCB0aGUgc2libGluZyBub2RlcyBmb3IgdGhlIHNwZWNpZmljIG5vZGVcbiAgICBpZiAobm9kZUNoYXJ0LnBhcmVudE5vZGUubm9kZU5hbWUgPT09ICdURCcpIHtcbiAgICAgIGxldCB0ZW1wID0gdGhpcy5fcHJldkFsbChub2RlQ2hhcnQucGFyZW50Tm9kZS5wYXJlbnROb2RlKTtcblxuICAgICAgdGVtcFswXS5yZW1vdmUoKTtcbiAgICAgIHRlbXBbMV0ucmVtb3ZlKCk7XG4gICAgICBsZXQgY2hpbGRDb3VudCA9IDA7XG5cbiAgICAgIHRoYXQuX2J1aWxkQ2hpbGROb2RlLmNhbGwodGhhdCwgdGhhdC5fY2xvc2VzdChub2RlQ2hhcnQucGFyZW50Tm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJyksXG4gICAgICAgIG5vZGVEYXRhLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKCsrY2hpbGRDb3VudCA9PT0gbmV3U2libGluZ0NvdW50KSB7XG4gICAgICAgICAgICBsZXQgc2libGluZ1RkcyA9IEFycmF5LmZyb20odGhhdC5fY2xvc2VzdChub2RlQ2hhcnQucGFyZW50Tm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJylcbiAgICAgICAgICAgICAgLmxhc3RDaGlsZC5jaGlsZHJlbik7XG5cbiAgICAgICAgICAgIGlmIChleGlzdGluZ1NpYmxpZ0NvdW50ID4gMSkge1xuICAgICAgICAgICAgICBBcnJheS5mcm9tKG5vZGVDaGFydC5wYXJlbnROb2RlLmNoaWxkcmVuKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHNpYmxpbmdUZHNbMF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHNpYmxpbmdUZHNbMF0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgbm9kZUNoYXJ0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgdGhhdC5fY29tcGxlbWVudExpbmUoc2libGluZ1Rkc1swXSwgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KTtcbiAgICAgICAgICAgICAgdGhhdC5fYWRkQ2xhc3Moc2libGluZ1RkcywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgICBzaWJsaW5nVGRzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhhdC5fYWRkQ2xhc3MoZWwucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSwgJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBsZXQgdGVtcCA9IG5vZGVDaGFydC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG5cbiAgICAgICAgICAgICAgc2libGluZ1Rkc1tpbnNlcnRQb3N0aW9uXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlQ2hhcnQucGFyZW50Tm9kZSwgc2libGluZ1Rkc1tpbnNlcnRQb3N0aW9uICsgMV0pO1xuICAgICAgICAgICAgICB0ZW1wLnJlbW92ZSgpO1xuICAgICAgICAgICAgICB0aGF0Ll9jb21wbGVtZW50TGluZShzaWJsaW5nVGRzW2luc2VydFBvc3Rpb25dLCBzaWJsaW5nQ291bnQsIDEpO1xuICAgICAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyhzaWJsaW5nVGRzLCAnaGlkZGVuJyk7XG4gICAgICAgICAgICAgIHRoYXQuX2FkZENsYXNzKHRoYXQuX2dldERlc2NFbGVtZW50cyhzaWJsaW5nVGRzLnNsaWNlKDAsIGluc2VydFBvc3Rpb24gKyAxKSwgJy5ub2RlJyksICdzbGlkZS1yaWdodCcpO1xuICAgICAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyh0aGF0Ll9nZXREZXNjRWxlbWVudHMoc2libGluZ1Rkcy5zbGljZShpbnNlcnRQb3N0aW9uICsgMSksICcubm9kZScpLCAnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7IC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIGFuZCBwYXJlbnQgbm9kZSBmb3IgdGhlIHNwZWNpZmljIG5kb2VcbiAgICAgIGxldCBub2RlQ291bnQgPSAwO1xuXG4gICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5LmNhbGwodGhhdCwgdGhhdC5jaGFydCwgbm9kZURhdGEsIDAsICgpID0+IHtcbiAgICAgICAgaWYgKCsrbm9kZUNvdW50ID09PSBzaWJsaW5nQ291bnQpIHtcbiAgICAgICAgICBsZXQgdGVtcCA9IG5vZGVDaGFydC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bM11cbiAgICAgICAgICAgIC5jaGlsZHJlbltpbnNlcnRQb3N0aW9uXSxcbiAgICAgICAgICAgIHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcblxuICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIDIpO1xuICAgICAgICAgIHRkLmFwcGVuZENoaWxkKG5vZGVDaGFydCk7XG4gICAgICAgICAgdGVtcC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ZCwgdGVtcC5uZXh0RWxlbWVudFNpYmxpbmcpO1xuICAgICAgICAgIHRoYXQuX2NvbXBsZW1lbnRMaW5lKHRlbXAsIHNpYmxpbmdDb3VudCwgMSk7XG5cbiAgICAgICAgICBsZXQgdGVtcDIgPSB0aGF0Ll9jbG9zZXN0KG5vZGVDaGFydCwgKGVsKSA9PiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKVxuICAgICAgICAgICAgLnBhcmVudE5vZGUuY2hpbGRyZW5bMF07XG5cbiAgICAgICAgICB0ZW1wMi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyhBcnJheS5mcm9tKHRlbXAyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLCAnc2xpZGUtZG93bicpO1xuXG4gICAgICAgICAgbGV0IHRlbXAzID0gdGhpcy5fc2libGluZ3Mobm9kZUNoYXJ0LnBhcmVudE5vZGUpO1xuXG4gICAgICAgICAgdGhhdC5fYWRkQ2xhc3ModGVtcDMsICdoaWRkZW4nKTtcbiAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyh0aGF0Ll9nZXREZXNjRWxlbWVudHModGVtcDMuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbiksICcubm9kZScpLCAnc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyh0aGF0Ll9nZXREZXNjRWxlbWVudHModGVtcDMuc2xpY2UoaW5zZXJ0UG9zdGlvbiksICcubm9kZScpLCAnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBhZGRTaWJsaW5ncyhub2RlLCBkYXRhKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzO1xuXG4gICAgdGhpcy5jaGFydC5kYXRhc2V0LmluRWRpdCA9ICdhZGRTaWJsaW5ncyc7XG4gICAgdGhpcy5fYnVpbGRTaWJsaW5nTm9kZS5jYWxsKHRoaXMsIHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJyksIGRhdGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoYXQuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKVxuICAgICAgICAuZGF0YXNldC5zaWJsaW5nc0xvYWRlZCA9IHRydWU7XG4gICAgICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvcignLmxlZnRFZGdlJykpIHtcbiAgICAgICAgbGV0IHJpZ2h0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICBsZWZ0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICByaWdodEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYScpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHJpZ2h0RWRnZSk7XG4gICAgICAgIGxlZnRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYScpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGxlZnRFZGdlKTtcbiAgICAgIH1cbiAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKG5vZGUpO1xuICAgICAgdGhhdC5jaGFydC5kYXRhc2V0LmluRWRpdCA9ICcnO1xuICAgIH0pO1xuICB9XG4gIC8vIGJpbmQgY2xpY2sgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGxlZnQgYW5kIHJpZ2h0IGVkZ2VzXG4gIF9jbGlja0hvcml6b250YWxFZGdlKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGhFZGdlID0gZXZlbnQudGFyZ2V0LFxuICAgICAgbm9kZSA9IGhFZGdlLnBhcmVudE5vZGUsXG4gICAgICBzaWJsaW5nc1N0YXRlID0gdGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdzaWJsaW5ncycpO1xuXG4gICAgaWYgKHNpYmxpbmdzU3RhdGUuZXhpc3QpIHtcbiAgICAgIGxldCB0ZW1wID0gdGhpcy5fY2xvc2VzdChub2RlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICdUQUJMRSc7XG4gICAgICAgIH0pLnBhcmVudE5vZGUsXG4gICAgICAgIHNpYmxpbmdzID0gdGhpcy5fc2libGluZ3ModGVtcCk7XG5cbiAgICAgIGlmIChzaWJsaW5ncy5zb21lKChlbCkgPT4ge1xuICAgICAgICBsZXQgbm9kZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVmlzaWJsZShub2RlKSAmJiBub2RlLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGUnKTtcbiAgICAgIH0pKSB7IHJldHVybjsgfVxuICAgICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwKSB7XG4gICAgICAgIGxldCBwcmV2U2liID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcsXG4gICAgICAgICAgbmV4dFNpYiA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgaWYgKGhFZGdlLmNsYXNzTGlzdC5jb250YWlucygnbGVmdEVkZ2UnKSkge1xuICAgICAgICAgIGlmIChwcmV2U2liLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKG5vZGUsICdsZWZ0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKG5vZGUsICdsZWZ0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChuZXh0U2liLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKG5vZGUsICdyaWdodCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncyhub2RlLCAncmlnaHQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzaWJsaW5nc1N0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncyhub2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNob3dTaWJsaW5ncyhub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBsb2FkIHRoZSBuZXcgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICBsZXQgbm9kZUlkID0gaEVkZ2UucGFyZW50Tm9kZS5pZCxcbiAgICAgICAgdXJsID0gKHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAncGFyZW50JykuZXhpc3QpID9cbiAgICAgICAgICAodHlwZW9mIG9wdHMuYWpheFVSTC5zaWJsaW5ncyA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICBvcHRzLmFqYXhVUkwuc2libGluZ3MoSlNPTi5wYXJzZShub2RlLmRhdGFzZXQuc291cmNlKSkgOiBvcHRzLmFqYXhVUkwuc2libGluZ3MgKyBub2RlSWQpIDpcbiAgICAgICAgICAodHlwZW9mIG9wdHMuYWpheFVSTC5mYW1pbGllcyA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICBvcHRzLmFqYXhVUkwuZmFtaWxpZXMoSlNPTi5wYXJzZShub2RlLmRhdGFzZXQuc291cmNlKSkgOiBvcHRzLmFqYXhVUkwuZmFtaWxpZXMgKyBub2RlSWQpO1xuXG4gICAgICBpZiAodGhpcy5fc3RhcnRMb2FkaW5nKGhFZGdlLCBub2RlKSkge1xuICAgICAgICB0aGlzLl9nZXRKU09OKHVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICBpZiAodGhhdC5jaGFydC5kYXRhc2V0LmluQWpheCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBpZiAocmVzcC5zaWJsaW5ncyB8fCByZXNwLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgIHRoYXQuYWRkU2libGluZ3Mobm9kZSwgcmVzcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgc2libGluZyBub2RlcyBkYXRhJywgZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoYXQuX2VuZExvYWRpbmcoaEVkZ2UsIG5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gZXZlbnQgaGFuZGxlciBmb3IgdG9nZ2xlIGJ1dHRvbnMgaW4gSHlicmlkKGhvcml6b250YWwgKyB2ZXJ0aWNhbCkgT3JnQ2hhcnRcbiAgX2NsaWNrVG9nZ2xlQnV0dG9uKGV2ZW50KSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgdG9nZ2xlQnRuID0gZXZlbnQudGFyZ2V0LFxuICAgICAgZGVzY1dyYXBwZXIgPSB0b2dnbGVCdG4ucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcsXG4gICAgICBkZXNjZW5kYW50cyA9IGRlc2NXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJyksXG4gICAgICBjaGlsZHJlbiA9IGRlc2NXcmFwcGVyLmNoaWxkcmVuLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS5xdWVyeVNlbGVjdG9yKCcubm9kZScpO1xuICAgICAgfSk7XG5cbiAgICBpZiAoY2hpbGRyZW4uc29tZSgoaXRlbSkgPT4gaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJy5zbGlkZScpKSkgeyByZXR1cm47IH1cbiAgICB0b2dnbGVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnZmEtcGx1cy1zcXVhcmUnKTtcbiAgICB0b2dnbGVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnZmEtbWludXMtc3F1YXJlJyk7XG4gICAgaWYgKGRlc2NlbmRhbnRzWzBdLmNsYXNzTGlzdC5jb250YWlucygnLnNsaWRlLXVwJykpIHtcbiAgICAgIGRlc2NXcmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgdGhpcy5fcmVwYWludChjaGlsZHJlblswXSk7XG4gICAgICB0aGlzLl9hZGRDbGFzcyhjaGlsZHJlbiwgJ3NsaWRlJyk7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyhjaGlsZHJlbiwgJ3NsaWRlLXVwJyk7XG4gICAgICBjaGlsZHJlblswXS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0Ll9yZW1vdmVDbGFzcyhjaGlsZHJlbiwgJ3NsaWRlJyk7XG4gICAgICB9LCB7ICdvbmNlJzogdHJ1ZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYWRkQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZSBzbGlkZS11cCcpO1xuICAgICAgZGVzY2VuZGFudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhhdC5fcmVtb3ZlQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZScpO1xuICAgICAgICBsZXQgdWwgPSB0aGlzLl9jbG9zZXN0KGRlc2NlbmRhbnRzWzBdLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICd1bCc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgfSwgeyAnb25jZSc6IHRydWUgfSk7XG4gICAgICBsZXQgc3ViVG9nZ2xlQnRuID0gZGVzY2VuZGFudHNbMF0ucXVlcnlTZWxlY3RvcignLnRvZ2dsZUJ0bicpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLW1pbnVzLXNxdWFyZScpO1xuXG4gICAgICBzdWJUb2dnbGVCdG4uY2xhc3NMaXN0LmFkZCgnZmEtcGx1cy1zcXVhcmUnKTtcbiAgICB9XG4gIH1cbiAgX2Rpc3BhdGNoQ2xpY2tFdmVudChldmVudCkge1xuICAgIGxldCBjbGFzc0xpc3QgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0O1xuXG4gICAgaWYgKGNsYXNzTGlzdC5jb250YWlucygndG9wRWRnZScpKSB7XG4gICAgICB0aGlzLl9jbGlja1RvcEVkZ2UoZXZlbnQpO1xuICAgIH0gZWxzZSBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKCdyaWdodEVkZ2UnKSB8fCBjbGFzc0xpc3QuY29udGFpbnMoJ2xlZnRFZGdlJykpIHtcbiAgICAgIHRoaXMuX2NsaWNrSG9yaXpvbnRhbEVkZ2UoZXZlbnQpO1xuICAgIH0gZWxzZSBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKCdib3R0b21FZGdlJykpIHtcbiAgICAgIHRoaXMuX2NsaWNrQm90dG9tRWRnZShldmVudCk7XG4gICAgfSBlbHNlIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ3RvZ2dsZUJ0bicpKSB7XG4gICAgICB0aGlzLl9jbGlja1RvZ2dsZUJ1dHRvbihldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NsaWNrTm9kZShldmVudCk7XG4gICAgfVxuICB9XG4gIF9vbkRyYWdTdGFydChldmVudCkge1xuICAgIGxldCBub2RlRGl2ID0gZXZlbnQudGFyZ2V0LFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGlzRmlyZWZveCA9IC9maXJlZm94Ly50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgaWYgKGlzRmlyZWZveCkge1xuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvaHRtbCcsICdoYWNrIGZvciBmaXJlZm94Jyk7XG4gICAgfVxuICAgIC8vIGlmIHVzZXJzIGVuYWJsZSB6b29tIG9yIGRpcmVjdGlvbiBvcHRpb25zXG4gICAgaWYgKHRoaXMuY2hhcnQuc3R5bGUudHJhbnNmb3JtKSB7XG4gICAgICBsZXQgZ2hvc3ROb2RlLCBub2RlQ292ZXI7XG5cbiAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdob3N0LW5vZGUnKSkge1xuICAgICAgICBnaG9zdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuICAgICAgICBnaG9zdE5vZGUuY2xhc3NMaXN0LmFkZCgnZ2hvc3Qtbm9kZScpO1xuICAgICAgICBub2RlQ292ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3JlY3QnKTtcbiAgICAgICAgZ2hvc3ROb2RlLmFwcGVuZENoaWxkKG5vZGVDb3Zlcik7XG4gICAgICAgIHRoaXMuY2hhcnQuYXBwZW5kQ2hpbGQoZ2hvc3ROb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdob3N0Tm9kZSA9IHRoaXMuY2hhcnQucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLmdob3N0LW5vZGUnKTtcbiAgICAgICAgbm9kZUNvdmVyID0gZ2hvc3ROb2RlLmNoaWxkcmVuWzBdO1xuICAgICAgfVxuICAgICAgbGV0IHRyYW5zVmFsdWVzID0gdGhpcy5jaGFydC5zdHlsZS50cmFuc2Zvcm0uc3BsaXQoJywnKSxcbiAgICAgICAgc2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdCgob3B0cy5kaXJlY3Rpb24gPT09ICd0MmInIHx8IG9wdHMuZGlyZWN0aW9uID09PSAnYjJ0JykgP1xuICAgICAgICAgIHRyYW5zVmFsdWVzWzBdLnNsaWNlKHRyYW5zVmFsdWVzWzBdLmluZGV4T2YoJygnKSArIDEpIDogdHJhbnNWYWx1ZXNbMV0pKTtcblxuICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBub2RlRGl2Lm9mZnNldFdpZHRoKTtcbiAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIG5vZGVEaXYub2Zmc2V0SGVpZ2h0KTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3gnLCA1ICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgneScsIDUgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd3aWR0aCcsIDEyMCAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIDQwICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgncngnLCA0ICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgncnknLCA0ICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgMSAqIHNjYWxlKTtcbiAgICAgIGxldCB4T2Zmc2V0ID0gZXZlbnQub2Zmc2V0WCAqIHNjYWxlLFxuICAgICAgICB5T2Zmc2V0ID0gZXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuXG4gICAgICBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdsMnInKSB7XG4gICAgICAgIHhPZmZzZXQgPSBldmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgIHlPZmZzZXQgPSBldmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICB9IGVsc2UgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAncjJsJykge1xuICAgICAgICB4T2Zmc2V0ID0gbm9kZURpdi5vZmZzZXRXaWR0aCAtIGV2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgeU9mZnNldCA9IGV2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSB7XG4gICAgICAgIHhPZmZzZXQgPSBub2RlRGl2Lm9mZnNldFdpZHRoIC0gZXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgICB5T2Zmc2V0ID0gbm9kZURpdi5vZmZzZXRIZWlnaHQgLSBldmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICB9XG4gICAgICBpZiAoaXNGaXJlZm94KSB7IC8vIGhhY2sgZm9yIG9sZCB2ZXJzaW9uIG9mIEZpcmVmb3goPCA0OC4wKVxuICAgICAgICBsZXQgZ2hvc3ROb2RlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4gICAgICAgIGdob3N0Tm9kZVdyYXBwZXIuc3JjID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCcgKyAobmV3IFhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoZ2hvc3ROb2RlKTtcbiAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGVXcmFwcGVyLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdyZ2IoMjU1LCAyNTUsIDI1NSknKTtcbiAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ3JnYigxOTEsIDAsIDApJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGdob3N0Tm9kZSwgeE9mZnNldCwgeU9mZnNldCk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBkcmFnZ2VkID0gZXZlbnQudGFyZ2V0LFxuICAgICAgZHJhZ1pvbmUgPSB0aGlzLl9jbG9zZXN0KGRyYWdnZWQsIChlbCkgPT4ge1xuICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0ICYmIGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKTtcbiAgICAgIH0pLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0ucXVlcnlTZWxlY3RvcignLm5vZGUnKSxcbiAgICAgIGRyYWdIaWVyID0gQXJyYXkuZnJvbSh0aGlzLl9jbG9zZXN0KGRyYWdnZWQsIChlbCkgPT4ge1xuICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICdUQUJMRSc7XG4gICAgICB9KS5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKTtcblxuICAgIHRoaXMuZHJhZ2dlZCA9IGRyYWdnZWQ7XG4gICAgQXJyYXkuZnJvbSh0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmICghZHJhZ0hpZXIuaW5jbHVkZXMobm9kZSkpIHtcbiAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKSB7XG4gICAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKGRyYWdnZWQsIGRyYWdab25lLCBub2RlKSkge1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBfb25EcmFnT3ZlcihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGRyb3Bab25lID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgIGlmICghZHJvcFpvbmUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbGxvd2VkRHJvcCcpKSB7XG4gICAgICBldmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdub25lJztcbiAgICB9XG4gIH1cbiAgX29uRHJhZ0VuZChldmVudCkge1xuICAgIEFycmF5LmZyb20odGhpcy5jaGFydC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsb3dlZERyb3AnKSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FsbG93ZWREcm9wJyk7XG4gICAgfSk7XG4gIH1cbiAgX29uRHJvcChldmVudCkge1xuICAgIGxldCBkcm9wWm9uZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICBjaGFydCA9IHRoaXMuY2hhcnQsXG4gICAgICBkcmFnZ2VkID0gdGhpcy5kcmFnZ2VkLFxuICAgICAgZHJhZ1pvbmUgPSB0aGlzLl9jbG9zZXN0KGRyYWdnZWQsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0ICYmIGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKTtcbiAgICAgIH0pLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF07XG5cbiAgICB0aGlzLl9yZW1vdmVDbGFzcyhBcnJheS5mcm9tKGNoYXJ0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGxvd2VkRHJvcCcpKSwgJ2FsbG93ZWREcm9wJyk7XG4gICAgLy8gZmlyc3RseSwgZGVhbCB3aXRoIHRoZSBoaWVyYXJjaHkgb2YgZHJvcCB6b25lXG4gICAgaWYgKCFkcm9wWm9uZS5wYXJlbnROb2RlLnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nKSB7IC8vIGlmIHRoZSBkcm9wIHpvbmUgaXMgYSBsZWFmIG5vZGVcbiAgICAgIGxldCBib3R0b21FZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICBib3R0b21FZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYScpO1xuICAgICAgZHJvcFpvbmUuYXBwZW5kQ2hpbGQoYm90dG9tRWRnZSk7XG4gICAgICBkcm9wWm9uZS5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIDIpO1xuICAgICAgbGV0IHRhYmxlID0gdGhpcy5fY2xvc2VzdChkcm9wWm9uZSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIGVsLm5vZGVOYW1lID09PSAnVEFCTEUnO1xuICAgICAgICB9KSxcbiAgICAgICAgdXBwZXJUciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyksXG4gICAgICAgIGxvd2VyVHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpLFxuICAgICAgICBub2RlVHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICB1cHBlclRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGluZXMnKTtcbiAgICAgIHVwcGVyVHIuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+YDtcbiAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHVwcGVyVHIpO1xuICAgICAgbG93ZXJUci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpbmVzJyk7XG4gICAgICBsb3dlclRyLmlubmVySFRNTCA9IGA8dGQgY2xhc3M9XCJyaWdodExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD5gO1xuICAgICAgdGFibGUuYXBwZW5kQ2hpbGQobG93ZXJUcik7XG4gICAgICBub2RlVHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdub2RlcycpO1xuICAgICAgdGFibGUuYXBwZW5kQ2hpbGQobm9kZVRyKTtcbiAgICAgIEFycmF5LmZyb20oZHJhZ2dlZC5xdWVyeVNlbGVjdG9yQWxsKCcuaG9yaXpvbnRhbEVkZ2UnKSkuZm9yRWFjaCgoaEVkZ2UpID0+IHtcbiAgICAgICAgZHJhZ2dlZC5yZW1vdmVDaGlsZChoRWRnZSk7XG4gICAgICB9KTtcbiAgICAgIGxldCBkcmFnZ2VkVGQgPSB0aGlzLl9jbG9zZXN0KGRyYWdnZWQsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGU7XG5cbiAgICAgIG5vZGVUci5hcHBlbmRDaGlsZChkcmFnZ2VkVGQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZHJvcENvbHNwYW4gPSB3aW5kb3cucGFyc2VJbnQoZHJvcFpvbmUucGFyZW50Tm9kZS5jb2xTcGFuKSArIDI7XG5cbiAgICAgIGRyb3Bab25lLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgZHJvcENvbHNwYW4pO1xuICAgICAgZHJvcFpvbmUucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBkcm9wQ29sc3Bhbik7XG4gICAgICBpZiAoIWRyYWdnZWQucXVlcnlTZWxlY3RvcignLmhvcml6b250YWxFZGdlJykpIHtcbiAgICAgICAgbGV0IHJpZ2h0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICBsZWZ0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICByaWdodEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYScpO1xuICAgICAgICBkcmFnZ2VkLmFwcGVuZENoaWxkKHJpZ2h0RWRnZSk7XG4gICAgICAgIGxlZnRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYScpO1xuICAgICAgICBkcmFnZ2VkLmFwcGVuZENoaWxkKGxlZnRFZGdlKTtcbiAgICAgIH1cbiAgICAgIGxldCB0ZW1wID0gZHJvcFpvbmUucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcsXG4gICAgICAgIGxlZnRsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKSxcbiAgICAgICAgcmlnaHRsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcblxuICAgICAgbGVmdGxpbmUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsZWZ0TGluZSB0b3BMaW5lJyk7XG4gICAgICBsZWZ0bGluZS5pbm5lckhUTUwgPSBgJm5ic3A7YDtcbiAgICAgIHRlbXAuaW5zZXJ0QmVmb3JlKGxlZnRsaW5lLCB0ZW1wLmNoaWxkcmVuWzFdKTtcbiAgICAgIHJpZ2h0bGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3JpZ2h0TGluZSB0b3BMaW5lJyk7XG4gICAgICByaWdodGxpbmUuaW5uZXJIVE1MID0gYCZuYnNwO2A7XG4gICAgICB0ZW1wLmluc2VydEJlZm9yZShyaWdodGxpbmUsIHRlbXAuY2hpbGRyZW5bMl0pO1xuICAgICAgdGVtcC5uZXh0RWxlbWVudFNpYmxpbmcuYXBwZW5kQ2hpbGQodGhpcy5fY2xvc2VzdChkcmFnZ2VkLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLm5vZGVOYW1lID09PSAnVEFCTEUnO1xuICAgICAgfSkucGFyZW50Tm9kZSk7XG5cbiAgICAgIGxldCBkcm9wU2licyA9IHRoaXMuX3NpYmxpbmdzKHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJztcbiAgICAgIH0pLnBhcmVudE5vZGUpLm1hcCgoZWwpID0+IGVsLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykpO1xuXG4gICAgICBpZiAoZHJvcFNpYnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGxldCByaWdodEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyksXG4gICAgICAgICAgbGVmdEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgcmlnaHRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmEnKTtcbiAgICAgICAgZHJvcFNpYnNbMF0uYXBwZW5kQ2hpbGQocmlnaHRFZGdlKTtcbiAgICAgICAgbGVmdEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhJyk7XG4gICAgICAgIGRyb3BTaWJzWzBdLmFwcGVuZENoaWxkKGxlZnRFZGdlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gc2Vjb25kbHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyYWdnZWQgbm9kZVxuICAgIGxldCBkcmFnQ29sU3BhbiA9IHdpbmRvdy5wYXJzZUludChkcmFnWm9uZS5jb2xTcGFuKTtcblxuICAgIGlmIChkcmFnQ29sU3BhbiA+IDIpIHtcbiAgICAgIGRyYWdab25lLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGRyYWdDb2xTcGFuIC0gMik7XG4gICAgICBkcmFnWm9uZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBkcmFnQ29sU3BhbiAtIDIpO1xuICAgICAgbGV0IHRlbXAgPSBkcmFnWm9uZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgIHRlbXAuY2hpbGRyZW5bMV0ucmVtb3ZlKCk7XG4gICAgICB0ZW1wLmNoaWxkcmVuWzFdLnJlbW92ZSgpO1xuXG4gICAgICBsZXQgZHJhZ1NpYnMgPSBBcnJheS5mcm9tKGRyYWdab25lLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlblszXS5jaGlsZHJlbikubWFwKGZ1bmN0aW9uICh0ZCkge1xuICAgICAgICByZXR1cm4gdGQucXVlcnlTZWxlY3RvcignLm5vZGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZHJhZ1NpYnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGRyYWdTaWJzWzBdLnF1ZXJ5U2VsZWN0b3IoJy5sZWZ0RWRnZScpLnJlbW92ZSgpO1xuICAgICAgICBkcmFnU2lic1swXS5xdWVyeVNlbGVjdG9yKCcucmlnaHRFZGdlJykucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWdab25lLnJlbW92ZUF0dHJpYnV0ZSgnY29sc3BhbicpO1xuICAgICAgZHJhZ1pvbmUucXVlcnlTZWxlY3RvcignLm5vZGUnKS5yZW1vdmVDaGlsZChkcmFnWm9uZS5xdWVyeVNlbGVjdG9yKCcuYm90dG9tRWRnZScpKTtcbiAgICAgIEFycmF5LmZyb20oZHJhZ1pvbmUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuKS5zbGljZSgxKS5mb3JFYWNoKCh0cikgPT4gdHIucmVtb3ZlKCkpO1xuICAgIH1cbiAgICBsZXQgY3VzdG9tRSA9IG5ldyBDdXN0b21FdmVudCgnbm9kZWRyb3BwZWQub3JnY2hhcnQnLCB7ICdkZXRhaWwnOiB7XG4gICAgICAnZHJhZ2dlZE5vZGUnOiBkcmFnZ2VkLFxuICAgICAgJ2RyYWdab25lJzogZHJhZ1pvbmUuY2hpbGRyZW5bMF0sXG4gICAgICAnZHJvcFpvbmUnOiBkcm9wWm9uZVxuICAgIH19KTtcblxuICAgIGNoYXJ0LmRpc3BhdGNoRXZlbnQoY3VzdG9tRSk7XG4gIH1cbiAgLy8gY3JlYXRlIG5vZGVcbiAgX2NyZWF0ZU5vZGUobm9kZURhdGEsIGxldmVsKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZiAobm9kZURhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2Ygbm9kZURhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgICBjaGlsZC5wYXJlbnRJZCA9IG5vZGVEYXRhLmlkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnN0cnVjdCB0aGUgY29udGVudCBvZiBub2RlXG4gICAgICBsZXQgbm9kZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICBkZWxldGUgbm9kZURhdGEuY2hpbGRyZW47XG4gICAgICBub2RlRGl2LmRhdGFzZXQuc291cmNlID0gSlNPTi5zdHJpbmdpZnkobm9kZURhdGEpO1xuICAgICAgaWYgKG5vZGVEYXRhW29wdHMubm9kZUlkXSkge1xuICAgICAgICBub2RlRGl2LmlkID0gbm9kZURhdGFbb3B0cy5ub2RlSWRdO1xuICAgICAgfVxuICAgICAgbGV0IGluRWRpdCA9IHRoYXQuY2hhcnQuZGF0YXNldC5pbkVkaXQsXG4gICAgICAgIGlzSGlkZGVuO1xuXG4gICAgICBpZiAoaW5FZGl0KSB7XG4gICAgICAgIGlzSGlkZGVuID0gaW5FZGl0ID09PSAnYWRkQ2hpbGRyZW4nID8gJyBzbGlkZS11cCcgOiAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlzSGlkZGVuID0gbGV2ZWwgPj0gb3B0cy5kZXB0aCA/ICcgc2xpZGUtdXAnIDogJyc7XG4gICAgICB9XG4gICAgICBub2RlRGl2LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbm9kZSAnICsgKG5vZGVEYXRhLmNsYXNzTmFtZSB8fCAnJykgKyBpc0hpZGRlbik7XG4gICAgICBpZiAob3B0cy5kcmFnZ2FibGUpIHtcbiAgICAgICAgbm9kZURpdi5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsIHRydWUpO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGVEYXRhLnBhcmVudElkKSB7XG4gICAgICAgIG5vZGVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXBhcmVudCcsIG5vZGVEYXRhLnBhcmVudElkKTtcbiAgICAgIH1cbiAgICAgIG5vZGVEaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj4ke25vZGVEYXRhW29wdHMubm9kZVRpdGxlXX08L2Rpdj5cbiAgICAgICAgJHtvcHRzLm5vZGVDb250ZW50ID8gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+JHtub2RlRGF0YVtvcHRzLm5vZGVDb250ZW50XX08L2Rpdj5gIDogJyd9XG4gICAgICBgO1xuICAgICAgLy8gYXBwZW5kIDQgZGlyZWN0aW9uIGFycm93cyBvciBleHBhbmQvY29sbGFwc2UgYnV0dG9uc1xuICAgICAgbGV0IGZsYWdzID0gbm9kZURhdGEucmVsYXRpb25zaGlwIHx8ICcnO1xuXG4gICAgICBpZiAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDIpID4gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgIGlmICgobGV2ZWwgKyAxKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgTnVtYmVyKGZsYWdzLnN1YnN0cigyLCAxKSkpIHtcbiAgICAgICAgICBsZXQgdG9nZ2xlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgICAgdG9nZ2xlQnRuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndG9nZ2xlQnRuIGZhIGZhLW1pbnVzLXNxdWFyZScpO1xuICAgICAgICAgIG5vZGVEaXYuYXBwZW5kQ2hpbGQodG9nZ2xlQnRuKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMCwgMSkpKSB7XG4gICAgICAgICAgbGV0IHRvcEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgICB0b3BFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYScpO1xuICAgICAgICAgIG5vZGVEaXYuYXBwZW5kQ2hpbGQodG9wRWRnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMSwgMSkpKSB7XG4gICAgICAgICAgbGV0IHJpZ2h0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICAgIGxlZnRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgICAgcmlnaHRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmEnKTtcbiAgICAgICAgICBub2RlRGl2LmFwcGVuZENoaWxkKHJpZ2h0RWRnZSk7XG4gICAgICAgICAgbGVmdEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhJyk7XG4gICAgICAgICAgbm9kZURpdi5hcHBlbmRDaGlsZChsZWZ0RWRnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMiwgMSkpKSB7XG4gICAgICAgICAgbGV0IGJvdHRvbUVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyksXG4gICAgICAgICAgICBzeW1ib2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyksXG4gICAgICAgICAgICB0aXRsZSA9IG5vZGVEaXYucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnRpdGxlJyk7XG5cbiAgICAgICAgICBib3R0b21FZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYScpO1xuICAgICAgICAgIG5vZGVEaXYuYXBwZW5kQ2hpbGQoYm90dG9tRWRnZSk7XG4gICAgICAgICAgc3ltYm9sLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZmEgJyArIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sJyk7XG4gICAgICAgICAgdGl0bGUuaW5zZXJ0QmVmb3JlKHN5bWJvbCwgdGl0bGUuY2hpbGRyZW5bMF0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5vZGVEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoYXQuX2hvdmVyTm9kZS5iaW5kKHRoYXQpKTtcbiAgICAgIG5vZGVEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoYXQuX2hvdmVyTm9kZS5iaW5kKHRoYXQpKTtcbiAgICAgIG5vZGVEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGF0Ll9kaXNwYXRjaENsaWNrRXZlbnQuYmluZCh0aGF0KSk7XG4gICAgICBpZiAob3B0cy5kcmFnZ2FibGUpIHtcbiAgICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGF0Ll9vbkRyYWdTdGFydC5iaW5kKHRoYXQpKTtcbiAgICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoYXQuX29uRHJhZ092ZXIuYmluZCh0aGF0KSk7XG4gICAgICAgIG5vZGVEaXYuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoYXQuX29uRHJhZ0VuZC5iaW5kKHRoYXQpKTtcbiAgICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhhdC5fb25Ecm9wLmJpbmQodGhhdCkpO1xuICAgICAgfVxuICAgICAgLy8gYWxsb3cgdXNlciB0byBhcHBlbmQgZG9tIG1vZGlmaWNhdGlvbiBhZnRlciBmaW5pc2hpbmcgbm9kZSBjcmVhdGUgb2Ygb3JnY2hhcnRcbiAgICAgIGlmIChvcHRzLmNyZWF0ZU5vZGUpIHtcbiAgICAgICAgb3B0cy5jcmVhdGVOb2RlKG5vZGVEaXYsIG5vZGVEYXRhKTtcbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZShub2RlRGl2KTtcbiAgICB9KTtcbiAgfVxuICBidWlsZEhpZXJhcmNoeShhcHBlbmRUbywgbm9kZURhdGEsIGxldmVsLCBjYWxsYmFjaykge1xuICAgIC8vIENvbnN0cnVjdCB0aGUgbm9kZVxuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICBub2RlV3JhcHBlcixcbiAgICAgIGNoaWxkTm9kZXMgPSBub2RlRGF0YS5jaGlsZHJlbixcbiAgICAgIGlzVmVydGljYWxOb2RlID0gb3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aDtcblxuICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID4gMSkgeyAvLyBpZiBub2RlRGF0YSBoYXMgbmVzdGVkIHN0cnVjdHVyZVxuICAgICAgbm9kZVdyYXBwZXIgPSBpc1ZlcnRpY2FsTm9kZSA/IGFwcGVuZFRvIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgIGlmICghaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgYXBwZW5kVG8uYXBwZW5kQ2hpbGQobm9kZVdyYXBwZXIpO1xuICAgICAgfVxuICAgICAgdGhpcy5fY3JlYXRlTm9kZShub2RlRGF0YSwgbGV2ZWwpXG4gICAgICAudGhlbihmdW5jdGlvbiAobm9kZURpdikge1xuICAgICAgICBpZiAoaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgICBub2RlV3JhcHBlci5hcHBlbmRDaGlsZChub2RlRGl2KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHRkICR7Y2hpbGROb2RlcyA/IGBjb2xzcGFuPVwiJHtjaGlsZE5vZGVzLmxlbmd0aCAqIDJ9XCJgIDogJyd9PlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICBgO1xuICAgICAgICAgIHRyLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKG5vZGVEaXYpO1xuICAgICAgICAgIG5vZGVXcmFwcGVyLmluc2VydEJlZm9yZSh0ciwgbm9kZVdyYXBwZXIuY2hpbGRyZW5bMF0gPyBub2RlV3JhcHBlci5jaGlsZHJlblswXSA6IG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXQgbm9kZScsIGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ29uc3RydWN0IHRoZSBpbmZlcmlvciBub2RlcyBhbmQgY29ubmVjdGlvbmcgbGluZXNcbiAgICBpZiAoY2hpbGROb2Rlcykge1xuICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPT09IDEpIHsgLy8gaWYgbm9kZURhdGEgaXMganVzdCBhbiBhcnJheVxuICAgICAgICBub2RlV3JhcHBlciA9IGFwcGVuZFRvO1xuICAgICAgfVxuICAgICAgbGV0IGlzSGlkZGVuLFxuICAgICAgICBpc1ZlcnRpY2FsTGF5ZXIgPSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPj0gb3B0cy52ZXJ0aWNhbERlcHRoLFxuICAgICAgICBpbkVkaXQgPSB0aGF0LmNoYXJ0LmRhdGFzZXQuaW5FZGl0O1xuXG4gICAgICBpZiAoaW5FZGl0KSB7XG4gICAgICAgIGlzSGlkZGVuID0gaW5FZGl0ID09PSAnYWRkU2libGluZ3MnID8gJycgOiAnIGhpZGRlbic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc0hpZGRlbiA9IGxldmVsICsgMSA+PSBvcHRzLmRlcHRoID8gJyBoaWRkZW4nIDogJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIGRyYXcgdGhlIGxpbmUgY2xvc2UgdG8gcGFyZW50IG5vZGVcbiAgICAgIGlmICghaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgICAgdHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5lcycgKyBpc0hpZGRlbik7XG4gICAgICAgIHRyLmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8dGQgY29sc3Bhbj1cIiR7IGNoaWxkTm9kZXMubGVuZ3RoICogMiB9XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj5cbiAgICAgICAgICA8L3RkPlxuICAgICAgICBgO1xuICAgICAgICBub2RlV3JhcHBlci5hcHBlbmRDaGlsZCh0cik7XG4gICAgICB9XG4gICAgICAvLyBkcmF3IHRoZSBsaW5lcyBjbG9zZSB0byBjaGlsZHJlbiBub2Rlc1xuICAgICAgbGV0IGxpbmVMYXllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgIGxpbmVMYXllci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpbmVzJyArIGlzSGlkZGVuKTtcbiAgICAgIGxpbmVMYXllci5pbm5lckhUTUwgPSBgXG4gICAgICAgIDx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+XG4gICAgICAgICR7Y2hpbGROb2Rlcy5zbGljZSgxKS5tYXAoKCkgPT4gYFxuICAgICAgICAgIDx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD5cbiAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgPHRkIGNsYXNzPVwibGVmdExpbmVcIj4mbmJzcDs8L3RkPlxuICAgICAgYDtcbiAgICAgIGxldCBub2RlTGF5ZXI7XG5cbiAgICAgIGlmIChpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgbm9kZUxheWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnPHVsPicpO1xuICAgICAgICBpZiAobGV2ZWwgKyAyID09PSBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgICAgdHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICd2ZXJ0aWNhbE5vZGVzJyk7XG4gICAgICAgICAgdHIuaW5uZXJIVE1MID0gYDx0ZD48L3RkPmA7XG4gICAgICAgICAgdHIuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChub2RlTGF5ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGVXcmFwcGVyLmFwcGVuZENoaWxkKG5vZGVMYXllcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVMYXllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIG5vZGVMYXllci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vZGVzJyArIGlzSGlkZGVuKTtcbiAgICAgICAgbm9kZVdyYXBwZXIuYXBwZW5kQ2hpbGQobGluZUxheWVyKTtcbiAgICAgICAgbm9kZVdyYXBwZXIuYXBwZW5kQ2hpbGQobm9kZUxheWVyKTtcbiAgICAgIH1cbiAgICAgIC8vIHJlY3Vyc2UgdGhyb3VnaCBjaGlsZHJlbiBub2Rlc1xuICAgICAgY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICBsZXQgbm9kZUNlbGw7XG5cbiAgICAgICAgaWYgKGlzVmVydGljYWxMYXllcikge1xuICAgICAgICAgIG5vZGVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgbm9kZUNlbGwuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgMik7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZUxheWVyLmFwcGVuZENoaWxkKG5vZGVDZWxsKTtcbiAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeShub2RlQ2VsbCwgY2hpbGQsIGxldmVsICsgMSwgY2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIF9jbGlja0NoYXJ0KGV2ZW50KSB7XG4gICAgbGV0IGNsb3Nlc3ROb2RlID0gdGhpcy5fY2xvc2VzdChldmVudC50YXJnZXQsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGUnKTtcbiAgICB9KTtcblxuICAgIGlmICghY2xvc2VzdE5vZGUgJiYgdGhpcy5jaGFydC5xdWVyeVNlbGVjdG9yKCcubm9kZS5mb2N1c2VkJykpIHtcbiAgICAgIHRoaXMuY2hhcnQucXVlcnlTZWxlY3RvcignLm5vZGUuZm9jdXNlZCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzZWQnKTtcbiAgICB9XG4gIH1cbiAgX2NsaWNrRXhwb3J0QnV0dG9uKCkge1xuICAgIGxldCBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgY2hhcnRDb250YWluZXIgPSB0aGlzLmNoYXJ0Q29udGFpbmVyLFxuICAgICAgbWFzayA9IGNoYXJ0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC5tYXNrJyksXG4gICAgICBzb3VyY2VDaGFydCA9IGNoYXJ0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5vcmdjaGFydDpub3QoLmhpZGRlbiknKSxcbiAgICAgIGZsYWcgPSBvcHRzLmRpcmVjdGlvbiA9PT0gJ2wycicgfHwgb3B0cy5kaXJlY3Rpb24gPT09ICdyMmwnO1xuXG4gICAgaWYgKCFtYXNrKSB7XG4gICAgICBtYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBtYXNrLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbWFzaycpO1xuICAgICAgbWFzay5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+YDtcbiAgICAgIGNoYXJ0Q29udGFpbmVyLmFwcGVuZENoaWxkKG1hc2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXNrLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH1cbiAgICBjaGFydENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjYW52YXNDb250YWluZXInKTtcbiAgICB3aW5kb3cuaHRtbDJjYW52YXMoc291cmNlQ2hhcnQsIHtcbiAgICAgICd3aWR0aCc6IGZsYWcgPyBzb3VyY2VDaGFydC5jbGllbnRIZWlnaHQgOiBzb3VyY2VDaGFydC5jbGllbnRXaWR0aCxcbiAgICAgICdoZWlnaHQnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50V2lkdGggOiBzb3VyY2VDaGFydC5jbGllbnRIZWlnaHQsXG4gICAgICAnb25jbG9uZSc6IGZ1bmN0aW9uIChjbG9uZURvYykge1xuICAgICAgICBsZXQgY2FudmFzQ29udGFpbmVyID0gY2xvbmVEb2MucXVlcnlTZWxlY3RvcignLmNhbnZhc0NvbnRhaW5lcicpO1xuXG4gICAgICAgIGNhbnZhc0NvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICd2aXNpYmxlJztcbiAgICAgICAgY2FudmFzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5vcmdjaGFydDpub3QoLmhpZGRlbiknKS50cmFuc2Zvcm0gPSAnJztcbiAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKChjYW52YXMpID0+IHtcbiAgICAgIGxldCBkb3dubG9hZEJ0biA9IGNoYXJ0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5vYy1kb3dubG9hZC1idG4nKTtcblxuICAgICAgY2hhcnRDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1hc2snKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIGRvd25sb2FkQnRuLnNldEF0dHJpYnV0ZSgnaHJlZicsIGNhbnZhcy50b0RhdGFVUkwoKSk7XG4gICAgICBkb3dubG9hZEJ0bi5jbGljaygpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBleHBvcnQgdGhlIGN1cmVudCBvcmdjaGFydCEnLCBlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2hhcnRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnY2FudmFzQ29udGFpbmVyJyk7XG4gICAgfSk7XG4gIH1cbiAgX2xvb3BDaGFydChjaGFydCkge1xuICAgIGxldCBzdWJPYmogPSB7ICdpZCc6IGNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykuaWQgfTtcblxuICAgIGlmIChjaGFydC5jaGlsZHJlblszXSkge1xuICAgICAgQXJyYXkuZnJvbShjaGFydC5jaGlsZHJlblszXS5jaGlsZHJlbikuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgaWYgKCFzdWJPYmouY2hpbGRyZW4pIHsgc3ViT2JqLmNoaWxkcmVuID0gW107IH1cbiAgICAgICAgc3ViT2JqLmNoaWxkcmVuLnB1c2godGhpcy5fbG9vcENoYXJ0KGVsLmZpcnN0Q2hpbGQpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gc3ViT2JqO1xuICB9XG4gIGdldEhpZXJhcmNoeSgpIHtcbiAgICBpZiAoIXRoaXMuY2hhcnQucXVlcnlTZWxlY3RvcignLm5vZGUnKS5pZCkge1xuICAgICAgcmV0dXJuICdFcnJvcjogTm9kZXMgb2Ygb3JnaGNhcnQgdG8gYmUgZXhwb3J0ZWQgbXVzdCBoYXZlIGlkIGF0dHJpYnV0ZSEnO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbG9vcENoYXJ0KHRoaXMuY2hhcnQucXVlcnlTZWxlY3RvcigndGFibGUnKSk7XG4gIH1cbiAgX29uUGFuU3RhcnQoZXZlbnQpIHtcbiAgICBsZXQgY2hhcnQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gICAgaWYgKHRoaXMuX2Nsb3Nlc3QoZXZlbnQudGFyZ2V0LCAoZWwpID0+IGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGUnKSkgfHxcbiAgICAgIChldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMSkpIHtcbiAgICAgIGNoYXJ0LmRhdGFzZXQucGFubmluZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjaGFydC5zdHlsZS5jdXJzb3IgPSAnbW92ZSc7XG4gICAgY2hhcnQuZGF0YXNldC5wYW5uaW5nID0gdHJ1ZTtcblxuICAgIGxldCBsYXN0WCA9IDAsXG4gICAgICBsYXN0WSA9IDAsXG4gICAgICBsYXN0VGYgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjaGFydCkudHJhbnNmb3JtO1xuXG4gICAgaWYgKGxhc3RUZiAhPT0gJ25vbmUnKSB7XG4gICAgICBsZXQgdGVtcCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuXG4gICAgICBpZiAoIWxhc3RUZi5pbmNsdWRlcygnM2QnKSkge1xuICAgICAgICBsYXN0WCA9IE51bWJlci5wYXJzZUludCh0ZW1wWzRdLCAxMCk7XG4gICAgICAgIGxhc3RZID0gTnVtYmVyLnBhcnNlSW50KHRlbXBbNV0sIDEwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3RYID0gTnVtYmVyLnBhcnNlSW50KHRlbXBbMTJdLCAxMCk7XG4gICAgICAgIGxhc3RZID0gTnVtYmVyLnBhcnNlSW50KHRlbXBbMTNdLCAxMCk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBzdGFydFggPSAwLFxuICAgICAgc3RhcnRZID0gMDtcblxuICAgIGlmICghZXZlbnQudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW4gb24gZGVza3RvcFxuICAgICAgc3RhcnRYID0gZXZlbnQucGFnZVggLSBsYXN0WDtcbiAgICAgIHN0YXJ0WSA9IGV2ZW50LnBhZ2VZIC0gbGFzdFk7XG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgc3RhcnRYID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIGxhc3RYO1xuICAgICAgc3RhcnRZID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIGxhc3RZO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNoYXJ0LmRhdGFzZXQucGFuU3RhcnQgPSBKU09OLnN0cmluZ2lmeSh7ICdzdGFydFgnOiBzdGFydFgsICdzdGFydFknOiBzdGFydFkgfSk7XG4gICAgY2hhcnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25QYW5uaW5nLmJpbmQodGhpcykpO1xuICAgIGNoYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX29uUGFubmluZy5iaW5kKHRoaXMpKTtcbiAgfVxuICBfb25QYW5uaW5nKGV2ZW50KSB7XG4gICAgbGV0IGNoYXJ0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgIGlmIChjaGFydC5kYXRhc2V0LnBhbm5pbmcgPT09ICdmYWxzZScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG5ld1ggPSAwLFxuICAgICAgbmV3WSA9IDAsXG4gICAgICBwYW5TdGFydCA9IEpTT04ucGFyc2UoY2hhcnQuZGF0YXNldC5wYW5TdGFydCksXG4gICAgICBzdGFydFggPSBwYW5TdGFydC5zdGFydFgsXG4gICAgICBzdGFydFkgPSBwYW5TdGFydC5zdGFydFk7XG5cbiAgICBpZiAoIWV2ZW50LnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICBuZXdYID0gZXZlbnQucGFnZVggLSBzdGFydFg7XG4gICAgICBuZXdZID0gZXZlbnQucGFnZVkgLSBzdGFydFk7XG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgbmV3WCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBzdGFydFg7XG4gICAgICBuZXdZID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIHN0YXJ0WTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgbGFzdFRmID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoY2hhcnQpLnRyYW5zZm9ybTtcblxuICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgaWYgKCFsYXN0VGYuaW5jbHVkZXMoJzNkJykpIHtcbiAgICAgICAgY2hhcnQuc3R5bGUudHJhbnNmb3JtID0gJ21hdHJpeCgxLCAwLCAwLCAxLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJyknO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhcnQuc3R5bGUudHJhbnNmb3JtID0gJ21hdHJpeDNkKDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsICcgKyBuZXdYICsgJywgJyArIG5ld1kgKyAnLCAwLCAxKSc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBtYXRyaXggPSBsYXN0VGYuc3BsaXQoJywnKTtcblxuICAgICAgaWYgKCFsYXN0VGYuaW5jbHVkZXMoJzNkJykpIHtcbiAgICAgICAgbWF0cml4WzRdID0gbmV3WDtcbiAgICAgICAgbWF0cml4WzVdID0gbmV3WSArICcpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hdHJpeFsxMl0gPSBuZXdYO1xuICAgICAgICBtYXRyaXhbMTNdID0gbmV3WTtcbiAgICAgIH1cbiAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9IG1hdHJpeC5qb2luKCcsJyk7XG4gICAgfVxuICB9XG4gIF9vblBhbkVuZChldmVudCkge1xuICAgIGxldCBjaGFydCA9IHRoaXMuY2hhcnQ7XG5cbiAgICBpZiAoY2hhcnQuZGF0YXNldC5wYW5uaW5nID09PSAndHJ1ZScpIHtcbiAgICAgIGNoYXJ0LmRhdGFzZXQucGFubmluZyA9IGZhbHNlO1xuICAgICAgY2hhcnQuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vblBhbm5pbmcpO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblBhbm5pbmcpO1xuICAgIH1cbiAgfVxuICBfc2V0Q2hhcnRTY2FsZShjaGFydCwgbmV3U2NhbGUpIHtcbiAgICBsZXQgbGFzdFRmID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoY2hhcnQpLnRyYW5zZm9ybTtcblxuICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgY2hhcnQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XG5cbiAgICAgIGlmICghbGFzdFRmLmluY2x1ZGVzKCczZCcpKSB7XG4gICAgICAgIG1hdHJpeFswXSA9ICdtYXRyaXgoJyArIG5ld1NjYWxlO1xuICAgICAgICBtYXRyaXhbM10gPSBuZXdTY2FsZTtcbiAgICAgICAgY2hhcnQuc3R5bGUudHJhbnNmb3JtID0gbGFzdFRmICsgJyBzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9IGxhc3RUZiArICcgc2NhbGUzZCgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcsIDEpJztcbiAgICAgIH1cbiAgICB9XG4gICAgY2hhcnQuZGF0YXNldC5zY2FsZSA9IG5ld1NjYWxlO1xuICB9XG4gIF9vbldoZWVsaW5nKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGxldCBuZXdTY2FsZSA9IGV2ZW50LmRlbHRhWSA+IDAgPyAwLjggOiAxLjI7XG5cbiAgICB0aGlzLl9zZXRDaGFydFNjYWxlKHRoaXMuY2hhcnQsIG5ld1NjYWxlKTtcbiAgfVxuICBfZ2V0UGluY2hEaXN0KGV2ZW50KSB7XG4gICAgcmV0dXJuIE1hdGguc3FydCgoZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIC0gZXZlbnQudG91Y2hlc1sxXS5jbGllbnRYKSAqXG4gICAgICAoZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIC0gZXZlbnQudG91Y2hlc1sxXS5jbGllbnRYKSArXG4gICAgICAoZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIC0gZXZlbnQudG91Y2hlc1sxXS5jbGllbnRZKSAqXG4gICAgICAoZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIC0gZXZlbnQudG91Y2hlc1sxXS5jbGllbnRZKSk7XG4gIH1cbiAgX29uVG91Y2hTdGFydChldmVudCkge1xuICAgIGxldCBjaGFydCA9IHRoaXMuY2hhcnQ7XG5cbiAgICBpZiAoZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgbGV0IGRpc3QgPSB0aGlzLl9nZXRQaW5jaERpc3QoZXZlbnQpO1xuXG4gICAgICBjaGFydC5kYXRhc2V0LnBpbmNoaW5nID0gdHJ1ZTtcbiAgICAgIGNoYXJ0LmRhdGFzZXQucGluY2hEaXN0U3RhcnQgPSBkaXN0O1xuICAgIH1cbiAgfVxuICBfb25Ub3VjaE1vdmUoZXZlbnQpIHtcbiAgICBsZXQgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuXG4gICAgaWYgKGNoYXJ0LmRhdGFzZXQucGluY2hpbmcpIHtcbiAgICAgIGxldCBkaXN0ID0gdGhpcy5fZ2V0UGluY2hEaXN0KGV2ZW50KTtcblxuICAgICAgY2hhcnQuZGF0YXNldC5waW5jaERpc3RFbmQgPSBkaXN0O1xuICAgIH1cbiAgfVxuICBfb25Ub3VjaEVuZChldmVudCkge1xuICAgIGxldCBjaGFydCA9IHRoaXMuY2hhcnQ7XG5cbiAgICBpZiAoY2hhcnQuZGF0YXNldC5waW5jaGluZykge1xuICAgICAgY2hhcnQuZGF0YXNldC5waW5jaGluZyA9IGZhbHNlO1xuICAgICAgbGV0IGRpZmYgPSBjaGFydC5kYXRhc2V0LnBpbmNoRGlzdEVuZCAtIGNoYXJ0LmRhdGFzZXQucGluY2hEaXN0U3RhcnQ7XG5cbiAgICAgIGlmIChkaWZmID4gMCkge1xuICAgICAgICB0aGlzLl9zZXRDaGFydFNjYWxlKGNoYXJ0LCAxKTtcbiAgICAgIH0gZWxzZSBpZiAoZGlmZiA8IDApIHtcbiAgICAgICAgdGhpcy5fc2V0Q2hhcnRTY2FsZShjaGFydCwgLTEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19
