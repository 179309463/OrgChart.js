"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),OrgChart=function(){function e(t){_classCallCheck(this,e),this._name="OrgChart",Promise.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})};var n=this,i={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1},r=Object.assign(i,t),s=r.data,a=document.createElement("div"),o=document.querySelector(r.chartContainer);if(this.options=r,delete this.options.data,this.chart=a,this.chartContainer=o,a.dataset.options=JSON.stringify(r),a.setAttribute("class","orgchart"+(""!==r.chartClass?" "+r.chartClass:"")+("t2b"!==r.direction?" "+r.direction:"")),"object"===("undefined"==typeof s?"undefined":_typeof(s)))this.buildHierarchy(a,r.ajaxURL?s:this._attachRel(s,"00"),0);else if("string"==typeof s&&s.startsWith("#"))this.buildHierarchy(a,this._buildJsonDS(document.querySelector(s).children[0]),0);else{var l=document.createElement("i");l.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),a.appendChild(l),this._getJSON(s).then(function(e){n.buildHierarchy(a,r.ajaxURL?e:n._attachRel(e,"00"),0)}).catch(function(e){console.error("failed to fetch datasource for orgchart",e)}).finally(function(){var e=a.querySelector(".spinner");e.parentNode.removeChild(e)})}if(a.addEventListener("click",this._clickChart.bind(this)),r.exportButton&&!o.querySelector(".oc-export-btn")){var d=document.createElement("button"),c=document.createElement("a");d.setAttribute("class","oc-export-btn"+(""!==r.chartClass?" "+r.chartClass:"")),d.innerHTML="Export",d.addEventListener("click",this._clickExportButton.bind(this)),c.setAttribute("class","oc-download-btn"+(""!==r.chartClass?" "+r.chartClass:"")),c.setAttribute("download",r.exportFilename+".png"),o.appendChild(d),o.appendChild(c)}r.pan&&(o.style.overflow="hidden",a.addEventListener("mousedown",this._onPanStart.bind(this)),a.addEventListener("touchstart",this._onPanStart.bind(this)),document.body.addEventListener("mouseup",this._onPanEnd.bind(this)),document.body.addEventListener("touchend",this._onPanEnd.bind(this))),r.zoom&&(o.addEventListener("wheel",this._onWheeling.bind(this)),o.addEventListener("touchstart",this._onTouchStart.bind(this)),document.body.addEventListener("touchmove",this._onTouchMove.bind(this)),document.body.addEventListener("touchend",this._onTouchEnd.bind(this))),o.appendChild(a)}return _createClass(e,[{key:"_closest",value:function(e,t){return e&&(t(e)&&e!==this.chart?e:this._closest(e.parentNode,t))}},{key:"_siblings",value:function(e,t){return Array.from(e.parentNode.children).filter(function(n){return n!==e&&(!t||e.matches(t))})}},{key:"_prevAll",value:function(e,t){for(var n=[],i=e.previousElementSibling;i;)t&&!i.matches(t)||n.push(i),i=i.previousElementSibling;return n}},{key:"_nextAll",value:function(e,t){for(var n=[],i=e.nextElementSibling;i;)t&&!i.matches(t)||n.push(i),i=i.nextElementSibling;return n}},{key:"_isVisible",value:function(e){return null!==e.offsetParent}},{key:"_addClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.add(t)}):e.classList.add(t)})}},{key:"_removeClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t)})}},{key:"_css",value:function(e,t,n){e.forEach(function(e){e.style[t]=n})}},{key:"_removeAttr",value:function(e,t){e.forEach(function(e){e.removeAttribute(t)})}},{key:"_one",value:function(e,t,n,i){var r=function r(s){try{n.call(i,s)}finally{e.removeEventListener(t,r)}};e.addEventListener(t,r)}},{key:"_getDescElements",value:function(e,t){var n=[];return e.forEach(function(e){return n.push.apply(n,_toConsumableArray(e.querySelectorAll(t)))}),n}},{key:"_getJSON",value:function(e){return new Promise(function(t,n){function i(){4===this.readyState&&(200===this.status?t(JSON.parse(this.response)):n(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",e),r.onreadystatechange=i,r.responseType="json",r.setRequestHeader("Content-Type","application/json"),r.send()})}},{key:"_buildJsonDS",value:function(e){var t=this,n={name:e.firstChild.textContent.trim(),relationship:("LI"===e.parentNode.parentNode.nodeName?"1":"0")+(e.parentNode.children.length>1?1:0)+(e.children.length?1:0)};return e.id&&(n.id=e.id),e.querySelector("ul")&&Array.from(e.querySelector("ul").children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._buildJsonDS(e))}),n}},{key:"_attachRel",value:function(e,t){if(e.relationship=t+(e.children&&e.children.length>0?1:0),e.children){var n=!0,i=!1,r=void 0;try{for(var s,a=e.children[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;this._attachRel(o,"1"+(e.children.length>1?1:0))}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}return e}},{key:"_repaint",value:function(e){e&&(e.style.offsetWidth=e.offsetWidth)}},{key:"_isInAction",value:function(e){return e.querySelector(":scope > .edge").className.indexOf("fa-")>-1}},{key:"_getNodeState",value:function(e,t){var n=this,i=void 0,r={exist:!1,visible:!1};return"parent"===t?(i=this._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}),i&&(r.exist=!0),r.exist&&this._isVisible(i.parentNode.children[0])&&(r.visible=!0)):"children"===t?(i=this._closest(e,function(e){return"TR"===e.nodeName}).nextElementSibling,i&&(r.exist=!0),r.exist&&this._isVisible(i)&&(r.visible=!0)):"siblings"===t&&(i=this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode),i.length&&(r.exist=!0),r.exist&&i.some(function(e){return n._isVisible(e)})&&(r.visible=!0)),r}},{key:"getRelatedNodes",value:function(e,t){return"parent"===t?this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"):"children"===t?Array.from(this._closest(e,function(e){return"TABLE"===e.nodeName}).lastChild.children).map(function(e){return e.querySelector(".node")}):"siblings"===t?this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")}):void 0}},{key:"_switchHorizontalArrow",value:function(e){var t=this.options,n=e.querySelector(".leftEdge"),i=e.querySelector(".rightEdge"),r=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;if(t.toggleSiblingsResp&&("undefined"==typeof t.ajaxURL||this._closest(e,function(e){return e.classList.contains(".nodes")}).dataset.siblingsLoaded)){var s=r.previousElementSibling,a=r.nextElementSibling;s&&(s.classList.contains("hidden")?(n.classList.add("fa-chevron-left"),n.classList.remove("fa-chevron-right")):(n.classList.add("fa-chevron-right"),n.classList.remove("fa-chevron-left"))),a&&(a.classList.contains("hidden")?(i.classList.add("fa-chevron-right"),i.classList.remove("fa-chevron-left")):(i.classList.add("fa-chevron-left"),i.classList.remove("fa-chevron-right")))}else{var o=this._siblings(r),l=!!o.length&&!o.some(function(e){return e.classList.contains("hidden")});n.classList.toggle("fa-chevron-right",l),n.classList.toggle("fa-chevron-left",!l),i.classList.toggle("fa-chevron-left",l),i.classList.toggle("fa-chevron-right",!l)}}},{key:"_hoverNode",value:function(e){var t=e.target,n=!1,i=t.querySelector(":scope > .topEdge"),r=t.querySelector(":scope > .bottomEdge"),s=t.querySelector(":scope > .leftEdge");"mouseenter"===e.type?(i&&(n=this._getNodeState(t,"parent").visible,i.classList.toggle("fa-chevron-up",!n),i.classList.toggle("fa-chevron-down",n)),r&&(n=this._getNodeState(t,"children").visible,r.classList.toggle("fa-chevron-down",!n),r.classList.toggle("fa-chevron-up",n)),s&&this._switchHorizontalArrow(t)):Array.from(t.querySelectorAll(":scope > .edge")).forEach(function(e){e.classList.remove("fa-chevron-up","fa-chevron-down","fa-chevron-right","fa-chevron-left")})}},{key:"_clickNode",value:function(e){var t=e.currentTarget,n=this.chart.querySelector(".focused");n&&n.classList.remove("focused"),t.classList.add("focused")}},{key:"_buildParentNode",value:function(e,t,n){var i=this,r=document.createElement("table");t.relationship="001",this._createNode(t,0).then(function(e){var t=i.chart;e.classList.remove("slide-up"),e.classList.add("slide-down");var s=document.createElement("tr"),a=document.createElement("tr"),o=document.createElement("tr"),l=document.createElement("tr");s.setAttribute("class","hidden"),s.innerHTML='<td colspan="2"></td>',r.appendChild(s),a.setAttribute("class","lines hidden"),a.innerHTML='<td colspan="2"><div class="downLine"></div></td>',r.appendChild(a),o.setAttribute("class","lines hidden"),o.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',r.appendChild(o),l.setAttribute("class","nodes"),l.innerHTML='<td colspan="2"></td>',r.appendChild(l),r.querySelector("td").appendChild(e),t.insertBefore(r,t.children[0]),r.children[3].children[0].appendChild(t.lastChild),n()}).catch(function(e){console.error("Failed to create parent node",e)})}},{key:"_switchVerticalArrow",value:function(e){e.classList.toggle("fa-chevron-up"),e.classList.toggle("fa-chevron-down")}},{key:"showParent",value:function(e){var t=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));this._removeClass(t,"hidden"),this._addClass(Array(t[0].children).slice(1,-1),"hidden");var n=t[2].querySelector(".node");this._one(n,"transitionend",function(){n.classList.remove("slide"),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(":scope > .topEdge"))},this),this._repaint(n),n.classList.add("slide"),n.classList.remove("slide-down")}},{key:"showSiblings",value:function(e,t){var n=this,i=[],r=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;i=t?"left"===t?this._prevAll(r):this._nextAll(r):this._siblings(r),this._removeClass(i,"hidden");var s=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));if(r=Array.from(s[0].querySelectorAll(":scope > .hidden")),t?this._removeClass(r.slice(0,2*i.length),"hidden"):this._removeClass(r,"hidden"),!this._getNodeState(e,"parent").visible){this._removeClass(s,"hidden");var a=s[2].querySelector(".node");this._one(a,"transitionend",function(e){e.target.classList.remove("slide")},this),this._repaint(a),a.classList.add("slide"),a.classList.remove("slide-down")}i.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&(e.classList.add("slide"),e.classList.remove("slide-left","slide-right"))})}),this._one(i[0].querySelector(".slide"),"transitionend",function(){var t=this;i.forEach(function(e){t._removeClass(Array.from(e.querySelectorAll(".slide")),"slide")}),this._isInAction(e)&&(this._switchHorizontalArrow(e),e.querySelector(".topEdge").classList.remove("fa-chevron-up"),e.querySelector(".topEdge").classList.add("fa-chevron-down"))},this)}},{key:"hideSiblings",value:function(e,t){var n=this,i=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode,r=this._siblings(i);if(r.forEach(function(e){e.querySelector(".spinner")&&(n.chart.dataset.inAjax=!1)}),!t||t&&"left"===t){var s=this._prevAll(i);s.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-right")})})}if(!t||t&&"left"!==t){var a=this._nextAll(i);a.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-left")})})}var o=[];this._siblings(i).forEach(function(e){Array.prototype.push.apply(o,Array.from(e.querySelectorAll(".slide")))});var l=[],d=!0,c=!1,h=void 0;try{for(var u,f=o[Symbol.iterator]();!(d=(u=f.next()).done);d=!0){var p=u.value,v=this._closest(p,function(e){return e.classList.contains("nodes")}).previousElementSibling;l.push(v),l.push(v.previousElementSibling)}}catch(e){c=!0,h=e}finally{try{!d&&f.return&&f.return()}finally{if(c)throw h}}l=[].concat(_toConsumableArray(new Set(l))),l.forEach(function(e){e.style.visibility="hidden"}),this._one(o[0],"transitionend",function(n){var r=this;l.forEach(function(e){e.removeAttribute("style")});var s=[];s=t?"left"===t?this._prevAll(i,":not(.hidden)"):this._nextAll(i,":not(.hidden)"):this._siblings(i);var a=Array.from(this._closest(i,function(e){return e.classList.contains("nodes")}).previousElementSibling.querySelectorAll(":scope > :not(.hidden)")),d=a.slice(1,t?2*s.length+1:-1);this._addClass(d,"hidden"),this._removeClass(o,"slide"),s.forEach(function(e){Array.from(e.querySelectorAll(".node")).slice(1).forEach(function(e){r._isVisible(e)&&(e.classList.remove("slide-left","slide-right"),e.classList.add("slide-up"))})}),s.forEach(function(e){r._addClass(Array.from(e.querySelectorAll(".lines")),"hidden"),r._addClass(Array.from(e.querySelectorAll(".nodes")),"hidden"),r._addClass(Array.from(e.querySelectorAll(".verticalNodes")),"hidden")}),this._addClass(s,"hidden"),this._isInAction(e)&&this._switchHorizontalArrow(e)},this)}},{key:"hideAncestorsSiblings",value:function(e){var t=Array.from(this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children).slice(0,3);t[0].querySelector(".spinner")&&(this.chart.dataset.inAjax=!1),this._getNodeState(e,"siblings").visible&&this.hideSiblings(e);var n=t.slice(1);this._css(n,"visibility","hidden");var i=t[0].querySelector(".node"),r=this._getNodeState(i,"parent").visible;i&&this._isVisible(i)&&(i.classList.add("slide","slide-down"),this._one(i,"transitionend",function(){i.classList.remove("slide"),this._removeAttr(n,"style"),this._addClass(t,"hidden")},this)),i&&r&&this.hideAncestorsSiblings(i)}},{key:"addParent",value:function(e,t){var n=this;this._buildParentNode(e,t,function(){if(!e.querySelector(":scope > .topEdge")){var t=document.createElement("i");t.setAttribute("class","edge verticalEdge topEdge fa"),e.appendChild(t)}n.showParent(e)})}},{key:"_startLoading",value:function(e,t){var n=this.options,i=this.chart;if("undefined"!=typeof i.dataset.inAjax&&"true"===i.dataset.inAjax)return!1;e.classList.add("hidden");var r=document.createElement("i");r.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),t.appendChild(r),this._addClass(Array.from(t.querySelectorAll(":scope > *:not(.spinner)")),"hazy"),i.dataset.inAjax=!0;var s=this.chartContainer.querySelector(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:""));return s&&(s.disabled=!0),!0}},{key:"_endLoading",value:function(e,t){var n=this.options;e.classList.remove("hidden"),t.querySelector(":scope > .spinner").remove(),this._removeClass(Array.from(t.querySelectorAll(":scope > .hazy")),"hazy"),this.chart.dataset.inAjax=!1;var i=this.chartContainer.querySelector(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:""));i&&(i.disabled=!1)}},{key:"_clickTopEdge",value:function(e){e.stopPropagation();var t=this,n=e.target,i=n.parentNode,r=this._getNodeState(i,"parent"),s=this.options;if(r.exist){var a=this._closest(i,function(e){return e.classList.contains("nodes")}),o=a.parentNode.firstChild.querySelector(".node");if(o.classList.contains("slide"))return;r.visible?(this.hideAncestorsSiblings(i),this._one(o,"transitionend",function(){this._isInAction(i)&&(this._switchVerticalArrow(n),this._switchHorizontalArrow(i))},this)):this.showParent(i)}else{var l=n.parentNode.id;this._startLoading(n,i)&&this._getJSON("function"==typeof s.ajaxURL.parent?s.ajaxURL.parent(i.dataset.source):s.ajaxURL.parent+l).then(function(e){"true"===t.chart.dataset.inAjax&&Object.keys(e).length&&t.addParent(i,e)}).catch(function(e){console.error("Failed to get parent node data.",e)}).finally(function(){t._endLoading(n,i)})}}},{key:"hideDescendants",value:function(e){var t=this,n=this._nextAll(e.parentNode.parentNode),i=[];n[2].querySelector(".spinner")&&(this.chart.dataset.inAjax=!1);var r=Array.from(n[2].querySelectorAll(".node")).filter(function(e){return t._isVisible(e)}),s=n[2].classList.contains("verticalNodes");s||(r.forEach(function(e){Array.prototype.push.apply(i,t._prevAll(t._closest(e,function(e){return e.classList.contains("nodes")}),".lines"))}),i=[].concat(_toConsumableArray(new Set(i))),this._css(i,"visibility","hidden")),this._one(r[0],"transitionend",function(a){this._removeClass(r,"slide"),s?t._addClass(n,"hidden"):(i.forEach(function(e){e.removeAttribute("style"),e.classList.add("hidden"),e.parentNode.lastChild.classList.add("hidden")}),this._addClass(Array.from(n[2].querySelectorAll(".verticalNodes")),"hidden")),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(r,"slide slide-up")}},{key:"showDescendants",value:function(e){var t=this,n=this,i=this._nextAll(e.parentNode.parentNode),r=[];this._removeClass(i,"hidden"),i.some(function(e){return e.classList.contains("verticalNodes")})?i.forEach(function(e){Array.prototype.push.apply(r,Array.from(e.querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}):Array.from(i[2].children).forEach(function(e){Array.prototype.push.apply(r,Array.from(e.querySelector("tr").querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}),this._repaint(r[0]),this._one(r[0],"transitionend",function(n){t._removeClass(r,"slide"),t._isInAction(e)&&t._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(r,"slide"),this._removeClass(r,"slide-up")}},{key:"_buildChildNode",value:function(e,t,n){var i=t.children||t.siblings;e.querySelector("td").setAttribute("colSpan",2*i.length),this.buildHierarchy(e,{children:i},0,n)}},{key:"addChildren",value:function(e,t){var n=this,i=this.options,r=0;this.chart.dataset.inEdit="addChildren",this._buildChildNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(++r===t.children.length){if(!e.querySelector(".bottomEdge")){var s=document.createElement("i");s.setAttribute("class","edge verticalEdge bottomEdge fa"),e.appendChild(s)}if(!e.querySelector(".symbol")){var a=document.createElement("i");a.setAttribute("class","fa "+i.parentNodeSymbol+" symbol"),e.querySelector(":scope > .title").appendChild(a)}n.showDescendants(e),n.chart.dataset.inEdit=""}})}},{key:"_clickBottomEdge",value:function(e){var t=this;e.stopPropagation();var n=this,i=this.options,r=e.target,s=r.parentNode,a=this._getNodeState(s,"children");if(a.exist){var o=this._closest(s,function(e){return"TR"===e.nodeName}).parentNode.children[3];if(Array.from(o.querySelectorAll(".node")).some(function(e){return t._isVisible(e)&&e.classList.contains("slide")}))return;a.visible?this.hideDescendants(s):this.showDescendants(s)}else{var l=r.parentNode.id;this._startLoading(r,s)&&this._getJSON("function"==typeof i.ajaxURL.children?i.ajaxURL.children(s.dataset.source):i.ajaxURL.children+l).then(function(e){"true"===n.chart.dataset.inAjax&&e.children.length&&n.addChildren(s,e)}).catch(function(e){console.error("Failed to get children nodes data",e)}).finally(function(){n._endLoading(r,s)})}}},{key:"_complementLine",value:function(e,t,n){var i=e.parentNode.parentNode.children;i[0].children[0].setAttribute("colspan",2*t),i[1].children[0].setAttribute("colspan",2*t);for(var r=0;r<n;r++){var s=document.createElement("td"),a=document.createElement("td");s.setAttribute("class","rightLine topLine"),s.innerHTML="&nbsp;",i[2].insertBefore(s,i[2].children[1]),a.setAttribute("class","leftLine topLine"),a.innerHTML="&nbsp;",i[2].insertBefore(a,i[2].children[1])}}},{key:"_buildSiblingNode",value:function(e,t,n){var i=this,r=this,s=t.siblings?t.siblings.length:t.children.length,a="TD"===e.parentNode.nodeName?this._closest(e,function(e){return"TR"===e.nodeName}).children.length:1,o=a+s,l=o>1?Math.floor(o/2-1):0;"TD"===e.parentNode.nodeName?!function(){var d=i._prevAll(e.parentNode.parentNode);d[0].remove(),d[1].remove();var c=0;r._buildChildNode.call(r,r._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}),t,function(){++c===s&&!function(){var t=Array.from(r._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}).lastChild.children);if(a>1)Array.from(e.parentNode.children).forEach(function(e){t[0].parentNode.insertBefore(e,t[0])}),e.parentNode.parentNode.remove(),r._complementLine(t[0],o,a),r._addClass(t,"hidden"),t.forEach(function(e){r._addClass(e.querySelectorAll(".node"),"slide-left")});else{var i=e.parentNode.parentNode;t[l].parentNode.insertBefore(e.parentNode,t[l+1]),i.remove(),r._complementLine(t[l],o,1),r._addClass(t,"hidden"),r._addClass(r._getDescElements(t.slice(0,l+1),".node"),"slide-right"),r._addClass(r._getDescElements(t.slice(l+1),".node"),"slide-left")}n()}()})}():!function(){var s=0;r.buildHierarchy.call(r,r.chart,t,0,function(){if(++s===o){var t=e.nextElementSibling.children[3].children[l],a=document.createElement("td");a.setAttribute("colspan",2),a.appendChild(e),t.parentNode.insertBefore(a,t.nextElementSibling),r._complementLine(t,o,1);var d=r._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0];d.classList.add("hidden"),r._addClass(Array.from(d.querySelectorAll(".node")),"slide-down");var c=i._siblings(e.parentNode);r._addClass(c,"hidden"),r._addClass(r._getDescElements(c.slice(0,l),".node"),"slide-right"),r._addClass(r._getDescElements(c.slice(l),".node"),"slide-left"),n()}})}()}},{key:"addSiblings",value:function(e,t){var n=this;this.chart.dataset.inEdit="addSiblings",this._buildSiblingNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(n._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).dataset.siblingsLoaded=!0,!e.querySelector(".leftEdge")){var t=document.createElement("i"),i=document.createElement("i");t.setAttribute("class","edge horizontalEdge rightEdge fa"),e.appendChild(t),i.setAttribute("class","edge horizontalEdge leftEdge fa"),e.appendChild(i)}n.showSiblings(e),n.chart.dataset.inEdit=""})}},{key:"_clickHorizontalEdge",value:function(e){var t=this;e.stopPropagation();var n=this,i=this.options,r=e.target,s=r.parentNode,a=this._getNodeState(s,"siblings");if(a.exist){var o=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode,l=this._siblings(o);if(l.some(function(e){var n=e.querySelector(".node");return t._isVisible(n)&&n.classList.contains("slide")}))return;if(i.toggleSiblingsResp){var d=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode.previousElementSibling,c=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode.nextElementSibling;r.classList.contains("leftEdge")?d.classList.contains("hidden")?this.showSiblings(s,"left"):this.hideSiblings(s,"left"):c.classList.contains("hidden")?this.showSiblings(s,"right"):this.hideSiblings(s,"right")}else a.visible?this.hideSiblings(s):this.showSiblings(s)}else{var h=r.parentNode.id,u=this._getNodeState(s,"parent").exist?"function"==typeof i.ajaxURL.siblings?i.ajaxURL.siblings(JSON.parse(s.dataset.source)):i.ajaxURL.siblings+h:"function"==typeof i.ajaxURL.families?i.ajaxURL.families(JSON.parse(s.dataset.source)):i.ajaxURL.families+h;this._startLoading(r,s)&&this._getJSON(u).then(function(e){"true"===n.chart.dataset.inAjax&&(e.siblings||e.children)&&n.addSiblings(s,e)}).catch(function(e){console.error("Failed to get sibling nodes data",e)}).finally(function(){n._endLoading(r,s)})}}},{key:"_clickToggleButton",value:function(e){var t=this,n=e.target,i=n.parentNode.nextElementSibling,r=i.querySelectorAll(".node"),s=i.children.map(function(e){return e.querySelector(".node")});if(!s.some(function(e){return e.classList.contains(".slide")}))if(n.classList.toggle("fa-plus-square"),n.classList.toggle("fa-minus-square"),r[0].classList.contains(".slide-up"))i.classList.remove("hidden"),this._repaint(s[0]),this._addClass(s,"slide"),this._removeClass(s,"slide-up"),s[0].addEventListener("transitionend",function(){t._removeClass(s,"slide")},{once:!0});else{this._addClass(r,"slide slide-up"),r[0].addEventListener("transitionend",function(){t._removeClass(r,"slide");var e=this._closest(r[0],function(e){return"ul"===e.nodeName});e.classList.add("hidden")},{once:!0});var a=r[0].querySelector(".toggleBtn").classList.remove("fa-minus-square");a.classList.add("fa-plus-square")}}},{key:"_dispatchClickEvent",value:function(e){var t=e.target.classList;t.contains("topEdge")?this._clickTopEdge(e):t.contains("rightEdge")||t.contains("leftEdge")?this._clickHorizontalEdge(e):t.contains("bottomEdge")?this._clickBottomEdge(e):t.contains("toggleBtn")?this._clickToggleButton(e):this._clickNode(e)}},{key:"_onDragStart",value:function(e){var t=e.target,n=this.options,i=/firefox/.test(window.navigator.userAgent.toLowerCase());if(i&&e.dataTransfer.setData("text/html","hack for firefox"),this.chart.style.transform){var r=void 0,s=void 0;document.querySelector(".ghost-node")?(r=this.chart.querySelector(":scope > .ghost-node"),s=r.children[0]):(r=document.createElementNS("http://www.w3.org/2000/svg","svg"),r.classList.add("ghost-node"),s=document.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(s),this.chart.appendChild(r));var a=this.chart.style.transform.split(","),o=Math.abs(window.parseFloat("t2b"===n.direction||"b2t"===n.direction?a[0].slice(a[0].indexOf("(")+1):a[1]));r.setAttribute("width",t.offsetWidth),r.setAttribute("height",t.offsetHeight),s.setAttribute("x",5*o),s.setAttribute("y",5*o),s.setAttribute("width",120*o),s.setAttribute("height",40*o),s.setAttribute("rx",4*o),s.setAttribute("ry",4*o),s.setAttribute("stroke-width",1*o);var l=e.offsetX*o,d=e.offsetY*o;if("l2r"===n.direction?(l=e.offsetY*o,d=e.offsetX*o):"r2l"===n.direction?(l=t.offsetWidth-e.offsetY*o,d=e.offsetX*o):"b2t"===n.direction&&(l=t.offsetWidth-e.offsetX*o,d=t.offsetHeight-e.offsetY*o),i){var c=document.createElement("img");c.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),e.dataTransfer.setDragImage(c,l,d),s.setAttribute("fill","rgb(255, 255, 255)"),s.setAttribute("stroke","rgb(191, 0, 0)")}else e.dataTransfer.setDragImage(r,l,d)}var h=e.target,u=this._closest(h,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"),f=Array.from(this._closest(h,function(e){return"TABLE"===e.nodeName}).querySelectorAll(".node"));this.dragged=h,Array.from(this.chart.querySelectorAll(".node")).forEach(function(e){f.includes(e)||(n.dropCriteria?n.dropCriteria(h,u,e)&&e.classList.add("allowedDrop"):e.classList.add("allowedDrop"))})}},{key:"_onDragOver",value:function(e){e.preventDefault();var t=e.currentTarget;t.classList.contains("allowedDrop")||(e.dataTransfer.dropEffect="none")}},{key:"_onDragEnd",value:function(e){Array.from(this.chart.querySelectorAll(".allowedDrop")).forEach(function(e){e.classList.remove("allowedDrop")})}},{key:"_onDrop",value:function(e){var t=e.currentTarget,n=this.chart,i=this.dragged,r=this._closest(i,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].children[0];if(this._removeClass(Array.from(n.querySelectorAll(".allowedDrop")),"allowedDrop"),t.parentNode.parentNode.nextElementSibling){var s=window.parseInt(t.parentNode.colSpan)+2;if(t.parentNode.setAttribute("colspan",s),t.parentNode.parentNode.nextElementSibling.children[0].setAttribute("colspan",s),!i.querySelector(".horizontalEdge")){var a=document.createElement("i"),o=document.createElement("i");a.setAttribute("class","edge horizontalEdge rightEdge fa"),i.appendChild(a),o.setAttribute("class","edge horizontalEdge leftEdge fa"),i.appendChild(o)}var l=t.parentNode.parentNode.nextElementSibling.nextElementSibling,d=document.createElement("td"),c=document.createElement("td");d.setAttribute("class","leftLine topLine"),d.innerHTML="&nbsp;",l.insertBefore(d,l.children[1]),c.setAttribute("class","rightLine topLine"),c.innerHTML="&nbsp;",l.insertBefore(c,l.children[2]),l.nextElementSibling.appendChild(this._closest(i,function(e){return"TABLE"===e.nodeName}).parentNode);var h=this._siblings(this._closest(i,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")});if(1===h.length){var u=document.createElement("i"),f=document.createElement("i");u.setAttribute("class","edge horizontalEdge rightEdge fa"),h[0].appendChild(u),f.setAttribute("class","edge horizontalEdge leftEdge fa"),h[0].appendChild(f)}}else{var p=document.createElement("i");p.setAttribute("class","edge verticalEdge bottomEdge fa"),t.appendChild(p),t.parentNode.setAttribute("colspan",2);var v=this._closest(t,function(e){return"TABLE"===e.nodeName}),g=document.createElement("tr"),m=document.createElement("tr"),y=document.createElement("tr");g.setAttribute("class","lines"),g.innerHTML='<td colspan="2"><div class="downLine"></div></td>',v.appendChild(g),m.setAttribute("class","lines"),m.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',v.appendChild(m),y.setAttribute("class","nodes"),v.appendChild(y),Array.from(i.querySelectorAll(".horizontalEdge")).forEach(function(e){i.removeChild(e)});var b=this._closest(i,function(e){return"TABLE"===e.nodeName}).parentNode;y.appendChild(b)}var _=window.parseInt(r.colSpan);if(_>2){r.setAttribute("colspan",_-2),r.parentNode.nextElementSibling.children[0].setAttribute("colspan",_-2);var E=r.parentNode.nextElementSibling.nextElementSibling;E.children[1].remove(),E.children[1].remove();var L=Array.from(r.parentNode.parentNode.children[3].children).map(function(e){return e.querySelector(".node")});1===L.length&&(L[0].querySelector(".leftEdge").remove(),L[0].querySelector(".rightEdge").remove())}else r.removeAttribute("colspan"),r.querySelector(".node").removeChild(r.querySelector(".bottomEdge")),Array.from(r.parentNode.parentNode.children).slice(1).forEach(function(e){return e.remove()});var A=new CustomEvent("nodedropped.orgchart",{detail:{draggedNode:i,dragZone:r.children[0],dropZone:t}});n.dispatchEvent(A)}},{key:"_createNode",value:function(e,t){var n=this,i=this.options;return new Promise(function(r,s){if(e.children){var a=!0,o=!1,l=void 0;try{for(var d,c=e.children[Symbol.iterator]();!(a=(d=c.next()).done);a=!0){var h=d.value;h.parentId=e.id}}catch(e){o=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw l}}}var u=document.createElement("div");delete e.children,u.dataset.source=JSON.stringify(e),e[i.nodeId]&&(u.id=e[i.nodeId]);var f=n.chart.dataset.inEdit,p=void 0;p=f?"addChildren"===f?" slide-up":"":t>=i.depth?" slide-up":"",u.setAttribute("class","node "+(e.className||"")+p),i.draggable&&u.setAttribute("draggable",!0),e.parentId&&u.setAttribute("data-parent",e.parentId),u.innerHTML='\n        <div class="title">'+e[i.nodeTitle]+"</div>\n        "+(i.nodeContent?'<div class="content">'+e[i.nodeContent]+"</div>":"")+"\n      ";var v=e.relationship||"";if(i.verticalDepth&&t+2>i.verticalDepth){if(t+1>=i.verticalDepth&&Number(v.substr(2,1))){var g=document.createElement("i");g.setAttribute("class","toggleBtn fa fa-minus-square"),u.appendChild(g)}}else{if(Number(v.substr(0,1))){var m=document.createElement("i");m.setAttribute("class","edge verticalEdge topEdge fa"),u.appendChild(m)}if(Number(v.substr(1,1))){var y=document.createElement("i"),b=document.createElement("i");y.setAttribute("class","edge horizontalEdge rightEdge fa"),u.appendChild(y),b.setAttribute("class","edge horizontalEdge leftEdge fa"),
u.appendChild(b)}if(Number(v.substr(2,1))){var _=document.createElement("i"),E=document.createElement("i"),L=u.querySelector(":scope > .title");_.setAttribute("class","edge verticalEdge bottomEdge fa"),u.appendChild(_),E.setAttribute("class","fa "+i.parentNodeSymbol+" symbol"),L.insertBefore(E,L.children[0])}}u.addEventListener("mouseenter",n._hoverNode.bind(n)),u.addEventListener("mouseleave",n._hoverNode.bind(n)),u.addEventListener("click",n._dispatchClickEvent.bind(n)),i.draggable&&(u.addEventListener("dragstart",n._onDragStart.bind(n)),u.addEventListener("dragover",n._onDragOver.bind(n)),u.addEventListener("dragend",n._onDragEnd.bind(n)),u.addEventListener("drop",n._onDrop.bind(n))),i.createNode&&i.createNode(u,e),r(u)})}},{key:"buildHierarchy",value:function(e,t,n,i){var r=this,s=this.options,a=void 0,o=t.children,l=s.verticalDepth&&n+1>=s.verticalDepth;Object.keys(t).length>1&&(a=l?e:document.createElement("table"),l||e.appendChild(a),this._createNode(t,n).then(function(e){if(l)a.appendChild(e);else{var t=document.createElement("tr");t.innerHTML="\n            <td "+(o?'colspan="'+2*o.length+'"':"")+">\n            </td>\n          ",t.children[0].appendChild(e),a.insertBefore(t,a.children[0]?a.children[0]:null)}i&&i()}).catch(function(e){console.error("Failed to creat node",e)})),o&&!function(){1===Object.keys(t).length&&(a=e);var l=void 0,d=s.verticalDepth&&n+2>=s.verticalDepth,c=r.chart.dataset.inEdit;if(l=c?"addSiblings"===c?"":" hidden":n+1>=s.depth?" hidden":"",!d){var h=document.createElement("tr");h.setAttribute("class","lines"+l),h.innerHTML='\n          <td colspan="'+2*o.length+'">\n            <div class="downLine"></div>\n          </td>\n        ',a.appendChild(h)}var u=document.createElement("tr");u.setAttribute("class","lines"+l),u.innerHTML='\n        <td class="rightLine">&nbsp;</td>\n        '+o.slice(1).map(function(){return'\n          <td class="leftLine topLine">&nbsp;</td>\n          <td class="rightLine topLine">&nbsp;</td>\n          '}).join("")+'\n        <td class="leftLine">&nbsp;</td>\n      ';var f=void 0;if(d)if(f=document.createElement("<ul>"),n+2===s.verticalDepth){var p=document.createElement("tr");p.setAttribute("class","verticalNodes"),p.innerHTML="<td></td>",p.firstChild.appendChild(f)}else a.appendChild(f);else f=document.createElement("tr"),f.setAttribute("class","nodes"+l),a.appendChild(u),a.appendChild(f);o.forEach(function(e){var t=void 0;d?t=document.createElement("li"):(t=document.createElement("td"),t.setAttribute("colspan",2)),f.appendChild(t),r.buildHierarchy(t,e,n+1,i)})}()}},{key:"_clickChart",value:function(e){var t=this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")});!t&&this.chart.querySelector(".node.focused")&&this.chart.querySelector(".node.focused").classList.remove("focused")}},{key:"_clickExportButton",value:function(){var e=this.options,t=this.chartContainer,n=t.querySelector(":scope > .mask"),i=t.querySelector(".orgchart:not(.hidden)"),r="l2r"===e.direction||"r2l"===e.direction;n?n.classList.remove("hidden"):(n=document.createElement("div"),n.setAttribute("class","mask"),n.innerHTML='<i class="fa fa-circle-o-notch fa-spin spinner"></i>',t.appendChild(n)),t.classList.add("canvasContainer"),window.html2canvas(i,{width:r?i.clientHeight:i.clientWidth,height:r?i.clientWidth:i.clientHeight,onclone:function(e){var t=e.querySelector(".canvasContainer");t.style.overflow="visible",t.querySelector(".orgchart:not(.hidden)").transform=""}}).then(function(e){var n=t.querySelector(".oc-download-btn");t.querySelector(".mask").classList.add("hidden"),n.setAttribute("href",e.toDataURL()),n.click()}).catch(function(e){console.error("Failed to export the curent orgchart!",e)}).finally(function(){t.classList.remove("canvasContainer")})}},{key:"_loopChart",value:function(e){var t=this,n={id:e.querySelector(".node").id};return e.children[3]&&Array.from(e.children[3].children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._loopChart(e.firstChild))}),n}},{key:"getHierarchy",value:function(){return this.chart.querySelector(".node").id?this._loopChart(this.chart.querySelector("table")):"Error: Nodes of orghcart to be exported must have id attribute!"}},{key:"_onPanStart",value:function(e){var t=e.currentTarget;if(this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")})||e.touches&&e.touches.length>1)return void(t.dataset.panning=!1);t.style.cursor="move",t.dataset.panning=!0;var n=0,i=0,r=window.getComputedStyle(t).transform;if("none"!==r){var s=r.split(",");r.includes("3d")?(n=Number.parseInt(s[12],10),i=Number.parseInt(s[13],10)):(n=Number.parseInt(s[4],10),i=Number.parseInt(s[5],10))}var a=0,o=0;if(e.targetTouches){if(1===e.targetTouches.length)a=e.targetTouches[0].pageX-n,o=e.targetTouches[0].pageY-i;else if(e.targetTouches.length>1)return}else a=e.pageX-n,o=e.pageY-i;t.dataset.panStart=JSON.stringify({startX:a,startY:o}),t.addEventListener("mousemove",this._onPanning.bind(this)),t.addEventListener("touchmove",this._onPanning.bind(this))}},{key:"_onPanning",value:function(e){var t=e.currentTarget;if("false"!==t.dataset.panning){var n=0,i=0,r=JSON.parse(t.dataset.panStart),s=r.startX,a=r.startY;if(e.targetTouches){if(1===e.targetTouches.length)n=e.targetTouches[0].pageX-s,i=e.targetTouches[0].pageY-a;else if(e.targetTouches.length>1)return}else n=e.pageX-s,i=e.pageY-a;var o=window.getComputedStyle(t).transform;if("none"===o)o.includes("3d")?t.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+i+", 0, 1)":t.style.transform="matrix(1, 0, 0, 1, "+n+", "+i+")";else{var l=o.split(",");o.includes("3d")?(l[12]=n,l[13]=i):(l[4]=n,l[5]=i+")"),t.style.transform=l.join(",")}}}},{key:"_onPanEnd",value:function(e){var t=this.chart;"true"===t.dataset.panning&&(t.dataset.panning=!1,t.style.cursor="default",document.body.removeEventListener("mousemove",this._onPanning),document.body.removeEventListener("touchmove",this._onPanning))}},{key:"_setChartScale",value:function(e,t){var n=window.getComputedStyle(e).transform;if("none"===n)e.style.transform="scale("+t+","+t+")";else{var i=n.split(",");n.includes("3d")?e.style.transform=n+" scale3d("+t+","+t+", 1)":(i[0]="matrix("+t,i[3]=t,e.style.transform=n+" scale("+t+","+t+")")}e.dataset.scale=t}},{key:"_onWheeling",value:function(e){e.preventDefault();var t=e.deltaY>0?.8:1.2;this._setChartScale(this.chart,t)}},{key:"_getPinchDist",value:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))}},{key:"_onTouchStart",value:function(e){var t=this.chart;if(e.touches&&2===e.touches.length){var n=this._getPinchDist(e);t.dataset.pinching=!0,t.dataset.pinchDistStart=n}}},{key:"_onTouchMove",value:function(e){var t=this.chart;if(t.dataset.pinching){var n=this._getPinchDist(e);t.dataset.pinchDistEnd=n}}},{key:"_onTouchEnd",value:function(e){var t=this.chart;if(t.dataset.pinching){t.dataset.pinching=!1;var n=t.dataset.pinchDistEnd-t.dataset.pinchDistStart;n>0?this._setChartScale(t,1):n<0&&this._setChartScale(t,-1)}}},{key:"name",get:function(){return this._name}}]),e}();exports.default=OrgChart;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0LmpzIl0sIm5hbWVzIjpbIk9yZ0NoYXJ0Iiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIlByb21pc2UiLCJwcm90b3R5cGUiLCJmaW5hbGx5IiwiY2FsbGJhY2siLCJQIiwiY29uc3RydWN0b3IiLCJ0aGVuIiwidmFsdWUiLCJyZXNvbHZlIiwicmVhc29uIiwidGhhdCIsImRlZmF1bHRPcHRpb25zIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0RmlsZW5hbWUiLCJwYXJlbnROb2RlU3ltYm9sIiwiZHJhZ2dhYmxlIiwiZGlyZWN0aW9uIiwicGFuIiwiem9vbSIsIm9wdHMiLCJPYmplY3QiLCJkYXRhIiwiY2hhcnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjaGFydENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhc2V0IiwiSlNPTiIsInN0cmluZ2lmeSIsInNldEF0dHJpYnV0ZSIsIl90eXBlb2YiLCJidWlsZEhpZXJhcmNoeSIsImFqYXhVUkwiLCJfYXR0YWNoUmVsIiwic3RhcnRzV2l0aCIsIl9idWlsZEpzb25EUyIsImNoaWxkcmVuIiwic3Bpbm5lciIsImFwcGVuZENoaWxkIiwicmVzcCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwicmVtb3ZlQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiYmluZCIsImV4cG9ydEJ1dHRvbiIsImV4cG9ydEJ0biIsImRvd25sb2FkQnRuIiwiaW5uZXJIVE1MIiwiX2NsaWNrRXhwb3J0QnV0dG9uIiwiX2dldEpTT04iLCJzdHlsZSIsIm92ZXJmbG93IiwiX29uUGFuU3RhcnQiLCJib2R5IiwiX29uUGFuRW5kIiwiX2NsaWNrQ2hhcnQiLCJfb25XaGVlbGluZyIsIl9vblRvdWNoU3RhcnQiLCJfb25Ub3VjaE1vdmUiLCJfb25Ub3VjaEVuZCIsImVsIiwiX2Nsb3Nlc3QiLCJwYXJlbnROb2RlIiwiZm4iLCJmaWx0ZXIiLCJleHByIiwibWF0Y2hlcyIsInByZXZTaWIiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwic2licyIsInB1c2giLCJBcnJheSIsIm5leHRTaWIiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJlbGVtZW50cyIsImNsYXNzTmFtZXMiLCJzcGxpdCIsImZvckVhY2giLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbmRleE9mIiwicmVtb3ZlIiwicHJvcCIsInZhbCIsImF0dHIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0eXBlIiwibGlzdGVuZXIiLCJzZWxmIiwib25lIiwiZXZlbnQiLCJhbmNlc3RvcnMiLCJzZWxlY3RvciIsInJlc3VsdHMiLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ1cmwiLCJyZWplY3QiLCJoYW5kbGVyIiwic3RhdHVzIiwicGFyc2UiLCJyZXNwb25zZSIsIkVycm9yIiwieGhyIiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJsaSIsIl90aGlzIiwic3ViT2JqIiwibmFtZSIsImZpcnN0Q2hpbGQiLCJ0ZXh0Q29udGVudCIsInRyaW0iLCJyZWxhdGlvbnNoaXAiLCJsZW5ndGgiLCJpZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmcm9tIiwiZmxhZ3MiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIm5leHQiLCJkb25lIiwiaXRlbSIsIm5vZGUiLCJvZmZzZXRXaWR0aCIsInJlbGF0aW9uIiwiX3RoaXMyIiwiY3JpdGVyaWEiLCJzdGF0ZSIsImV4aXN0IiwidmlzaWJsZSIsImNvbnRhaW5zIiwiX2lzVmlzaWJsZSIsIm5vZGVOYW1lIiwiX3NpYmxpbmdzIiwibGFzdENoaWxkIiwibWFwIiwibGVmdEVkZ2UiLCJyaWdodEVkZ2UiLCJ0ZW1wIiwic2libGluZ3NMb2FkZWQiLCJzaWJzVmlzaWJsZSIsInNvbWUiLCJ0b2dnbGUiLCJ0YXJnZXQiLCJmbGFnIiwidG9wRWRnZSIsImJvdHRvbUVkZ2UiLCJfZ2V0Tm9kZVN0YXRlIiwiY2xpY2tlZE5vZGUiLCJjdXJyZW50VGFyZ2V0IiwiZm9jdXNlZE5vZGUiLCJjdXJyZW50Um9vdCIsIm5vZGVEYXRhIiwidGFibGUiLCJfY3JlYXRlTm9kZSIsIm5vZGVEaXYiLCJwYXJlbnRUciIsInN1cGVyaW9yTGluZSIsImluZmVyaW9yTGluZSIsImNoaWxkcmVuVHIiLCJpbnNlcnRCZWZvcmUiLCJhcnJvdyIsInNsaWNlIiwicGFyZW50IiwiX29uZSIsInNpYmxpbmdzIiwiX3ByZXZBbGwiLCJfbmV4dEFsbCIsIl9yZW1vdmVDbGFzcyIsInVwcGVyTGV2ZWwiLCJzaWIiLCJfdGhpczQiLCJfc3dpdGNoSG9yaXpvbnRhbEFycm93IiwiX3RoaXM1Iiwibm9kZUNvbnRhaW5lciIsImluQWpheCIsInByZVNpYnMiLCJhbmltYXRlZE5vZGVzIiwibGluZXMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsInVuZGVmaW5lZCIsIl9zdGVwMiIsIl9pdGVyYXRvcjIiLCJyZXR1cm4iLCJTZXQiLCJsaW5lIiwidmlzaWJpbGl0eSIsIl90aGlzNiIsIl9zd2l0Y2hWZXJ0aWNhbEFycm93IiwiX3JlcGFpbnQiLCJzb21lTGluZXMiLCJfYWRkQ2xhc3MiLCJoaWRlU2libGluZ3MiLCJfY3NzIiwiZ3JhbmRmYXRoZXJWaXNpYmxlIiwiaGlkZUFuY2VzdG9yc1NpYmxpbmdzIiwiX2J1aWxkUGFyZW50Tm9kZSIsImRpc2FibGVkIiwic3RvcFByb3BhZ2F0aW9uIiwicGFyZW50U3RhdGUiLCJfaXNJbkFjdGlvbiIsInNob3dQYXJlbnQiLCJfc3RhcnRMb2FkaW5nIiwic291cmNlIiwia2V5cyIsImFkZFBhcmVudCIsImlzVmVydGljYWxEZXNjIiwiZGVzYyIsImRlc2NlbmRhbnRzIiwiX3JlbW92ZUF0dHIiLCJfdGhpczciLCJhcHBlbmRUbyIsImNvdW50IiwiaW5FZGl0IiwiX2J1aWxkQ2hpbGROb2RlIiwic3ltYm9sIiwic2hvd0Rlc2NlbmRhbnRzIiwiX3RoaXM4IiwiY2hpbGRyZW5TdGF0ZSIsImhpZGVEZXNjZW5kYW50cyIsIl9lbmRMb2FkaW5nIiwib25lU2libGluZyIsInNpYmxpbmdDb3VudCIsImkiLCJleGlzdGluZ1NpYmxpZ0NvdW50IiwicmlnaHRMaW5lIiwibGVmdExpbmUiLCJfdGhpczkiLCJuZXdTaWJsaW5nQ291bnQiLCJub2RlQ2hhcnQiLCJpbnNlcnRQb3N0aW9uIiwiTWF0aCIsImZsb29yIiwiY2hpbGRDb3VudCIsInNpYmxpbmdUZHMiLCJfZ2V0RGVzY0VsZW1lbnRzIiwibm9kZUNvdW50IiwidGQiLCJfY29tcGxlbWVudExpbmUiLCJ0ZW1wMiIsInRlbXAzIiwiX2J1aWxkU2libGluZ05vZGUiLCJjYWxsIiwic2hvd1NpYmxpbmdzIiwiX3RoaXMxMCIsImhFZGdlIiwic2libGluZ3NTdGF0ZSIsImZhbWlsaWVzIiwiYWRkU2libGluZ3MiLCJ0b2dnbGVCdG4iLCJkZXNjV3JhcHBlciIsImFkZENoaWxkcmVuIiwib25jZSIsInVsIiwiX2NsaWNrVG9wRWRnZSIsIl9jbGlja0hvcml6b250YWxFZGdlIiwiX2NsaWNrQm90dG9tRWRnZSIsIl9jbGlja05vZGUiLCJpc0ZpcmVmb3giLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJnaG9zdE5vZGUiLCJub2RlQ292ZXIiLCJjcmVhdGVFbGVtZW50TlMiLCJzY2FsZSIsImFicyIsIndpbmRvdyIsInBhcnNlRmxvYXQiLCJ0cmFuc1ZhbHVlcyIsInhPZmZzZXQiLCJvZmZzZXRZIiwieU9mZnNldCIsIm9mZnNldFgiLCJvZmZzZXRIZWlnaHQiLCJnaG9zdE5vZGVXcmFwcGVyIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwiZHJhZ2dlZCIsImRyYWdab25lIiwiZHJhZ0hpZXIiLCJkcm9wWm9uZSIsImRyb3BDb2xzcGFuIiwiY29sU3BhbiIsImxlZnRsaW5lIiwicmlnaHRsaW5lIiwiZHJvcFNpYnMiLCJ1cHBlclRyIiwibG93ZXJUciIsIm5vZGVUciIsImRyYWdnZWRUZCIsImRyYWdDb2xTcGFuIiwiZHJhZ1NpYnMiLCJ0ciIsImRldGFpbCIsImRpc3BhdGNoRXZlbnQiLCJsZXZlbCIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsImNoaWxkIiwicGFyZW50SWQiLCJpc0hpZGRlbiIsIl9jbGlja1RvZ2dsZUJ1dHRvbiIsIm5vZGVUaXRsZSIsIm5vZGVDb250ZW50IiwidmVydGljYWxEZXB0aCIsIk51bWJlciIsInN1YnN0ciIsInRpdGxlIiwiX2hvdmVyTm9kZSIsIl9kaXNwYXRjaENsaWNrRXZlbnQiLCJfb25EcmFnRW5kIiwiX29uRHJvcCIsImNyZWF0ZU5vZGUiLCJub2RlV3JhcHBlciIsImNoaWxkTm9kZXMiLCJpc1ZlcnRpY2FsTm9kZSIsImRyb3BDcml0ZXJpYSIsImlzVmVydGljYWxMYXllciIsImxpbmVMYXllciIsIm5vZGVMYXllciIsInBhcnNlSW50Iiwibm9kZUNlbGwiLCJjbG9zZXN0Tm9kZSIsIm1hc2siLCJodG1sMmNhbnZhcyIsInNvdXJjZUNoYXJ0IiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJvbmNsb25lIiwiY2xvbmVEb2MiLCJjYW52YXNDb250YWluZXIiLCJ0cmFuc2Zvcm0iLCJjYW52YXMiLCJjbGljayIsIl90aGlzMTEiLCJjdXN0b21FIiwiX2xvb3BDaGFydCIsInRvdWNoZXMiLCJwYW5uaW5nIiwiY3Vyc29yIiwibGFzdFgiLCJsYXN0WSIsImxhc3RUZiIsImdldENvbXB1dGVkU3R5bGUiLCJpbmNsdWRlcyIsInN0YXJ0WSIsInRhcmdldFRvdWNoZXMiLCJzdGFydFgiLCJwYWdlWCIsInBhZ2VZIiwiX29uUGFubmluZyIsIm5ld1giLCJuZXdZIiwicGFuU3RhcnQiLCJtYXRyaXgiLCJqb2luIiwibmV3U2NhbGUiLCJfc2V0Q2hhcnRTY2FsZSIsInNxcnQiLCJjbGllbnRYIiwiY2xpZW50WSIsImRpc3QiLCJfZ2V0UGluY2hEaXN0IiwicGluY2hEaXN0U3RhcnQiLCJwaW5jaGluZyIsImRpZmYiLCJwaW5jaERpc3RFbmQiXSwibWFwcGluZ3MiOiIrd0JBQXFCQSxvQkFDbkIsUUFBQUEsR0FBWUMsR0FBU0MsZ0JBQUFDLEtBQUFILEdBQ25CRyxLQUFLQyxNQUFRLFdBQ2JDLFFBQVFDLFVBQVVDLFFBQVUsU0FBVUMsR0FDcEMsR0FBSUMsR0FBSU4sS0FBS08sV0FFYixPQUFPUCxNQUFLUSxLQUNWLFNBQUFDLEdBQUEsTUFBU0gsR0FBRUksUUFBUUwsS0FBWUcsS0FBSyxXQUFBLE1BQU1DLE1BQzFDLFNBQUFFLEdBQUEsTUFBVUwsR0FBRUksUUFBUUwsS0FBWUcsS0FBSyxXQUFRLEtBQU1HLE9BSXZELElBQUlDLEdBQU9aLEtBQ1RhLEdBYmVoQixVQWNBLE9BYm5CaUIsT0FBQSxLQUFxQkMsb0JBQUEsRUFnQmZDLE1BQVMsSUFmYkMsV0FBYSxHQUNiZixjQUFrQkUsRUFDaEJjLGVBQWFYLFdBaUJYWSxpQkFBb0IsV0FmdEJDLFdBQVlaLEVBQ1ZhLFVBQVdYLE1BQXlCWSxLQUFBLEVBQUFDLE1BQXBDLEdBQ0FDLEVBQUFDLE9BQVlmLE9BQVFMLEVBQWlCUCxHQUFRNEIsRUFBQUYsRUFBTWIsS0FBU2dCLEVBQTVEQyxTQUFBQyxjQUFBLE9BQUFDLEVBRkZGLFNBQUFHLGNBQUFQLEVBQUFNLGVBWUUsSUFjSjlCLEtBQUtGLFFBQVUwQixRQXBCWFosTUFBT2QsUUFBWDRCLEtBQUExQixLQUNFYSxNQUFBQSxFQUNFYixLQUFBOEIsZUFEZUEsRUFFZkgsRUFBQUssUUFBVWxDLFFBRkttQyxLQUFBQyxVQUFBVixHQUdmRyxFQUFBUSxhQUFBLFFBQXNCLFlBSFAsS0FBQVgsRUFBQVAsV0FBQSxJQUFBTyxFQUFBUCxXQUFBLEtB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QUEsR0FBckIsR0FFRmpWLE1BQUE2WCxlQUFBN1gsS0FBaUIwSyxNQUFVb0oseUNBR3ZCbUIsR0FDRCxNQUZEdEYsTUFBQW1JLE1BRU0xUixFQUFBcVEsUUFBQSxHQUFBc0IsUUFBQTNSLEVBQUFxUSxRQUFBLEdBQUFzQixVQUNKM1IsRUFBQXFRLFFBQVM3VSxHQUFBQSxRQUFTQyxFQUFBQSxRQUFULEdBQVRrVyxVQXNSSDNSLEVBQU1xUSxRQUFRLEdBQUd1QixRQUFVNVIsRUFBTXFRLFFBQVEsR0FBR3VCLFVBcFJ6Q3JFLEVBQUFBLFFBQUduUSxHQUFId1UsUUFBQTVSLEVBQUFxUSxRQUFBLEdBQ1F2QixnREFJUkQsR0FDRCxHQUFBdFQsR0FBQTNCLEtBQUEyQixLQUVDdEIsSUFBQUEsRUFBQUEsU0FBQUEsSUFBQUEsRUFBQUEsUUFBQUEsT0FBQUEsQ0FDRCxHQUFBNFgsR0FBQWpZLEtBQUFrWSxjQUFBOVIsRUFHRHBELEdBQUFBLFFBQVFDLFVBQU0sRUFDZnRCLEVBcEJESyxRQUFBbVcsZUFBQUYsd0NBdUJFL0MsR0FBWSxHQUFBdlQsR0FBQTNCLEtBQUEyQixLQUM0QixJQUFBQSxFQUFBSyxRQUFBb1csU0FBQSxDQUN4Q25ELEdBQUFBLEdBQUFBLEtBQUFBLGNBQUE3TyxFQUVGekUsR0FBQUssUUFBSW9TLGFBQUo2RCx1Q0FzUlE3UixHQWxSUixHQUFBekUsR0FBSThNLEtBQUo5TSxLQUVDLElBQUFBLEVBRkRLLFFBRU9vVyxTQUFBLENBQ0xoRSxFQUFBQSxRQUFBQSxVQUFtQixDQUNwQixJQUFBaUUsR0FBQTFXLEVBQUFLLFFBQUFzVyxhQUFBM1csRUFBQUssUUFBQW1XLGNBRURFLEdBQUEsRUFDQXJZLEtBQUE2WCxlQUFLeEMsRUFBaUIsR0FDaEIxQixFQUFLL1IsR0FvUlQ1QixLQUFLNlgsZUFBZWxXLEdBQU8saUNBcm5EOUIsTUFBQTNCLE1BQUFDLCtCQTFFZ0JKIiwiZmlsZSI6Im9yZ2NoYXJ0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZ0NoYXJ0IHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX25hbWUgPSAnT3JnQ2hhcnQnO1xuICAgIFByb21pc2UucHJvdG90eXBlLmZpbmFsbHkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIGxldCBQID0gdGhpcy5jb25zdHJ1Y3RvcjtcblxuICAgICAgcmV0dXJuIHRoaXMudGhlbihcbiAgICAgICAgdmFsdWUgPT4gUC5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oKCkgPT4gdmFsdWUpLFxuICAgICAgICByZWFzb24gPT4gUC5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oKCkgPT4geyB0aHJvdyByZWFzb247IH0pXG4gICAgICApO1xuICAgIH07XG5cbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgJ25vZGVUaXRsZSc6ICduYW1lJyxcbiAgICAgICAgJ25vZGVJZCc6ICdpZCcsXG4gICAgICAgICd0b2dnbGVTaWJsaW5nc1Jlc3AnOiBmYWxzZSxcbiAgICAgICAgJ2RlcHRoJzogOTk5LFxuICAgICAgICAnY2hhcnRDbGFzcyc6ICcnLFxuICAgICAgICAnZXhwb3J0QnV0dG9uJzogZmFsc2UsXG4gICAgICAgICdleHBvcnRGaWxlbmFtZSc6ICdPcmdDaGFydCcsXG4gICAgICAgICdwYXJlbnROb2RlU3ltYm9sJzogJ2ZhLXVzZXJzJyxcbiAgICAgICAgJ2RyYWdnYWJsZSc6IGZhbHNlLFxuICAgICAgICAnZGlyZWN0aW9uJzogJ3QyYicsXG4gICAgICAgICdwYW4nOiBmYWxzZSxcbiAgICAgICAgJ3pvb20nOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIG9wdHMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKSxcbiAgICAgIGRhdGEgPSBvcHRzLmRhdGEsXG4gICAgICBjaGFydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgY2hhcnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdHMuY2hhcnRDb250YWluZXIpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0cztcbiAgICBkZWxldGUgdGhpcy5vcHRpb25zLmRhdGE7XG4gICAgdGhpcy5jaGFydCA9IGNoYXJ0O1xuICAgIHRoaXMuY2hhcnRDb250YWluZXIgPSBjaGFydENvbnRhaW5lcjtcbiAgICBjaGFydC5kYXRhc2V0Lm9wdGlvbnMgPSBKU09OLnN0cmluZ2lmeShvcHRzKTtcbiAgICBjaGFydC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ29yZ2NoYXJ0JyArIChvcHRzLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgb3B0cy5jaGFydENsYXNzIDogJycpICtcbiAgICAgIChvcHRzLmRpcmVjdGlvbiAhPT0gJ3QyYicgPyAnICcgKyBvcHRzLmRpcmVjdGlvbiA6ICcnKSk7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JykgeyAvLyBsb2NhbCBqc29uIGRhdGFzb3VyY2VcbiAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoY2hhcnQsIG9wdHMuYWpheFVSTCA/IGRhdGEgOiB0aGlzLl9hdHRhY2hSZWwoZGF0YSwgJzAwJyksIDApO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICYmIGRhdGEuc3RhcnRzV2l0aCgnIycpKSB7IC8vIHVsIGRhdGFzb3VyY2VcbiAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoY2hhcnQsIHRoaXMuX2J1aWxkSnNvbkRTKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YSkuY2hpbGRyZW5bMF0pLCAwKTtcbiAgICB9IGVsc2UgeyAvLyBhamF4IGRhdGFzb3VyY2VcbiAgICAgIGxldCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICBzcGlubmVyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyJyk7XG4gICAgICBjaGFydC5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICAgIHRoaXMuX2dldEpTT04oZGF0YSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkoY2hhcnQsIG9wdHMuYWpheFVSTCA/IHJlc3AgOiB0aGF0Ll9hdHRhY2hSZWwocmVzcCwgJzAwJyksIDApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ZhaWxlZCB0byBmZXRjaCBkYXRhc291cmNlIGZvciBvcmdjaGFydCcsIGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgc3Bpbm5lciA9IGNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5zcGlubmVyJyk7XG5cbiAgICAgICAgc3Bpbm5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNwaW5uZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNoYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xpY2tDaGFydC5iaW5kKHRoaXMpKTtcbiAgICAvLyBhcHBlbmQgdGhlIGV4cG9ydCBidXR0b24gdG8gdGhlIGNoYXJ0LWNvbnRhaW5lclxuICAgIGlmIChvcHRzLmV4cG9ydEJ1dHRvbiAmJiAhY2hhcnRDb250YWluZXIucXVlcnlTZWxlY3RvcignLm9jLWV4cG9ydC1idG4nKSkge1xuICAgICAgbGV0IGV4cG9ydEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpLFxuICAgICAgICBkb3dubG9hZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblxuICAgICAgZXhwb3J0QnRuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnb2MtZXhwb3J0LWJ0bicgKyAob3B0cy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIG9wdHMuY2hhcnRDbGFzcyA6ICcnKSk7XG4gICAgICBleHBvcnRCdG4uaW5uZXJIVE1MID0gJ0V4cG9ydCc7XG4gICAgICBleHBvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja0V4cG9ydEJ1dHRvbi5iaW5kKHRoaXMpKTtcbiAgICAgIGRvd25sb2FkQnRuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnb2MtZG93bmxvYWQtYnRuJyArIChvcHRzLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgb3B0cy5jaGFydENsYXNzIDogJycpKTtcbiAgICAgIGRvd25sb2FkQnRuLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBvcHRzLmV4cG9ydEZpbGVuYW1lICsgJy5wbmcnKTtcbiAgICAgIGNoYXJ0Q29udGFpbmVyLmFwcGVuZENoaWxkKGV4cG9ydEJ0bik7XG4gICAgICBjaGFydENvbnRhaW5lci5hcHBlbmRDaGlsZChkb3dubG9hZEJ0bik7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMucGFuKSB7XG4gICAgICBjaGFydENvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgY2hhcnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fb25QYW5TdGFydC5iaW5kKHRoaXMpKTtcbiAgICAgIGNoYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9vblBhblN0YXJ0LmJpbmQodGhpcykpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fb25QYW5FbmQuYmluZCh0aGlzKSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25QYW5FbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMuem9vbSkge1xuICAgICAgY2hhcnRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLl9vbldoZWVsaW5nLmJpbmQodGhpcykpO1xuICAgICAgY2hhcnRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uVG91Y2hTdGFydC5iaW5kKHRoaXMpKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUuYmluZCh0aGlzKSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25Ub3VjaEVuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBjaGFydENvbnRhaW5lci5hcHBlbmRDaGlsZChjaGFydCk7XG4gIH1cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gIH1cbiAgX2Nsb3Nlc3QoZWwsIGZuKSB7XG4gICAgcmV0dXJuIGVsICYmICgoZm4oZWwpICYmIGVsICE9PSB0aGlzLmNoYXJ0KSA/IGVsIDogdGhpcy5fY2xvc2VzdChlbC5wYXJlbnROb2RlLCBmbikpO1xuICB9XG4gIF9zaWJsaW5ncyhlbCwgZXhwcikge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGVsLnBhcmVudE5vZGUuY2hpbGRyZW4pLmZpbHRlcigoY2hpbGQpID0+IHtcbiAgICAgIGlmIChjaGlsZCAhPT0gZWwpIHtcbiAgICAgICAgaWYgKGV4cHIpIHtcbiAgICAgICAgICByZXR1cm4gZWwubWF0Y2hlcyhleHByKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfVxuICBfcHJldkFsbChlbCwgZXhwcikge1xuICAgIGxldCBzaWJzID0gW10sXG4gICAgICBwcmV2U2liID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgIHdoaWxlIChwcmV2U2liKSB7XG4gICAgICBpZiAoIWV4cHIgfHwgcHJldlNpYi5tYXRjaGVzKGV4cHIpKSB7XG4gICAgICAgIHNpYnMucHVzaChwcmV2U2liKTtcbiAgICAgIH1cbiAgICAgIHByZXZTaWIgPSBwcmV2U2liLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgfVxuICAgIHJldHVybiBzaWJzO1xuICB9XG4gIF9uZXh0QWxsKGVsLCBleHByKSB7XG4gICAgbGV0IHNpYnMgPSBbXTtcbiAgICBsZXQgbmV4dFNpYiA9IGVsLm5leHRFbGVtZW50U2libGluZztcblxuICAgIHdoaWxlIChuZXh0U2liKSB7XG4gICAgICBpZiAoIWV4cHIgfHwgbmV4dFNpYi5tYXRjaGVzKGV4cHIpKSB7XG4gICAgICAgIHNpYnMucHVzaChuZXh0U2liKTtcbiAgICAgIH1cbiAgICAgIG5leHRTaWIgPSBuZXh0U2liLm5leHRFbGVtZW50U2libGluZztcbiAgICB9XG4gICAgcmV0dXJuIHNpYnM7XG4gIH1cbiAgX2lzVmlzaWJsZShlbCkge1xuICAgIHJldHVybiBlbC5vZmZzZXRQYXJlbnQgIT09IG51bGw7XG4gIH1cbiAgX2FkZENsYXNzKGVsZW1lbnRzLCBjbGFzc05hbWVzKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGlmIChjbGFzc05hbWVzLmluZGV4T2YoJyAnKSA+IDApIHtcbiAgICAgICAgY2xhc3NOYW1lcy5zcGxpdCgnICcpLmZvckVhY2goKGNsYXNzTmFtZSkgPT4gZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX3JlbW92ZUNsYXNzKGVsZW1lbnRzLCBjbGFzc05hbWVzKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGlmIChjbGFzc05hbWVzLmluZGV4T2YoJyAnKSA+IDApIHtcbiAgICAgICAgY2xhc3NOYW1lcy5zcGxpdCgnICcpLmZvckVhY2goKGNsYXNzTmFtZSkgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX2NzcyhlbGVtZW50cywgcHJvcCwgdmFsKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGVsLnN0eWxlW3Byb3BdID0gdmFsO1xuICAgIH0pO1xuICB9XG4gIF9yZW1vdmVBdHRyKGVsZW1lbnRzLCBhdHRyKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICB9KTtcbiAgfVxuICBfb25lKGVsLCB0eXBlLCBsaXN0ZW5lciwgc2VsZikge1xuICAgIGxldCBvbmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxpc3RlbmVyLmNhbGwoc2VsZiwgZXZlbnQpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBvbmUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIG9uZSk7XG4gIH1cbiAgX2dldERlc2NFbGVtZW50cyhhbmNlc3RvcnMsIHNlbGVjdG9yKSB7XG4gICAgbGV0IHJlc3VsdHMgPSBbXTtcblxuICAgIGFuY2VzdG9ycy5mb3JFYWNoKChlbCkgPT4gcmVzdWx0cy5wdXNoKC4uLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cbiAgX2dldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0aGlzLnN0YXR1c1RleHQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAvLyB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9KTtcbiAgfVxuICBfYnVpbGRKc29uRFMobGkpIHtcbiAgICBsZXQgc3ViT2JqID0ge1xuICAgICAgJ25hbWUnOiBsaS5maXJzdENoaWxkLnRleHRDb250ZW50LnRyaW0oKSxcbiAgICAgICdyZWxhdGlvbnNoaXAnOiAobGkucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5vZGVOYW1lID09PSAnTEknID8gJzEnIDogJzAnKSArXG4gICAgICAgIChsaS5wYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aCA+IDEgPyAxIDogMCkgKyAobGkuY2hpbGRyZW4ubGVuZ3RoID8gMSA6IDApXG4gICAgfTtcblxuICAgIGlmIChsaS5pZCkge1xuICAgICAgc3ViT2JqLmlkID0gbGkuaWQ7XG4gICAgfVxuICAgIGlmIChsaS5xdWVyeVNlbGVjdG9yKCd1bCcpKSB7XG4gICAgICBBcnJheS5mcm9tKGxpLnF1ZXJ5U2VsZWN0b3IoJ3VsJykuY2hpbGRyZW4pLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoaXMuX2J1aWxkSnNvbkRTKGVsKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHN1Yk9iajtcbiAgfVxuICBfYXR0YWNoUmVsKGRhdGEsIGZsYWdzKSB7XG4gICAgZGF0YS5yZWxhdGlvbnNoaXAgPSBmbGFncyArIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IDEgOiAwKTtcbiAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xuICAgICAgZm9yIChsZXQgaXRlbSBvZiBkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIHRoaXMuX2F0dGFjaFJlbChpdGVtLCAnMScgKyAoZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAxID8gMSA6IDApKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgX3JlcGFpbnQobm9kZSkge1xuICAgIGlmIChub2RlKSB7XG4gICAgICBub2RlLnN0eWxlLm9mZnNldFdpZHRoID0gbm9kZS5vZmZzZXRXaWR0aDtcbiAgICB9XG4gIH1cbiAgLy8gd2hldGhlciB0aGUgY3Vyc29yIGlzIGhvdmVyaW5nIG92ZXIgdGhlIG5vZGVcbiAgX2lzSW5BY3Rpb24obm9kZSkge1xuICAgIHJldHVybiBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC5lZGdlJykuY2xhc3NOYW1lLmluZGV4T2YoJ2ZhLScpID4gLTE7XG4gIH1cbiAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxuICBfZ2V0Tm9kZVN0YXRlKG5vZGUsIHJlbGF0aW9uKSB7XG4gICAgbGV0IGNyaXRlcmlhLFxuICAgICAgc3RhdGUgPSB7ICdleGlzdCc6IGZhbHNlLCAndmlzaWJsZSc6IGZhbHNlIH07XG5cbiAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICBjcml0ZXJpYSA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKTtcbiAgICAgIGlmIChjcml0ZXJpYSkge1xuICAgICAgICBzdGF0ZS5leGlzdCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZXhpc3QgJiYgdGhpcy5faXNWaXNpYmxlKGNyaXRlcmlhLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0pKSB7XG4gICAgICAgIHN0YXRlLnZpc2libGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgIGNyaXRlcmlhID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVFInKS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAoY3JpdGVyaWEpIHtcbiAgICAgICAgc3RhdGUuZXhpc3QgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmV4aXN0ICYmIHRoaXMuX2lzVmlzaWJsZShjcml0ZXJpYSkpIHtcbiAgICAgICAgc3RhdGUudmlzaWJsZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgY3JpdGVyaWEgPSB0aGlzLl9zaWJsaW5ncyh0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGUpO1xuICAgICAgaWYgKGNyaXRlcmlhLmxlbmd0aCkge1xuICAgICAgICBzdGF0ZS5leGlzdCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZXhpc3QgJiYgY3JpdGVyaWEuc29tZSgoZWwpID0+IHRoaXMuX2lzVmlzaWJsZShlbCkpKSB7XG4gICAgICAgIHN0YXRlLnZpc2libGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuICAvLyBmaW5kIHRoZSByZWxhdGVkIG5vZGVzXG4gIGdldFJlbGF0ZWROb2Rlcyhub2RlLCByZWxhdGlvbikge1xuICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKVxuICAgICAgICAucGFyZW50Tm9kZS5jaGlsZHJlblswXS5xdWVyeVNlbGVjdG9yKCcubm9kZScpO1xuICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykubGFzdENoaWxkLmNoaWxkcmVuKVxuICAgICAgICAubWFwKChlbCkgPT4gZWwucXVlcnlTZWxlY3RvcignLm5vZGUnKSk7XG4gICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgcmV0dXJuIHRoaXMuX3NpYmxpbmdzKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZSlcbiAgICAgICAgLm1hcCgoZWwpID0+IGVsLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykpO1xuICAgIH1cbiAgfVxuICBfc3dpdGNoSG9yaXpvbnRhbEFycm93KG5vZGUpIHtcbiAgICBsZXQgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGxlZnRFZGdlID0gbm9kZS5xdWVyeVNlbGVjdG9yKCcubGVmdEVkZ2UnKSxcbiAgICAgIHJpZ2h0RWRnZSA9IG5vZGUucXVlcnlTZWxlY3RvcignLnJpZ2h0RWRnZScpLFxuICAgICAgdGVtcCA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZTtcblxuICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCAmJiAodHlwZW9mIG9wdHMuYWpheFVSTCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJy5ub2RlcycpKS5kYXRhc2V0LnNpYmxpbmdzTG9hZGVkKSkge1xuICAgICAgbGV0IHByZXZTaWIgPSB0ZW1wLnByZXZpb3VzRWxlbWVudFNpYmxpbmcsXG4gICAgICAgIG5leHRTaWIgPSB0ZW1wLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgaWYgKHByZXZTaWIpIHtcbiAgICAgICAgaWYgKHByZXZTaWIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICAgIGxlZnRFZGdlLmNsYXNzTGlzdC5hZGQoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICAgIGxlZnRFZGdlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZWZ0RWRnZS5jbGFzc0xpc3QuYWRkKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICAgbGVmdEVkZ2UuY2xhc3NMaXN0LnJlbW92ZSgnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChuZXh0U2liKSB7XG4gICAgICAgIGlmIChuZXh0U2liLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICByaWdodEVkZ2UuY2xhc3NMaXN0LmFkZCgnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICAgIHJpZ2h0RWRnZS5jbGFzc0xpc3QucmVtb3ZlKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByaWdodEVkZ2UuY2xhc3NMaXN0LmFkZCgnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgcmlnaHRFZGdlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc2licyA9IHRoaXMuX3NpYmxpbmdzKHRlbXApLFxuICAgICAgICBzaWJzVmlzaWJsZSA9IHNpYnMubGVuZ3RoID8gIXNpYnMuc29tZSgoZWwpID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIDogZmFsc2U7XG5cbiAgICAgIGxlZnRFZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tcmlnaHQnLCBzaWJzVmlzaWJsZSk7XG4gICAgICBsZWZ0RWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLWxlZnQnLCAhc2lic1Zpc2libGUpO1xuICAgICAgcmlnaHRFZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tbGVmdCcsIHNpYnNWaXNpYmxlKTtcbiAgICAgIHJpZ2h0RWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLXJpZ2h0JywgIXNpYnNWaXNpYmxlKTtcbiAgICB9XG4gIH1cbiAgX2hvdmVyTm9kZShldmVudCkge1xuICAgIGxldCBub2RlID0gZXZlbnQudGFyZ2V0LFxuICAgICAgZmxhZyA9IGZhbHNlLFxuICAgICAgdG9wRWRnZSA9IG5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnRvcEVkZ2UnKSxcbiAgICAgIGJvdHRvbUVkZ2UgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC5ib3R0b21FZGdlJyksXG4gICAgICBsZWZ0RWRnZSA9IG5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLmxlZnRFZGdlJyk7XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21vdXNlZW50ZXInKSB7XG4gICAgICBpZiAodG9wRWRnZSkge1xuICAgICAgICBmbGFnID0gdGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdwYXJlbnQnKS52aXNpYmxlO1xuICAgICAgICB0b3BFZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tdXAnLCAhZmxhZyk7XG4gICAgICAgIHRvcEVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1kb3duJywgZmxhZyk7XG4gICAgICB9XG4gICAgICBpZiAoYm90dG9tRWRnZSkge1xuICAgICAgICBmbGFnID0gdGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdjaGlsZHJlbicpLnZpc2libGU7XG4gICAgICAgIGJvdHRvbUVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1kb3duJywgIWZsYWcpO1xuICAgICAgICBib3R0b21FZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tdXAnLCBmbGFnKTtcbiAgICAgIH1cbiAgICAgIGlmIChsZWZ0RWRnZSkge1xuICAgICAgICB0aGlzLl9zd2l0Y2hIb3Jpem9udGFsQXJyb3cobm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIEFycmF5LmZyb20obm9kZS5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAuZWRnZScpKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdmYS1jaGV2cm9uLXVwJywgJ2ZhLWNoZXZyb24tZG93bicsICdmYS1jaGV2cm9uLXJpZ2h0JywgJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8vIGRlZmluZSBub2RlIGNsaWNrIGV2ZW50IGhhbmRsZXJcbiAgX2NsaWNrTm9kZShldmVudCkge1xuICAgIGxldCBjbGlja2VkTm9kZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICBmb2N1c2VkTm9kZSA9IHRoaXMuY2hhcnQucXVlcnlTZWxlY3RvcignLmZvY3VzZWQnKTtcblxuICAgIGlmIChmb2N1c2VkTm9kZSkge1xuICAgICAgZm9jdXNlZE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXNlZCcpO1xuICAgIH1cbiAgICBjbGlja2VkTm9kZS5jbGFzc0xpc3QuYWRkKCdmb2N1c2VkJyk7XG4gIH1cbiAgLy8gYnVpbGQgdGhlIHBhcmVudCBub2RlIG9mIHNwZWNpZmljIG5vZGVcbiAgX2J1aWxkUGFyZW50Tm9kZShjdXJyZW50Um9vdCwgbm9kZURhdGEsIGNhbGxiYWNrKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuXG4gICAgbm9kZURhdGEucmVsYXRpb25zaGlwID0gJzAwMSc7XG4gICAgdGhpcy5fY3JlYXRlTm9kZShub2RlRGF0YSwgMClcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChub2RlRGl2KSB7XG4gICAgICAgIGxldCBjaGFydCA9IHRoYXQuY2hhcnQ7XG5cbiAgICAgICAgbm9kZURpdi5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS11cCcpO1xuICAgICAgICBub2RlRGl2LmNsYXNzTGlzdC5hZGQoJ3NsaWRlLWRvd24nKTtcbiAgICAgICAgbGV0IHBhcmVudFRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKSxcbiAgICAgICAgICBzdXBlcmlvckxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpLFxuICAgICAgICAgIGluZmVyaW9yTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyksXG4gICAgICAgICAgY2hpbGRyZW5UciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgICAgcGFyZW50VHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdoaWRkZW4nKTtcbiAgICAgICAgcGFyZW50VHIuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPVwiMlwiPjwvdGQ+YDtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQocGFyZW50VHIpO1xuICAgICAgICBzdXBlcmlvckxpbmUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5lcyBoaWRkZW4nKTtcbiAgICAgICAgc3VwZXJpb3JMaW5lLmlubmVySFRNTCA9IGA8dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPmA7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHN1cGVyaW9yTGluZSk7XG4gICAgICAgIGluZmVyaW9yTGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpbmVzIGhpZGRlbicpO1xuICAgICAgICBpbmZlcmlvckxpbmUuaW5uZXJIVE1MID0gYDx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj4mbmJzcDs8L3RkPmA7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGluZmVyaW9yTGluZSk7XG4gICAgICAgIGNoaWxkcmVuVHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdub2RlcycpO1xuICAgICAgICBjaGlsZHJlblRyLmlubmVySFRNTCA9IGA8dGQgY29sc3Bhbj1cIjJcIj48L3RkPmA7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGNoaWxkcmVuVHIpO1xuICAgICAgICB0YWJsZS5xdWVyeVNlbGVjdG9yKCd0ZCcpLmFwcGVuZENoaWxkKG5vZGVEaXYpO1xuICAgICAgICBjaGFydC5pbnNlcnRCZWZvcmUodGFibGUsIGNoYXJ0LmNoaWxkcmVuWzBdKTtcbiAgICAgICAgdGFibGUuY2hpbGRyZW5bM10uY2hpbGRyZW5bMF0uYXBwZW5kQ2hpbGQoY2hhcnQubGFzdENoaWxkKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHBhcmVudCBub2RlJywgZXJyKTtcbiAgICAgIH0pO1xuICB9XG4gIF9zd2l0Y2hWZXJ0aWNhbEFycm93KGFycm93KSB7XG4gICAgYXJyb3cuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi11cCcpO1xuICAgIGFycm93LmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tZG93bicpO1xuICB9XG4gIC8vIHNob3cgdGhlIHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICBzaG93UGFyZW50KG5vZGUpIHtcbiAgICAvLyBqdXN0IHNob3cgb25seSBvbmUgc3VwZXJpb3IgbGV2ZWxcbiAgICBsZXQgdGVtcCA9IHRoaXMuX3ByZXZBbGwodGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKSkpO1xuXG4gICAgdGhpcy5fcmVtb3ZlQ2xhc3ModGVtcCwgJ2hpZGRlbicpO1xuICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBsaW5lXG4gICAgdGhpcy5fYWRkQ2xhc3MoQXJyYXkodGVtcFswXS5jaGlsZHJlbikuc2xpY2UoMSwgLTEpLCAnaGlkZGVuJyk7XG4gICAgLy8gc2hvdyBwYXJlbnQgbm9kZSB3aXRoIGFuaW1hdGlvblxuICAgIGxldCBwYXJlbnQgPSB0ZW1wWzJdLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyk7XG5cbiAgICB0aGlzLl9vbmUocGFyZW50LCAndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZScpO1xuICAgICAgaWYgKHRoaXMuX2lzSW5BY3Rpb24obm9kZSkpIHtcbiAgICAgICAgdGhpcy5fc3dpdGNoVmVydGljYWxBcnJvdyhub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC50b3BFZGdlJykpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICAgIHRoaXMuX3JlcGFpbnQocGFyZW50KTtcbiAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZCgnc2xpZGUnKTtcbiAgICBwYXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtZG93bicpO1xuICB9XG4gIC8vIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gIHNob3dTaWJsaW5ncyhub2RlLCBkaXJlY3Rpb24pIHtcbiAgICAvLyBmaXJzdGx5LCBzaG93IHRoZSBzaWJsaW5nIHRkIHRhZ3NcbiAgICBsZXQgc2libGluZ3MgPSBbXSxcbiAgICAgIHRlbXAgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGU7XG5cbiAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICBzaWJsaW5ncyA9IGRpcmVjdGlvbiA9PT0gJ2xlZnQnID8gdGhpcy5fcHJldkFsbCh0ZW1wKSA6IHRoaXMuX25leHRBbGwodGVtcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpYmxpbmdzID0gdGhpcy5fc2libGluZ3ModGVtcCk7XG4gICAgfVxuICAgIHRoaXMuX3JlbW92ZUNsYXNzKHNpYmxpbmdzLCAnaGlkZGVuJyk7XG4gICAgLy8gc2Vjb25kbHksIHNob3cgdGhlIGxpbmVzXG4gICAgbGV0IHVwcGVyTGV2ZWwgPSB0aGlzLl9wcmV2QWxsKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJykpKTtcblxuICAgIHRlbXAgPSBBcnJheS5mcm9tKHVwcGVyTGV2ZWxbMF0ucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLmhpZGRlbicpKTtcbiAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyh0ZW1wLnNsaWNlKDAsIHNpYmxpbmdzLmxlbmd0aCAqIDIpLCAnaGlkZGVuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKHRlbXAsICdoaWRkZW4nKTtcbiAgICB9XG4gICAgLy8gdGhpcmRseSwgZG8gc29tZSBjbGVhbmluZyBzdHVmZlxuICAgIGlmICghdGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdwYXJlbnQnKS52aXNpYmxlKSB7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyh1cHBlckxldmVsLCAnaGlkZGVuJyk7XG4gICAgICBsZXQgcGFyZW50ID0gdXBwZXJMZXZlbFsyXS5xdWVyeVNlbGVjdG9yKCcubm9kZScpO1xuXG4gICAgICB0aGlzLl9vbmUocGFyZW50LCAndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUnKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgICAgdGhpcy5fcmVwYWludChwYXJlbnQpO1xuICAgICAgcGFyZW50LmNsYXNzTGlzdC5hZGQoJ3NsaWRlJyk7XG4gICAgICBwYXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtZG93bicpO1xuICAgIH1cbiAgICAvLyBsYXN0bHksIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgd2l0aCBhbmltYXRpb25cbiAgICBzaWJsaW5ncy5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgIEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2lzVmlzaWJsZShub2RlKSkge1xuICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGUnKTtcbiAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLWxlZnQnLCAnc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fb25lKHNpYmxpbmdzWzBdLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZScpLCAndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNpYmxpbmdzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgICB0aGlzLl9yZW1vdmVDbGFzcyhBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGUnKSksICdzbGlkZScpO1xuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5faXNJbkFjdGlvbihub2RlKSkge1xuICAgICAgICB0aGlzLl9zd2l0Y2hIb3Jpem9udGFsQXJyb3cobm9kZSk7XG4gICAgICAgIG5vZGUucXVlcnlTZWxlY3RvcignLnRvcEVkZ2UnKS5jbGFzc0xpc3QucmVtb3ZlKCdmYS1jaGV2cm9uLXVwJyk7XG4gICAgICAgIG5vZGUucXVlcnlTZWxlY3RvcignLnRvcEVkZ2UnKS5jbGFzc0xpc3QuYWRkKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfVxuICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICBoaWRlU2libGluZ3Mobm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgbGV0IG5vZGVDb250YWluZXIgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGUsXG4gICAgICBzaWJsaW5ncyA9IHRoaXMuX3NpYmxpbmdzKG5vZGVDb250YWluZXIpO1xuXG4gICAgc2libGluZ3MuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICBpZiAoc2liLnF1ZXJ5U2VsZWN0b3IoJy5zcGlubmVyJykpIHtcbiAgICAgICAgdGhpcy5jaGFydC5kYXRhc2V0LmluQWpheCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFkaXJlY3Rpb24gfHwgKGRpcmVjdGlvbiAmJiBkaXJlY3Rpb24gPT09ICdsZWZ0JykpIHtcbiAgICAgIGxldCBwcmVTaWJzID0gdGhpcy5fcHJldkFsbChub2RlQ29udGFpbmVyKTtcblxuICAgICAgcHJlU2licy5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgICAgQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLl9pc1Zpc2libGUobm9kZSkpIHtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGUnLCAnc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghZGlyZWN0aW9uIHx8IChkaXJlY3Rpb24gJiYgZGlyZWN0aW9uICE9PSAnbGVmdCcpKSB7XG4gICAgICBsZXQgbmV4dFNpYnMgPSB0aGlzLl9uZXh0QWxsKG5vZGVDb250YWluZXIpO1xuXG4gICAgICBuZXh0U2licy5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgICAgQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLl9pc1Zpc2libGUobm9kZSkpIHtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGUnLCAnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsZXQgYW5pbWF0ZWROb2RlcyA9IFtdO1xuXG4gICAgdGhpcy5fc2libGluZ3Mobm9kZUNvbnRhaW5lcikuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhbmltYXRlZE5vZGVzLCBBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGUnKSkpO1xuICAgIH0pO1xuICAgIGxldCBsaW5lcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgbm9kZSBvZiBhbmltYXRlZE5vZGVzKSB7XG4gICAgICBsZXQgdGVtcCA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJyk7XG4gICAgICB9KS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXG4gICAgICBsaW5lcy5wdXNoKHRlbXApO1xuICAgICAgbGluZXMucHVzaCh0ZW1wLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBsaW5lcyA9IFsuLi5uZXcgU2V0KGxpbmVzKV07XG4gICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbiAobGluZSkge1xuICAgICAgbGluZS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9vbmUoYW5pbWF0ZWROb2Rlc1swXSwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGxpbmVzLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgbGluZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICB9KTtcbiAgICAgIGxldCBzaWJzID0gW107XG5cbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgc2licyA9IHRoaXMuX3ByZXZBbGwobm9kZUNvbnRhaW5lciwgJzpub3QoLmhpZGRlbiknKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaWJzID0gdGhpcy5fbmV4dEFsbChub2RlQ29udGFpbmVyLCAnOm5vdCguaGlkZGVuKScpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaWJzID0gdGhpcy5fc2libGluZ3Mobm9kZUNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgICBsZXQgdGVtcCA9IEFycmF5LmZyb20odGhpcy5fY2xvc2VzdChub2RlQ29udGFpbmVyLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKTtcbiAgICAgIH0pLnByZXZpb3VzRWxlbWVudFNpYmxpbmcucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gOm5vdCguaGlkZGVuKScpKTtcblxuICAgICAgbGV0IHNvbWVMaW5lcyA9IHRlbXAuc2xpY2UoMSwgZGlyZWN0aW9uID8gc2licy5sZW5ndGggKiAyICsgMSA6IC0xKTtcblxuICAgICAgdGhpcy5fYWRkQ2xhc3Moc29tZUxpbmVzLCAnaGlkZGVuJyk7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyhhbmltYXRlZE5vZGVzLCAnc2xpZGUnKTtcbiAgICAgIHNpYnMuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICAgIEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLnNsaWNlKDEpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5faXNWaXNpYmxlKG5vZGUpKSB7XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLWxlZnQnLCAnc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGUtdXAnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBzaWJzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgICB0aGlzLl9hZGRDbGFzcyhBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcubGluZXMnKSksICdoaWRkZW4nKTtcbiAgICAgICAgdGhpcy5fYWRkQ2xhc3MoQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGVzJykpLCAnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuX2FkZENsYXNzKEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy52ZXJ0aWNhbE5vZGVzJykpLCAnaGlkZGVuJyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2FkZENsYXNzKHNpYnMsICdoaWRkZW4nKTtcblxuICAgICAgaWYgKHRoaXMuX2lzSW5BY3Rpb24obm9kZSkpIHtcbiAgICAgICAgdGhpcy5fc3dpdGNoSG9yaXpvbnRhbEFycm93KG5vZGUpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9XG4gIC8vIHJlY3Vyc2l2ZWx5IGhpZGUgdGhlIGFuY2VzdG9yIG5vZGUgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gIGhpZGVBbmNlc3RvcnNTaWJsaW5ncyhub2RlKSB7XG4gICAgbGV0IHRlbXAgPSBBcnJheS5mcm9tKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgIH0pLnBhcmVudE5vZGUuY2hpbGRyZW4pLnNsaWNlKDAsIDMpO1xuXG4gICAgaWYgKHRlbXBbMF0ucXVlcnlTZWxlY3RvcignLnNwaW5uZXInKSkge1xuICAgICAgdGhpcy5jaGFydC5kYXRhc2V0LmluQWpheCA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzXG4gICAgaWYgKHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAnc2libGluZ3MnKS52aXNpYmxlKSB7XG4gICAgICB0aGlzLmhpZGVTaWJsaW5ncyhub2RlKTtcbiAgICB9XG4gICAgLy8gaGlkZSB0aGUgbGluZXNcbiAgICBsZXQgbGluZXMgPSB0ZW1wLnNsaWNlKDEpO1xuXG4gICAgdGhpcy5fY3NzKGxpbmVzLCAndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAvLyBoaWRlIHRoZSBzdXBlcmlvciBub2RlcyB3aXRoIHRyYW5zaXRpb25cbiAgICBsZXQgcGFyZW50ID0gdGVtcFswXS5xdWVyeVNlbGVjdG9yKCcubm9kZScpLFxuICAgICAgZ3JhbmRmYXRoZXJWaXNpYmxlID0gdGhpcy5fZ2V0Tm9kZVN0YXRlKHBhcmVudCwgJ3BhcmVudCcpLnZpc2libGU7XG5cbiAgICBpZiAocGFyZW50ICYmIHRoaXMuX2lzVmlzaWJsZShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZCgnc2xpZGUnLCAnc2xpZGUtZG93bicpO1xuICAgICAgdGhpcy5fb25lKHBhcmVudCwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZScpO1xuICAgICAgICB0aGlzLl9yZW1vdmVBdHRyKGxpbmVzLCAnc3R5bGUnKTtcbiAgICAgICAgdGhpcy5fYWRkQ2xhc3ModGVtcCwgJ2hpZGRlbicpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICAgIC8vIGlmIHRoZSBjdXJyZW50IG5vZGUgaGFzIHRoZSBwYXJlbnQgbm9kZSwgaGlkZSBpdCByZWN1cnNpdmVseVxuICAgIGlmIChwYXJlbnQgJiYgZ3JhbmRmYXRoZXJWaXNpYmxlKSB7XG4gICAgICB0aGlzLmhpZGVBbmNlc3RvcnNTaWJsaW5ncyhwYXJlbnQpO1xuICAgIH1cbiAgfVxuICAvLyBleHBvc2VkIG1ldGhvZFxuICBhZGRQYXJlbnQoY3VycmVudFJvb3QsIGRhdGEpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGlzLl9idWlsZFBhcmVudE5vZGUoY3VycmVudFJvb3QsIGRhdGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghY3VycmVudFJvb3QucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnRvcEVkZ2UnKSkge1xuICAgICAgICBsZXQgdG9wRWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICB0b3BFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYScpO1xuICAgICAgICBjdXJyZW50Um9vdC5hcHBlbmRDaGlsZCh0b3BFZGdlKTtcbiAgICAgIH1cbiAgICAgIHRoYXQuc2hvd1BhcmVudChjdXJyZW50Um9vdCk7XG4gICAgfSk7XG4gIH1cbiAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXMgZm9yIHJlcXVlc3RpbmcgbmV3IG5vZGVzXG4gIF9zdGFydExvYWRpbmcoYXJyb3csIG5vZGUpIHtcbiAgICBsZXQgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGNoYXJ0ID0gdGhpcy5jaGFydDtcblxuICAgIGlmICh0eXBlb2YgY2hhcnQuZGF0YXNldC5pbkFqYXggIT09ICd1bmRlZmluZWQnICYmIGNoYXJ0LmRhdGFzZXQuaW5BamF4ID09PSAndHJ1ZScpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBhcnJvdy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBsZXQgc3Bpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgIHNwaW5uZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXInKTtcbiAgICBub2RlLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgIHRoaXMuX2FkZENsYXNzKEFycmF5LmZyb20obm9kZS5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAqOm5vdCguc3Bpbm5lciknKSksICdoYXp5Jyk7XG4gICAgY2hhcnQuZGF0YXNldC5pbkFqYXggPSB0cnVlO1xuXG4gICAgbGV0IGV4cG9ydEJ0biA9IHRoaXMuY2hhcnRDb250YWluZXIucXVlcnlTZWxlY3RvcignLm9jLWV4cG9ydC1idG4nICtcbiAgICAgIChvcHRzLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgb3B0cy5jaGFydENsYXNzIDogJycpKTtcblxuICAgIGlmIChleHBvcnRCdG4pIHtcbiAgICAgIGV4cG9ydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vIHRlcm1pbmF0ZSBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgX2VuZExvYWRpbmcoYXJyb3csIG5vZGUpIHtcbiAgICBsZXQgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAgIGFycm93LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIG5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnNwaW5uZXInKS5yZW1vdmUoKTtcbiAgICB0aGlzLl9yZW1vdmVDbGFzcyhBcnJheS5mcm9tKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLmhhenknKSksICdoYXp5Jyk7XG4gICAgdGhpcy5jaGFydC5kYXRhc2V0LmluQWpheCA9IGZhbHNlO1xuICAgIGxldCBleHBvcnRCdG4gPSB0aGlzLmNoYXJ0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5vYy1leHBvcnQtYnRuJyArXG4gICAgICAob3B0cy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIG9wdHMuY2hhcnRDbGFzcyA6ICcnKSk7XG5cbiAgICBpZiAoZXhwb3J0QnRuKSB7XG4gICAgICBleHBvcnRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLy8gZGVmaW5lIGNsaWNrIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSB0b3AgZWRnZVxuICBfY2xpY2tUb3BFZGdlKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgdG9wRWRnZSA9IGV2ZW50LnRhcmdldCxcbiAgICAgIG5vZGUgPSB0b3BFZGdlLnBhcmVudE5vZGUsXG4gICAgICBwYXJlbnRTdGF0ZSA9IHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAncGFyZW50JyksXG4gICAgICBvcHRzID0gdGhpcy5vcHRpb25zO1xuXG4gICAgaWYgKHBhcmVudFN0YXRlLmV4aXN0KSB7XG4gICAgICBsZXQgdGVtcCA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJyk7XG4gICAgICB9KTtcbiAgICAgIGxldCBwYXJlbnQgPSB0ZW1wLnBhcmVudE5vZGUuZmlyc3RDaGlsZC5xdWVyeVNlbGVjdG9yKCcubm9kZScpO1xuXG4gICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnc2xpZGUnKSkgeyByZXR1cm47IH1cbiAgICAgIC8vIGhpZGUgdGhlIGFuY2VzdG9yIG5vZGVzIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgaWYgKHBhcmVudFN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlQW5jZXN0b3JzU2libGluZ3Mobm9kZSk7XG4gICAgICAgIHRoaXMuX29uZShwYXJlbnQsICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICh0aGlzLl9pc0luQWN0aW9uKG5vZGUpKSB7XG4gICAgICAgICAgICB0aGlzLl9zd2l0Y2hWZXJ0aWNhbEFycm93KHRvcEVkZ2UpO1xuICAgICAgICAgICAgdGhpcy5fc3dpdGNoSG9yaXpvbnRhbEFycm93KG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBhbmNlc3RvcnMgYW5kIHNpYmxpbmdzXG4gICAgICAgIHRoaXMuc2hvd1BhcmVudChub2RlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbG9hZCB0aGUgbmV3IHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgIGxldCBub2RlSWQgPSB0b3BFZGdlLnBhcmVudE5vZGUuaWQ7XG5cbiAgICAgIC8vIHN0YXJ0IHVwIGxvYWRpbmcgc3RhdHVzXG4gICAgICBpZiAodGhpcy5fc3RhcnRMb2FkaW5nKHRvcEVkZ2UsIG5vZGUpKSB7XG4gICAgICAgIC8vIGxvYWQgbmV3IG5vZGVzXG4gICAgICAgIHRoaXMuX2dldEpTT04odHlwZW9mIG9wdHMuYWpheFVSTC5wYXJlbnQgPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgIG9wdHMuYWpheFVSTC5wYXJlbnQobm9kZS5kYXRhc2V0LnNvdXJjZSkgOiBvcHRzLmFqYXhVUkwucGFyZW50ICsgbm9kZUlkKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgIGlmICh0aGF0LmNoYXJ0LmRhdGFzZXQuaW5BamF4ID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhyZXNwKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhhdC5hZGRQYXJlbnQobm9kZSwgcmVzcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgcGFyZW50IG5vZGUgZGF0YS4nLCBlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhhdC5fZW5kTG9hZGluZyh0b3BFZGdlLCBub2RlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIHJlY3Vyc2l2ZWx5IGhpZGUgdGhlIGRlc2NlbmRhbnQgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gIGhpZGVEZXNjZW5kYW50cyhub2RlKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgdGVtcCA9IHRoaXMuX25leHRBbGwobm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUpLFxuICAgICAgbGluZXMgPSBbXTtcblxuICAgIGlmICh0ZW1wWzJdLnF1ZXJ5U2VsZWN0b3IoJy5zcGlubmVyJykpIHtcbiAgICAgIHRoaXMuY2hhcnQuZGF0YXNldC5pbkFqYXggPSBmYWxzZTtcbiAgICB9XG4gICAgbGV0IGRlc2NlbmRhbnRzID0gQXJyYXkuZnJvbSh0ZW1wWzJdLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLmZpbHRlcigoZWwpID0+IHRoYXQuX2lzVmlzaWJsZShlbCkpLFxuICAgICAgaXNWZXJ0aWNhbERlc2MgPSB0ZW1wWzJdLmNsYXNzTGlzdC5jb250YWlucygndmVydGljYWxOb2RlcycpO1xuXG4gICAgaWYgKCFpc1ZlcnRpY2FsRGVzYykge1xuICAgICAgZGVzY2VuZGFudHMuZm9yRWFjaCgoZGVzYykgPT4ge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShsaW5lcyxcbiAgICAgICAgICB0aGF0Ll9wcmV2QWxsKHRoYXQuX2Nsb3Nlc3QoZGVzYywgKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJykpLCAnLmxpbmVzJykpO1xuICAgICAgfSk7XG4gICAgICBsaW5lcyA9IFsuLi5uZXcgU2V0KGxpbmVzKV07XG4gICAgICB0aGlzLl9jc3MobGluZXMsICd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgIH1cbiAgICB0aGlzLl9vbmUoZGVzY2VuZGFudHNbMF0sICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyhkZXNjZW5kYW50cywgJ3NsaWRlJyk7XG4gICAgICBpZiAoaXNWZXJ0aWNhbERlc2MpIHtcbiAgICAgICAgdGhhdC5fYWRkQ2xhc3ModGVtcCwgJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGluZXMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgZWwucGFyZW50Tm9kZS5sYXN0Q2hpbGQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9hZGRDbGFzcyhBcnJheS5mcm9tKHRlbXBbMl0ucXVlcnlTZWxlY3RvckFsbCgnLnZlcnRpY2FsTm9kZXMnKSksICdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9pc0luQWN0aW9uKG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX3N3aXRjaFZlcnRpY2FsQXJyb3cobm9kZS5xdWVyeVNlbGVjdG9yKCcuYm90dG9tRWRnZScpKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgICB0aGlzLl9hZGRDbGFzcyhkZXNjZW5kYW50cywgJ3NsaWRlIHNsaWRlLXVwJyk7XG4gIH1cbiAgLy8gc2hvdyB0aGUgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gIHNob3dEZXNjZW5kYW50cyhub2RlKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgdGVtcCA9IHRoaXMuX25leHRBbGwobm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUpLFxuICAgICAgZGVzY2VuZGFudHMgPSBbXTtcblxuICAgIHRoaXMuX3JlbW92ZUNsYXNzKHRlbXAsICdoaWRkZW4nKTtcbiAgICBpZiAodGVtcC5zb21lKChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd2ZXJ0aWNhbE5vZGVzJykpKSB7XG4gICAgICB0ZW1wLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGRlc2NlbmRhbnRzLCBBcnJheS5mcm9tKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLmZpbHRlcigoZWwpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhhdC5faXNWaXNpYmxlKGVsKTtcbiAgICAgICAgfSkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIEFycmF5LmZyb20odGVtcFsyXS5jaGlsZHJlbikuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZGVzY2VuZGFudHMsXG4gICAgICAgICAgQXJyYXkuZnJvbShlbC5xdWVyeVNlbGVjdG9yKCd0cicpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLmZpbHRlcigoZWwpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGF0Ll9pc1Zpc2libGUoZWwpO1xuICAgICAgICAgIH0pKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyB0aGUgdHdvIGZvbGxvd2luZyBzdGF0ZW1lbnRzIGFyZSB1c2VkIHRvIGVuZm9yY2UgYnJvd3NlciB0byByZXBhaW50XG4gICAgdGhpcy5fcmVwYWludChkZXNjZW5kYW50c1swXSk7XG4gICAgdGhpcy5fb25lKGRlc2NlbmRhbnRzWzBdLCAndHJhbnNpdGlvbmVuZCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZScpO1xuICAgICAgaWYgKHRoaXMuX2lzSW5BY3Rpb24obm9kZSkpIHtcbiAgICAgICAgdGhpcy5fc3dpdGNoVmVydGljYWxBcnJvdyhub2RlLnF1ZXJ5U2VsZWN0b3IoJy5ib3R0b21FZGdlJykpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICAgIHRoaXMuX2FkZENsYXNzKGRlc2NlbmRhbnRzLCAnc2xpZGUnKTtcbiAgICB0aGlzLl9yZW1vdmVDbGFzcyhkZXNjZW5kYW50cywgJ3NsaWRlLXVwJyk7XG4gIH1cbiAgLy8gYnVpbGQgdGhlIGNoaWxkIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcbiAgX2J1aWxkQ2hpbGROb2RlKGFwcGVuZFRvLCBub2RlRGF0YSwgY2FsbGJhY2spIHtcbiAgICBsZXQgZGF0YSA9IG5vZGVEYXRhLmNoaWxkcmVuIHx8IG5vZGVEYXRhLnNpYmxpbmdzO1xuXG4gICAgYXBwZW5kVG8ucXVlcnlTZWxlY3RvcigndGQnKS5zZXRBdHRyaWJ1dGUoJ2NvbFNwYW4nLCBkYXRhLmxlbmd0aCAqIDIpO1xuICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoYXBwZW5kVG8sIHsgJ2NoaWxkcmVuJzogZGF0YSB9LCAwLCBjYWxsYmFjayk7XG4gIH1cbiAgLy8gZXhwb3NlZCBtZXRob2RcbiAgYWRkQ2hpbGRyZW4obm9kZSwgZGF0YSkge1xuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICBjb3VudCA9IDA7XG5cbiAgICB0aGlzLmNoYXJ0LmRhdGFzZXQuaW5FZGl0ID0gJ2FkZENoaWxkcmVuJztcbiAgICB0aGlzLl9idWlsZENoaWxkTm9kZS5jYWxsKHRoaXMsIHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJyksIGRhdGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgrK2NvdW50ID09PSBkYXRhLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvcignLmJvdHRvbUVkZ2UnKSkge1xuICAgICAgICAgIGxldCBib3R0b21FZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgICAgYm90dG9tRWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmEnKTtcbiAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGJvdHRvbUVkZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yKCcuc3ltYm9sJykpIHtcbiAgICAgICAgICBsZXQgc3ltYm9sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgICAgc3ltYm9sLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZmEgJyArIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sJyk7XG4gICAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAudGl0bGUnKS5hcHBlbmRDaGlsZChzeW1ib2wpO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuc2hvd0Rlc2NlbmRhbnRzKG5vZGUpO1xuICAgICAgICB0aGF0LmNoYXJ0LmRhdGFzZXQuaW5FZGl0ID0gJyc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLy8gYmluZCBjbGljayBldmVudCBoYW5kbGVyIGZvciB0aGUgYm90dG9tIGVkZ2VcbiAgX2NsaWNrQm90dG9tRWRnZShldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICBib3R0b21FZGdlID0gZXZlbnQudGFyZ2V0LFxuICAgICAgbm9kZSA9IGJvdHRvbUVkZ2UucGFyZW50Tm9kZSxcbiAgICAgIGNoaWxkcmVuU3RhdGUgPSB0aGlzLl9nZXROb2RlU3RhdGUobm9kZSwgJ2NoaWxkcmVuJyk7XG5cbiAgICBpZiAoY2hpbGRyZW5TdGF0ZS5leGlzdCkge1xuICAgICAgbGV0IHRlbXAgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICdUUic7XG4gICAgICB9KS5wYXJlbnROb2RlLmNoaWxkcmVuWzNdO1xuXG4gICAgICBpZiAoQXJyYXkuZnJvbSh0ZW1wLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLnNvbWUoKG5vZGUpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVmlzaWJsZShub2RlKSAmJiBub2RlLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGUnKTtcbiAgICAgIH0pKSB7IHJldHVybjsgfVxuICAgICAgLy8gaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICAgIGlmIChjaGlsZHJlblN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlRGVzY2VuZGFudHMobm9kZSk7XG4gICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBkZXNjZW5kYW50c1xuICAgICAgICB0aGlzLnNob3dEZXNjZW5kYW50cyhub2RlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBsb2FkIHRoZSBuZXcgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgbGV0IG5vZGVJZCA9IGJvdHRvbUVkZ2UucGFyZW50Tm9kZS5pZDtcblxuICAgICAgaWYgKHRoaXMuX3N0YXJ0TG9hZGluZyhib3R0b21FZGdlLCBub2RlKSkge1xuICAgICAgICB0aGlzLl9nZXRKU09OKHR5cGVvZiBvcHRzLmFqYXhVUkwuY2hpbGRyZW4gPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgIG9wdHMuYWpheFVSTC5jaGlsZHJlbihub2RlLmRhdGFzZXQuc291cmNlKSA6IG9wdHMuYWpheFVSTC5jaGlsZHJlbiArIG5vZGVJZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICBpZiAodGhhdC5jaGFydC5kYXRhc2V0LmluQWpheCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBpZiAocmVzcC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhhdC5hZGRDaGlsZHJlbihub2RlLCByZXNwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBjaGlsZHJlbiBub2RlcyBkYXRhJywgZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoYXQuX2VuZExvYWRpbmcoYm90dG9tRWRnZSwgbm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBzdWJzZXF1ZW50IHByb2Nlc3Npbmcgb2YgYnVpbGQgc2libGluZyBub2Rlc1xuICBfY29tcGxlbWVudExpbmUob25lU2libGluZywgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KSB7XG4gICAgbGV0IHRlbXAgPSBvbmVTaWJsaW5nLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlbjtcblxuICAgIHRlbXBbMF0uY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgc2libGluZ0NvdW50ICogMik7XG4gICAgdGVtcFsxXS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBzaWJsaW5nQ291bnQgKiAyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4aXN0aW5nU2libGlnQ291bnQ7IGkrKykge1xuICAgICAgbGV0IHJpZ2h0TGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyksXG4gICAgICAgIGxlZnRMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcblxuICAgICAgcmlnaHRMaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncmlnaHRMaW5lIHRvcExpbmUnKTtcbiAgICAgIHJpZ2h0TGluZS5pbm5lckhUTUwgPSAnJm5ic3A7JztcbiAgICAgIHRlbXBbMl0uaW5zZXJ0QmVmb3JlKHJpZ2h0TGluZSwgdGVtcFsyXS5jaGlsZHJlblsxXSk7XG4gICAgICBsZWZ0TGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xlZnRMaW5lIHRvcExpbmUnKTtcbiAgICAgIGxlZnRMaW5lLmlubmVySFRNTCA9ICcmbmJzcDsnO1xuICAgICAgdGVtcFsyXS5pbnNlcnRCZWZvcmUobGVmdExpbmUsIHRlbXBbMl0uY2hpbGRyZW5bMV0pO1xuICAgIH1cbiAgfVxuICAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBvZiBzcGVjaWZpYyBub2RlXG4gIF9idWlsZFNpYmxpbmdOb2RlKG5vZGVDaGFydCwgbm9kZURhdGEsIGNhbGxiYWNrKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgbmV3U2libGluZ0NvdW50ID0gbm9kZURhdGEuc2libGluZ3MgPyBub2RlRGF0YS5zaWJsaW5ncy5sZW5ndGggOiBub2RlRGF0YS5jaGlsZHJlbi5sZW5ndGgsXG4gICAgICBleGlzdGluZ1NpYmxpZ0NvdW50ID0gbm9kZUNoYXJ0LnBhcmVudE5vZGUubm9kZU5hbWUgPT09ICdURCcgPyB0aGlzLl9jbG9zZXN0KG5vZGVDaGFydCwgKGVsKSA9PiB7XG4gICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RSJztcbiAgICAgIH0pLmNoaWxkcmVuLmxlbmd0aCA6IDEsXG4gICAgICBzaWJsaW5nQ291bnQgPSBleGlzdGluZ1NpYmxpZ0NvdW50ICsgbmV3U2libGluZ0NvdW50LFxuICAgICAgaW5zZXJ0UG9zdGlvbiA9IChzaWJsaW5nQ291bnQgPiAxKSA/IE1hdGguZmxvb3Ioc2libGluZ0NvdW50IC8gMiAtIDEpIDogMDtcblxuICAgIC8vIGp1c3QgYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgZm9yIHRoZSBzcGVjaWZpYyBub2RlXG4gICAgaWYgKG5vZGVDaGFydC5wYXJlbnROb2RlLm5vZGVOYW1lID09PSAnVEQnKSB7XG4gICAgICBsZXQgdGVtcCA9IHRoaXMuX3ByZXZBbGwobm9kZUNoYXJ0LnBhcmVudE5vZGUucGFyZW50Tm9kZSk7XG5cbiAgICAgIHRlbXBbMF0ucmVtb3ZlKCk7XG4gICAgICB0ZW1wWzFdLnJlbW92ZSgpO1xuICAgICAgbGV0IGNoaWxkQ291bnQgPSAwO1xuXG4gICAgICB0aGF0Ll9idWlsZENoaWxkTm9kZS5jYWxsKHRoYXQsIHRoYXQuX2Nsb3Nlc3Qobm9kZUNoYXJ0LnBhcmVudE5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLFxuICAgICAgICBub2RlRGF0YSwgKCkgPT4ge1xuICAgICAgICBpZiAoKytjaGlsZENvdW50ID09PSBuZXdTaWJsaW5nQ291bnQpIHtcbiAgICAgICAgICBsZXQgc2libGluZ1RkcyA9IEFycmF5LmZyb20odGhhdC5fY2xvc2VzdChub2RlQ2hhcnQucGFyZW50Tm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJylcbiAgICAgICAgICAgIC5sYXN0Q2hpbGQuY2hpbGRyZW4pO1xuXG4gICAgICAgICAgaWYgKGV4aXN0aW5nU2libGlnQ291bnQgPiAxKSB7XG4gICAgICAgICAgICBBcnJheS5mcm9tKG5vZGVDaGFydC5wYXJlbnROb2RlLmNoaWxkcmVuKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICBzaWJsaW5nVGRzWzBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nVGRzWzBdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbm9kZUNoYXJ0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoYXQuX2NvbXBsZW1lbnRMaW5lKHNpYmxpbmdUZHNbMF0sIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCk7XG4gICAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyhzaWJsaW5nVGRzLCAnaGlkZGVuJyk7XG4gICAgICAgICAgICBzaWJsaW5nVGRzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICAgIHRoYXQuX2FkZENsYXNzKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJyksICdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHRlbXAgPSBub2RlQ2hhcnQucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuXG4gICAgICAgICAgICBzaWJsaW5nVGRzW2luc2VydFBvc3Rpb25dLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGVDaGFydC5wYXJlbnROb2RlLCBzaWJsaW5nVGRzW2luc2VydFBvc3Rpb24gKyAxXSk7XG4gICAgICAgICAgICB0ZW1wLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhhdC5fY29tcGxlbWVudExpbmUoc2libGluZ1Rkc1tpbnNlcnRQb3N0aW9uXSwgc2libGluZ0NvdW50LCAxKTtcbiAgICAgICAgICAgIHRoYXQuX2FkZENsYXNzKHNpYmxpbmdUZHMsICdoaWRkZW4nKTtcbiAgICAgICAgICAgIHRoYXQuX2FkZENsYXNzKHRoYXQuX2dldERlc2NFbGVtZW50cyhzaWJsaW5nVGRzLnNsaWNlKDAsIGluc2VydFBvc3Rpb24gKyAxKSwgJy5ub2RlJyksICdzbGlkZS1yaWdodCcpO1xuICAgICAgICAgICAgdGhhdC5fYWRkQ2xhc3ModGhhdC5fZ2V0RGVzY0VsZW1lbnRzKHNpYmxpbmdUZHMuc2xpY2UoaW5zZXJ0UG9zdGlvbiArIDEpLCAnLm5vZGUnKSwgJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHsgLy8gYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgYW5kIHBhcmVudCBub2RlIGZvciB0aGUgc3BlY2lmaWMgbmRvZVxuICAgICAgbGV0IG5vZGVDb3VudCA9IDA7XG5cbiAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkuY2FsbCh0aGF0LCB0aGF0LmNoYXJ0LCBub2RlRGF0YSwgMCwgKCkgPT4ge1xuICAgICAgICBpZiAoKytub2RlQ291bnQgPT09IHNpYmxpbmdDb3VudCkge1xuICAgICAgICAgIGxldCB0ZW1wID0gbm9kZUNoYXJ0Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblszXVxuICAgICAgICAgICAgLmNoaWxkcmVuW2luc2VydFBvc3Rpb25dLFxuICAgICAgICAgICAgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuXG4gICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgMik7XG4gICAgICAgICAgdGQuYXBwZW5kQ2hpbGQobm9kZUNoYXJ0KTtcbiAgICAgICAgICB0ZW1wLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRkLCB0ZW1wLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgICAgICAgdGhhdC5fY29tcGxlbWVudExpbmUodGVtcCwgc2libGluZ0NvdW50LCAxKTtcblxuICAgICAgICAgIGxldCB0ZW1wMiA9IHRoYXQuX2Nsb3Nlc3Qobm9kZUNoYXJ0LCAoZWwpID0+IGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJykpXG4gICAgICAgICAgICAucGFyZW50Tm9kZS5jaGlsZHJlblswXTtcblxuICAgICAgICAgIHRlbXAyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgIHRoYXQuX2FkZENsYXNzKEFycmF5LmZyb20odGVtcDIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSksICdzbGlkZS1kb3duJyk7XG5cbiAgICAgICAgICBsZXQgdGVtcDMgPSB0aGlzLl9zaWJsaW5ncyhub2RlQ2hhcnQucGFyZW50Tm9kZSk7XG5cbiAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyh0ZW1wMywgJ2hpZGRlbicpO1xuICAgICAgICAgIHRoYXQuX2FkZENsYXNzKHRoYXQuX2dldERlc2NFbGVtZW50cyh0ZW1wMy5zbGljZSgwLCBpbnNlcnRQb3N0aW9uKSwgJy5ub2RlJyksICdzbGlkZS1yaWdodCcpO1xuICAgICAgICAgIHRoYXQuX2FkZENsYXNzKHRoYXQuX2dldERlc2NFbGVtZW50cyh0ZW1wMy5zbGljZShpbnNlcnRQb3N0aW9uKSwgJy5ub2RlJyksICdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGFkZFNpYmxpbmdzKG5vZGUsIGRhdGEpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGlzLmNoYXJ0LmRhdGFzZXQuaW5FZGl0ID0gJ2FkZFNpYmxpbmdzJztcbiAgICB0aGlzLl9idWlsZFNpYmxpbmdOb2RlLmNhbGwodGhpcywgdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKSwgZGF0YSwgKCkgPT4ge1xuICAgICAgdGhhdC5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGVzJykpXG4gICAgICAgIC5kYXRhc2V0LnNpYmxpbmdzTG9hZGVkID0gdHJ1ZTtcbiAgICAgIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yKCcubGVmdEVkZ2UnKSkge1xuICAgICAgICBsZXQgcmlnaHRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpLFxuICAgICAgICAgIGxlZnRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgIHJpZ2h0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhJyk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQocmlnaHRFZGdlKTtcbiAgICAgICAgbGVmdEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhJyk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQobGVmdEVkZ2UpO1xuICAgICAgfVxuICAgICAgdGhhdC5zaG93U2libGluZ3Mobm9kZSk7XG4gICAgICB0aGF0LmNoYXJ0LmRhdGFzZXQuaW5FZGl0ID0gJyc7XG4gICAgfSk7XG4gIH1cbiAgLy8gYmluZCBjbGljayBldmVudCBoYW5kbGVyIGZvciB0aGUgbGVmdCBhbmQgcmlnaHQgZWRnZXNcbiAgX2NsaWNrSG9yaXpvbnRhbEVkZ2UoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgaEVkZ2UgPSBldmVudC50YXJnZXQsXG4gICAgICBub2RlID0gaEVkZ2UucGFyZW50Tm9kZSxcbiAgICAgIHNpYmxpbmdzU3RhdGUgPSB0aGlzLl9nZXROb2RlU3RhdGUobm9kZSwgJ3NpYmxpbmdzJyk7XG5cbiAgICBpZiAoc2libGluZ3NTdGF0ZS5leGlzdCkge1xuICAgICAgbGV0IHRlbXAgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJztcbiAgICAgICAgfSkucGFyZW50Tm9kZSxcbiAgICAgICAgc2libGluZ3MgPSB0aGlzLl9zaWJsaW5ncyh0ZW1wKTtcblxuICAgICAgaWYgKHNpYmxpbmdzLnNvbWUoKGVsKSA9PiB7XG4gICAgICAgIGxldCBub2RlID0gZWwucXVlcnlTZWxlY3RvcignLm5vZGUnKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5faXNWaXNpYmxlKG5vZGUpICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZScpO1xuICAgICAgfSkpIHsgcmV0dXJuOyB9XG4gICAgICBpZiAob3B0cy50b2dnbGVTaWJsaW5nc1Jlc3ApIHtcbiAgICAgICAgbGV0IHByZXZTaWIgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGUucHJldmlvdXNFbGVtZW50U2libGluZyxcbiAgICAgICAgICBuZXh0U2liID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICBpZiAoaEVkZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdsZWZ0RWRnZScpKSB7XG4gICAgICAgICAgaWYgKHByZXZTaWIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3Mobm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oaWRlU2libGluZ3Mobm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG5leHRTaWIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3Mobm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKG5vZGUsICdyaWdodCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHNpYmxpbmdzU3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKG5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGxvYWQgdGhlIG5ldyBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgIGxldCBub2RlSWQgPSBoRWRnZS5wYXJlbnROb2RlLmlkLFxuICAgICAgICB1cmwgPSAodGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdwYXJlbnQnKS5leGlzdCkgP1xuICAgICAgICAgICh0eXBlb2Ygb3B0cy5hamF4VVJMLnNpYmxpbmdzID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgIG9wdHMuYWpheFVSTC5zaWJsaW5ncyhKU09OLnBhcnNlKG5vZGUuZGF0YXNldC5zb3VyY2UpKSA6IG9wdHMuYWpheFVSTC5zaWJsaW5ncyArIG5vZGVJZCkgOlxuICAgICAgICAgICh0eXBlb2Ygb3B0cy5hamF4VVJMLmZhbWlsaWVzID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgIG9wdHMuYWpheFVSTC5mYW1pbGllcyhKU09OLnBhcnNlKG5vZGUuZGF0YXNldC5zb3VyY2UpKSA6IG9wdHMuYWpheFVSTC5mYW1pbGllcyArIG5vZGVJZCk7XG5cbiAgICAgIGlmICh0aGlzLl9zdGFydExvYWRpbmcoaEVkZ2UsIG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX2dldEpTT04odXJsKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgIGlmICh0aGF0LmNoYXJ0LmRhdGFzZXQuaW5BamF4ID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGlmIChyZXNwLnNpYmxpbmdzIHx8IHJlc3AuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgdGhhdC5hZGRTaWJsaW5ncyhub2RlLCByZXNwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBzaWJsaW5nIG5vZGVzIGRhdGEnLCBlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhhdC5fZW5kTG9hZGluZyhoRWRnZSwgbm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBldmVudCBoYW5kbGVyIGZvciB0b2dnbGUgYnV0dG9ucyBpbiBIeWJyaWQoaG9yaXpvbnRhbCArIHZlcnRpY2FsKSBPcmdDaGFydFxuICBfY2xpY2tUb2dnbGVCdXR0b24oZXZlbnQpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICB0b2dnbGVCdG4gPSBldmVudC50YXJnZXQsXG4gICAgICBkZXNjV3JhcHBlciA9IHRvZ2dsZUJ0bi5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZyxcbiAgICAgIGRlc2NlbmRhbnRzID0gZGVzY1dyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSxcbiAgICAgIGNoaWxkcmVuID0gZGVzY1dyYXBwZXIuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyk7XG4gICAgICB9KTtcblxuICAgIGlmIChjaGlsZHJlbi5zb21lKChpdGVtKSA9PiBpdGVtLmNsYXNzTGlzdC5jb250YWlucygnLnNsaWRlJykpKSB7IHJldHVybjsgfVxuICAgIHRvZ2dsZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdmYS1wbHVzLXNxdWFyZScpO1xuICAgIHRvZ2dsZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdmYS1taW51cy1zcXVhcmUnKTtcbiAgICBpZiAoZGVzY2VuZGFudHNbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCcuc2xpZGUtdXAnKSkge1xuICAgICAgZGVzY1dyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICB0aGlzLl9yZXBhaW50KGNoaWxkcmVuWzBdKTtcbiAgICAgIHRoaXMuX2FkZENsYXNzKGNoaWxkcmVuLCAnc2xpZGUnKTtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKGNoaWxkcmVuLCAnc2xpZGUtdXAnKTtcbiAgICAgIGNoaWxkcmVuWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoYXQuX3JlbW92ZUNsYXNzKGNoaWxkcmVuLCAnc2xpZGUnKTtcbiAgICAgIH0sIHsgJ29uY2UnOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hZGRDbGFzcyhkZXNjZW5kYW50cywgJ3NsaWRlIHNsaWRlLXVwJyk7XG4gICAgICBkZXNjZW5kYW50c1swXS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0Ll9yZW1vdmVDbGFzcyhkZXNjZW5kYW50cywgJ3NsaWRlJyk7XG4gICAgICAgIGxldCB1bCA9IHRoaXMuX2Nsb3Nlc3QoZGVzY2VuZGFudHNbMF0sIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ3VsJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICB9LCB7ICdvbmNlJzogdHJ1ZSB9KTtcbiAgICAgIGxldCBzdWJUb2dnbGVCdG4gPSBkZXNjZW5kYW50c1swXS5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlQnRuJykuY2xhc3NMaXN0LnJlbW92ZSgnZmEtbWludXMtc3F1YXJlJyk7XG5cbiAgICAgIHN1YlRvZ2dsZUJ0bi5jbGFzc0xpc3QuYWRkKCdmYS1wbHVzLXNxdWFyZScpO1xuICAgIH1cbiAgfVxuICBfZGlzcGF0Y2hDbGlja0V2ZW50KGV2ZW50KSB7XG4gICAgbGV0IGNsYXNzTGlzdCA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3Q7XG5cbiAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKCd0b3BFZGdlJykpIHtcbiAgICAgIHRoaXMuX2NsaWNrVG9wRWRnZShldmVudCk7XG4gICAgfSBlbHNlIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ3JpZ2h0RWRnZScpIHx8IGNsYXNzTGlzdC5jb250YWlucygnbGVmdEVkZ2UnKSkge1xuICAgICAgdGhpcy5fY2xpY2tIb3Jpem9udGFsRWRnZShldmVudCk7XG4gICAgfSBlbHNlIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ2JvdHRvbUVkZ2UnKSkge1xuICAgICAgdGhpcy5fY2xpY2tCb3R0b21FZGdlKGV2ZW50KTtcbiAgICB9IGVsc2UgaWYgKGNsYXNzTGlzdC5jb250YWlucygndG9nZ2xlQnRuJykpIHtcbiAgICAgIHRoaXMuX2NsaWNrVG9nZ2xlQnV0dG9uKGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2xpY2tOb2RlKGV2ZW50KTtcbiAgICB9XG4gIH1cbiAgX29uRHJhZ1N0YXJ0KGV2ZW50KSB7XG4gICAgbGV0IG5vZGVEaXYgPSBldmVudC50YXJnZXQsXG4gICAgICBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgaXNGaXJlZm94ID0gL2ZpcmVmb3gvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG5cbiAgICBpZiAoaXNGaXJlZm94KSB7XG4gICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9odG1sJywgJ2hhY2sgZm9yIGZpcmVmb3gnKTtcbiAgICB9XG4gICAgLy8gaWYgdXNlcnMgZW5hYmxlIHpvb20gb3IgZGlyZWN0aW9uIG9wdGlvbnNcbiAgICBpZiAodGhpcy5jaGFydC5zdHlsZS50cmFuc2Zvcm0pIHtcbiAgICAgIGxldCBnaG9zdE5vZGUsIG5vZGVDb3ZlcjtcblxuICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2hvc3Qtbm9kZScpKSB7XG4gICAgICAgIGdob3N0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG4gICAgICAgIGdob3N0Tm9kZS5jbGFzc0xpc3QuYWRkKCdnaG9zdC1ub2RlJyk7XG4gICAgICAgIG5vZGVDb3ZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncmVjdCcpO1xuICAgICAgICBnaG9zdE5vZGUuYXBwZW5kQ2hpbGQobm9kZUNvdmVyKTtcbiAgICAgICAgdGhpcy5jaGFydC5hcHBlbmRDaGlsZChnaG9zdE5vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2hvc3ROb2RlID0gdGhpcy5jaGFydC5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAuZ2hvc3Qtbm9kZScpO1xuICAgICAgICBub2RlQ292ZXIgPSBnaG9zdE5vZGUuY2hpbGRyZW5bMF07XG4gICAgICB9XG4gICAgICBsZXQgdHJhbnNWYWx1ZXMgPSB0aGlzLmNoYXJ0LnN0eWxlLnRyYW5zZm9ybS5zcGxpdCgnLCcpLFxuICAgICAgICBzY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KChvcHRzLmRpcmVjdGlvbiA9PT0gJ3QyYicgfHwgb3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSA/XG4gICAgICAgICAgdHJhbnNWYWx1ZXNbMF0uc2xpY2UodHJhbnNWYWx1ZXNbMF0uaW5kZXhPZignKCcpICsgMSkgOiB0cmFuc1ZhbHVlc1sxXSkpO1xuXG4gICAgICBnaG9zdE5vZGUuc2V0QXR0cmlidXRlKCd3aWR0aCcsIG5vZGVEaXYub2Zmc2V0V2lkdGgpO1xuICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnaGVpZ2h0Jywgbm9kZURpdi5vZmZzZXRIZWlnaHQpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgneCcsIDUgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd5JywgNSAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgMTIwICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgNDAgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeCcsIDQgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeScsIDQgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAxICogc2NhbGUpO1xuICAgICAgbGV0IHhPZmZzZXQgPSBldmVudC5vZmZzZXRYICogc2NhbGUsXG4gICAgICAgIHlPZmZzZXQgPSBldmVudC5vZmZzZXRZICogc2NhbGU7XG5cbiAgICAgIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2wycicpIHtcbiAgICAgICAgeE9mZnNldCA9IGV2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgeU9mZnNldCA9IGV2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdyMmwnKSB7XG4gICAgICAgIHhPZmZzZXQgPSBub2RlRGl2Lm9mZnNldFdpZHRoIC0gZXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICB5T2Zmc2V0ID0gZXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpIHtcbiAgICAgICAgeE9mZnNldCA9IG5vZGVEaXYub2Zmc2V0V2lkdGggLSBldmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgIHlPZmZzZXQgPSBub2RlRGl2Lm9mZnNldEhlaWdodCAtIGV2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0ZpcmVmb3gpIHsgLy8gaGFjayBmb3Igb2xkIHZlcnNpb24gb2YgRmlyZWZveCg8IDQ4LjApXG4gICAgICAgIGxldCBnaG9zdE5vZGVXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cbiAgICAgICAgZ2hvc3ROb2RlV3JhcHBlci5zcmMgPSAnZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJyArIChuZXcgWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhnaG9zdE5vZGUpO1xuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGdob3N0Tm9kZVdyYXBwZXIsIHhPZmZzZXQsIHlPZmZzZXQpO1xuICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xuICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAncmdiKDE5MSwgMCwgMCknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGRyYWdnZWQgPSBldmVudC50YXJnZXQsXG4gICAgICBkcmFnWm9uZSA9IHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgKGVsKSA9PiB7XG4gICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgICAgfSkucGFyZW50Tm9kZS5jaGlsZHJlblswXS5xdWVyeVNlbGVjdG9yKCcubm9kZScpLFxuICAgICAgZHJhZ0hpZXIgPSBBcnJheS5mcm9tKHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgKGVsKSA9PiB7XG4gICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJztcbiAgICAgIH0pLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpO1xuXG4gICAgdGhpcy5kcmFnZ2VkID0gZHJhZ2dlZDtcbiAgICBBcnJheS5mcm9tKHRoaXMuY2hhcnQucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKCFkcmFnSGllci5pbmNsdWRlcyhub2RlKSkge1xuICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEpIHtcbiAgICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEoZHJhZ2dlZCwgZHJhZ1pvbmUsIG5vZGUpKSB7XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIF9vbkRyYWdPdmVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgZHJvcFpvbmUgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gICAgaWYgKCFkcm9wWm9uZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FsbG93ZWREcm9wJykpIHtcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ25vbmUnO1xuICAgIH1cbiAgfVxuICBfb25EcmFnRW5kKGV2ZW50KSB7XG4gICAgQXJyYXkuZnJvbSh0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGxvd2VkRHJvcCcpKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWxsb3dlZERyb3AnKTtcbiAgICB9KTtcbiAgfVxuICBfb25Ecm9wKGV2ZW50KSB7XG4gICAgbGV0IGRyb3Bab25lID0gZXZlbnQuY3VycmVudFRhcmdldCxcbiAgICAgIGNoYXJ0ID0gdGhpcy5jaGFydCxcbiAgICAgIGRyYWdnZWQgPSB0aGlzLmRyYWdnZWQsXG4gICAgICBkcmFnWm9uZSA9IHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgICAgfSkucGFyZW50Tm9kZS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcblxuICAgIHRoaXMuX3JlbW92ZUNsYXNzKEFycmF5LmZyb20oY2hhcnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbG93ZWREcm9wJykpLCAnYWxsb3dlZERyb3AnKTtcbiAgICAvLyBmaXJzdGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcm9wIHpvbmVcbiAgICBpZiAoIWRyb3Bab25lLnBhcmVudE5vZGUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcpIHsgLy8gaWYgdGhlIGRyb3Agem9uZSBpcyBhIGxlYWYgbm9kZVxuICAgICAgbGV0IGJvdHRvbUVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgIGJvdHRvbUVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhJyk7XG4gICAgICBkcm9wWm9uZS5hcHBlbmRDaGlsZChib3R0b21FZGdlKTtcbiAgICAgIGRyb3Bab25lLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgMik7XG4gICAgICBsZXQgdGFibGUgPSB0aGlzLl9jbG9zZXN0KGRyb3Bab25lLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICdUQUJMRSc7XG4gICAgICAgIH0pLFxuICAgICAgICB1cHBlclRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKSxcbiAgICAgICAgbG93ZXJUciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyksXG4gICAgICAgIG5vZGVUciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgIHVwcGVyVHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5lcycpO1xuICAgICAgdXBwZXJUci5pbm5lckhUTUwgPSBgPHRkIGNvbHNwYW49XCIyXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD5gO1xuICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodXBwZXJUcik7XG4gICAgICBsb3dlclRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGluZXMnKTtcbiAgICAgIGxvd2VyVHIuaW5uZXJIVE1MID0gYDx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj4mbmJzcDs8L3RkPmA7XG4gICAgICB0YWJsZS5hcHBlbmRDaGlsZChsb3dlclRyKTtcbiAgICAgIG5vZGVUci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vZGVzJyk7XG4gICAgICB0YWJsZS5hcHBlbmRDaGlsZChub2RlVHIpO1xuICAgICAgQXJyYXkuZnJvbShkcmFnZ2VkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ob3Jpem9udGFsRWRnZScpKS5mb3JFYWNoKChoRWRnZSkgPT4ge1xuICAgICAgICBkcmFnZ2VkLnJlbW92ZUNoaWxkKGhFZGdlKTtcbiAgICAgIH0pO1xuICAgICAgbGV0IGRyYWdnZWRUZCA9IHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZTtcblxuICAgICAgbm9kZVRyLmFwcGVuZENoaWxkKGRyYWdnZWRUZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBkcm9wQ29sc3BhbiA9IHdpbmRvdy5wYXJzZUludChkcm9wWm9uZS5wYXJlbnROb2RlLmNvbFNwYW4pICsgMjtcblxuICAgICAgZHJvcFpvbmUucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBkcm9wQ29sc3Bhbik7XG4gICAgICBkcm9wWm9uZS5wYXJlbnROb2RlLnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGRyb3BDb2xzcGFuKTtcbiAgICAgIGlmICghZHJhZ2dlZC5xdWVyeVNlbGVjdG9yKCcuaG9yaXpvbnRhbEVkZ2UnKSkge1xuICAgICAgICBsZXQgcmlnaHRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpLFxuICAgICAgICAgIGxlZnRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgIHJpZ2h0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhJyk7XG4gICAgICAgIGRyYWdnZWQuYXBwZW5kQ2hpbGQocmlnaHRFZGdlKTtcbiAgICAgICAgbGVmdEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhJyk7XG4gICAgICAgIGRyYWdnZWQuYXBwZW5kQ2hpbGQobGVmdEVkZ2UpO1xuICAgICAgfVxuICAgICAgbGV0IHRlbXAgPSBkcm9wWm9uZS5wYXJlbnROb2RlLnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZyxcbiAgICAgICAgbGVmdGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpLFxuICAgICAgICByaWdodGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuXG4gICAgICBsZWZ0bGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xlZnRMaW5lIHRvcExpbmUnKTtcbiAgICAgIGxlZnRsaW5lLmlubmVySFRNTCA9IGAmbmJzcDtgO1xuICAgICAgdGVtcC5pbnNlcnRCZWZvcmUobGVmdGxpbmUsIHRlbXAuY2hpbGRyZW5bMV0pO1xuICAgICAgcmlnaHRsaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncmlnaHRMaW5lIHRvcExpbmUnKTtcbiAgICAgIHJpZ2h0bGluZS5pbm5lckhUTUwgPSBgJm5ic3A7YDtcbiAgICAgIHRlbXAuaW5zZXJ0QmVmb3JlKHJpZ2h0bGluZSwgdGVtcC5jaGlsZHJlblsyXSk7XG4gICAgICB0ZW1wLm5leHRFbGVtZW50U2libGluZy5hcHBlbmRDaGlsZCh0aGlzLl9jbG9zZXN0KGRyYWdnZWQsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICdUQUJMRSc7XG4gICAgICB9KS5wYXJlbnROb2RlKTtcblxuICAgICAgbGV0IGRyb3BTaWJzID0gdGhpcy5fc2libGluZ3ModGhpcy5fY2xvc2VzdChkcmFnZ2VkLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLm5vZGVOYW1lID09PSAnVEFCTEUnO1xuICAgICAgfSkucGFyZW50Tm9kZSkubWFwKChlbCkgPT4gZWwucXVlcnlTZWxlY3RvcignLm5vZGUnKSk7XG5cbiAgICAgIGlmIChkcm9wU2licy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgbGV0IHJpZ2h0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICBsZWZ0RWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICByaWdodEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYScpO1xuICAgICAgICBkcm9wU2lic1swXS5hcHBlbmRDaGlsZChyaWdodEVkZ2UpO1xuICAgICAgICBsZWZ0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmEnKTtcbiAgICAgICAgZHJvcFNpYnNbMF0uYXBwZW5kQ2hpbGQobGVmdEVkZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBzZWNvbmRseSwgZGVhbCB3aXRoIHRoZSBoaWVyYXJjaHkgb2YgZHJhZ2dlZCBub2RlXG4gICAgbGV0IGRyYWdDb2xTcGFuID0gd2luZG93LnBhcnNlSW50KGRyYWdab25lLmNvbFNwYW4pO1xuXG4gICAgaWYgKGRyYWdDb2xTcGFuID4gMikge1xuICAgICAgZHJhZ1pvbmUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgZHJhZ0NvbFNwYW4gLSAyKTtcbiAgICAgIGRyYWdab25lLnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGRyYWdDb2xTcGFuIC0gMik7XG4gICAgICBsZXQgdGVtcCA9IGRyYWdab25lLnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgdGVtcC5jaGlsZHJlblsxXS5yZW1vdmUoKTtcbiAgICAgIHRlbXAuY2hpbGRyZW5bMV0ucmVtb3ZlKCk7XG5cbiAgICAgIGxldCBkcmFnU2licyA9IEFycmF5LmZyb20oZHJhZ1pvbmUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuWzNdLmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24gKHRkKSB7XG4gICAgICAgIHJldHVybiB0ZC5xdWVyeVNlbGVjdG9yKCcubm9kZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChkcmFnU2licy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZHJhZ1NpYnNbMF0ucXVlcnlTZWxlY3RvcignLmxlZnRFZGdlJykucmVtb3ZlKCk7XG4gICAgICAgIGRyYWdTaWJzWzBdLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodEVkZ2UnKS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZHJhZ1pvbmUucmVtb3ZlQXR0cmlidXRlKCdjb2xzcGFuJyk7XG4gICAgICBkcmFnWm9uZS5xdWVyeVNlbGVjdG9yKCcubm9kZScpLnJlbW92ZUNoaWxkKGRyYWdab25lLnF1ZXJ5U2VsZWN0b3IoJy5ib3R0b21FZGdlJykpO1xuICAgICAgQXJyYXkuZnJvbShkcmFnWm9uZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGRyZW4pLnNsaWNlKDEpLmZvckVhY2goKHRyKSA9PiB0ci5yZW1vdmUoKSk7XG4gICAgfVxuICAgIGxldCBjdXN0b21FID0gbmV3IEN1c3RvbUV2ZW50KCdub2RlZHJvcHBlZC5vcmdjaGFydCcsIHsgJ2RldGFpbCc6IHtcbiAgICAgICdkcmFnZ2VkTm9kZSc6IGRyYWdnZWQsXG4gICAgICAnZHJhZ1pvbmUnOiBkcmFnWm9uZS5jaGlsZHJlblswXSxcbiAgICAgICdkcm9wWm9uZSc6IGRyb3Bab25lXG4gICAgfX0pO1xuXG4gICAgY2hhcnQuZGlzcGF0Y2hFdmVudChjdXN0b21FKTtcbiAgfVxuICAvLyBjcmVhdGUgbm9kZVxuICBfY3JlYXRlTm9kZShub2RlRGF0YSwgbGV2ZWwpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICBvcHRzID0gdGhpcy5vcHRpb25zO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGlmIChub2RlRGF0YS5jaGlsZHJlbikge1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBub2RlRGF0YS5jaGlsZHJlbikge1xuICAgICAgICAgIGNoaWxkLnBhcmVudElkID0gbm9kZURhdGEuaWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gY29uc3RydWN0IHRoZSBjb250ZW50IG9mIG5vZGVcbiAgICAgIGxldCBub2RlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgIGRlbGV0ZSBub2RlRGF0YS5jaGlsZHJlbjtcbiAgICAgIG5vZGVEaXYuZGF0YXNldC5zb3VyY2UgPSBKU09OLnN0cmluZ2lmeShub2RlRGF0YSk7XG4gICAgICBpZiAobm9kZURhdGFbb3B0cy5ub2RlSWRdKSB7XG4gICAgICAgIG5vZGVEaXYuaWQgPSBub2RlRGF0YVtvcHRzLm5vZGVJZF07XG4gICAgICB9XG4gICAgICBsZXQgaW5FZGl0ID0gdGhhdC5jaGFydC5kYXRhc2V0LmluRWRpdCxcbiAgICAgICAgaXNIaWRkZW47XG5cbiAgICAgIGlmIChpbkVkaXQpIHtcbiAgICAgICAgaXNIaWRkZW4gPSBpbkVkaXQgPT09ICdhZGRDaGlsZHJlbicgPyAnIHNsaWRlLXVwJyA6ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNIaWRkZW4gPSBsZXZlbCA+PSBvcHRzLmRlcHRoID8gJyBzbGlkZS11cCcgOiAnJztcbiAgICAgIH1cbiAgICAgIG5vZGVEaXYuc2V0QXR0cmlidXRlKCdjbGFzcycsICdub2RlICcgKyAobm9kZURhdGEuY2xhc3NOYW1lIHx8ICcnKSArIGlzSGlkZGVuKTtcbiAgICAgIGlmIChvcHRzLmRyYWdnYWJsZSkge1xuICAgICAgICBub2RlRGl2LnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAobm9kZURhdGEucGFyZW50SWQpIHtcbiAgICAgICAgbm9kZURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGFyZW50Jywgbm9kZURhdGEucGFyZW50SWQpO1xuICAgICAgfVxuICAgICAgbm9kZURpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPiR7bm9kZURhdGFbb3B0cy5ub2RlVGl0bGVdfTwvZGl2PlxuICAgICAgICAke29wdHMubm9kZUNvbnRlbnQgPyBgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj4ke25vZGVEYXRhW29wdHMubm9kZUNvbnRlbnRdfTwvZGl2PmAgOiAnJ31cbiAgICAgIGA7XG4gICAgICAvLyBhcHBlbmQgNCBkaXJlY3Rpb24gYXJyb3dzIG9yIGV4cGFuZC9jb2xsYXBzZSBidXR0b25zXG4gICAgICBsZXQgZmxhZ3MgPSBub2RlRGF0YS5yZWxhdGlvbnNoaXAgfHwgJyc7XG5cbiAgICAgIGlmIChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPiBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgaWYgKChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aCAmJiBOdW1iZXIoZmxhZ3Muc3Vic3RyKDIsIDEpKSkge1xuICAgICAgICAgIGxldCB0b2dnbGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgICB0b2dnbGVCdG4uc2V0QXR0cmlidXRlKCdjbGFzcycsICd0b2dnbGVCdG4gZmEgZmEtbWludXMtc3F1YXJlJyk7XG4gICAgICAgICAgbm9kZURpdi5hcHBlbmRDaGlsZCh0b2dnbGVCdG4pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigwLCAxKSkpIHtcbiAgICAgICAgICBsZXQgdG9wRWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICAgIHRvcEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhJyk7XG4gICAgICAgICAgbm9kZURpdi5hcHBlbmRDaGlsZCh0b3BFZGdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigxLCAxKSkpIHtcbiAgICAgICAgICBsZXQgcmlnaHRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpLFxuICAgICAgICAgICAgbGVmdEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgICByaWdodEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYScpO1xuICAgICAgICAgIG5vZGVEaXYuYXBwZW5kQ2hpbGQocmlnaHRFZGdlKTtcbiAgICAgICAgICBsZWZ0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmEnKTtcbiAgICAgICAgICBub2RlRGl2LmFwcGVuZENoaWxkKGxlZnRFZGdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigyLCAxKSkpIHtcbiAgICAgICAgICBsZXQgYm90dG9tRWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICAgIHN5bWJvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICAgIHRpdGxlID0gbm9kZURpdi5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAudGl0bGUnKTtcblxuICAgICAgICAgIGJvdHRvbUVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhJyk7XG4gICAgICAgICAgbm9kZURpdi5hcHBlbmRDaGlsZChib3R0b21FZGdlKTtcbiAgICAgICAgICBzeW1ib2wuc2V0QXR0cmlidXRlKCdjbGFzcycsICdmYSAnICsgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2wnKTtcbiAgICAgICAgICB0aXRsZS5pbnNlcnRCZWZvcmUoc3ltYm9sLCB0aXRsZS5jaGlsZHJlblswXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhhdC5faG92ZXJOb2RlLmJpbmQodGhhdCkpO1xuICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhhdC5faG92ZXJOb2RlLmJpbmQodGhhdCkpO1xuICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoYXQuX2Rpc3BhdGNoQ2xpY2tFdmVudC5iaW5kKHRoYXQpKTtcbiAgICAgIGlmIChvcHRzLmRyYWdnYWJsZSkge1xuICAgICAgICBub2RlRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoYXQuX29uRHJhZ1N0YXJ0LmJpbmQodGhhdCkpO1xuICAgICAgICBub2RlRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhhdC5fb25EcmFnT3Zlci5iaW5kKHRoYXQpKTtcbiAgICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhhdC5fb25EcmFnRW5kLmJpbmQodGhhdCkpO1xuICAgICAgICBub2RlRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGF0Ll9vbkRyb3AuYmluZCh0aGF0KSk7XG4gICAgICB9XG4gICAgICAvLyBhbGxvdyB1c2VyIHRvIGFwcGVuZCBkb20gbW9kaWZpY2F0aW9uIGFmdGVyIGZpbmlzaGluZyBub2RlIGNyZWF0ZSBvZiBvcmdjaGFydFxuICAgICAgaWYgKG9wdHMuY3JlYXRlTm9kZSkge1xuICAgICAgICBvcHRzLmNyZWF0ZU5vZGUobm9kZURpdiwgbm9kZURhdGEpO1xuICAgICAgfVxuXG4gICAgICByZXNvbHZlKG5vZGVEaXYpO1xuICAgIH0pO1xuICB9XG4gIGJ1aWxkSGllcmFyY2h5KGFwcGVuZFRvLCBub2RlRGF0YSwgbGV2ZWwsIGNhbGxiYWNrKSB7XG4gICAgLy8gQ29uc3RydWN0IHRoZSBub2RlXG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIG5vZGVXcmFwcGVyLFxuICAgICAgY2hpbGROb2RlcyA9IG5vZGVEYXRhLmNoaWxkcmVuLFxuICAgICAgaXNWZXJ0aWNhbE5vZGUgPSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPiAxKSB7IC8vIGlmIG5vZGVEYXRhIGhhcyBuZXN0ZWQgc3RydWN0dXJlXG4gICAgICBub2RlV3JhcHBlciA9IGlzVmVydGljYWxOb2RlID8gYXBwZW5kVG8gOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgaWYgKCFpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICBhcHBlbmRUby5hcHBlbmRDaGlsZChub2RlV3JhcHBlcik7XG4gICAgICB9XG4gICAgICB0aGlzLl9jcmVhdGVOb2RlKG5vZGVEYXRhLCBsZXZlbClcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChub2RlRGl2KSB7XG4gICAgICAgIGlmIChpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICAgIG5vZGVXcmFwcGVyLmFwcGVuZENoaWxkKG5vZGVEaXYpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgICAgIHRyLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDx0ZCAke2NoaWxkTm9kZXMgPyBgY29sc3Bhbj1cIiR7Y2hpbGROb2Rlcy5sZW5ndGggKiAyfVwiYCA6ICcnfT5cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgYDtcbiAgICAgICAgICB0ci5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChub2RlRGl2KTtcbiAgICAgICAgICBub2RlV3JhcHBlci5pbnNlcnRCZWZvcmUodHIsIG5vZGVXcmFwcGVyLmNoaWxkcmVuWzBdID8gbm9kZVdyYXBwZXIuY2hpbGRyZW5bMF0gOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0IG5vZGUnLCBlcnIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENvbnN0cnVjdCB0aGUgaW5mZXJpb3Igbm9kZXMgYW5kIGNvbm5lY3Rpb25nIGxpbmVzXG4gICAgaWYgKGNoaWxkTm9kZXMpIHtcbiAgICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID09PSAxKSB7IC8vIGlmIG5vZGVEYXRhIGlzIGp1c3QgYW4gYXJyYXlcbiAgICAgICAgbm9kZVdyYXBwZXIgPSBhcHBlbmRUbztcbiAgICAgIH1cbiAgICAgIGxldCBpc0hpZGRlbixcbiAgICAgICAgaXNWZXJ0aWNhbExheWVyID0gb3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDIpID49IG9wdHMudmVydGljYWxEZXB0aCxcbiAgICAgICAgaW5FZGl0ID0gdGhhdC5jaGFydC5kYXRhc2V0LmluRWRpdDtcblxuICAgICAgaWYgKGluRWRpdCkge1xuICAgICAgICBpc0hpZGRlbiA9IGluRWRpdCA9PT0gJ2FkZFNpYmxpbmdzJyA/ICcnIDogJyBoaWRkZW4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNIaWRkZW4gPSBsZXZlbCArIDEgPj0gb3B0cy5kZXB0aCA/ICcgaGlkZGVuJyA6ICcnO1xuICAgICAgfVxuXG4gICAgICAvLyBkcmF3IHRoZSBsaW5lIGNsb3NlIHRvIHBhcmVudCBub2RlXG4gICAgICBpZiAoIWlzVmVydGljYWxMYXllcikge1xuICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgIHRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGluZXMnICsgaXNIaWRkZW4pO1xuICAgICAgICB0ci5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPHRkIGNvbHNwYW49XCIkeyBjaGlsZE5vZGVzLmxlbmd0aCAqIDIgfVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+XG4gICAgICAgICAgPC90ZD5cbiAgICAgICAgYDtcbiAgICAgICAgbm9kZVdyYXBwZXIuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgfVxuICAgICAgLy8gZHJhdyB0aGUgbGluZXMgY2xvc2UgdG8gY2hpbGRyZW4gbm9kZXNcbiAgICAgIGxldCBsaW5lTGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICBsaW5lTGF5ZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5lcycgKyBpc0hpZGRlbik7XG4gICAgICBsaW5lTGF5ZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICA8dGQgY2xhc3M9XCJyaWdodExpbmVcIj4mbmJzcDs8L3RkPlxuICAgICAgICAke2NoaWxkTm9kZXMuc2xpY2UoMSkubWFwKCgpID0+IGBcbiAgICAgICAgICA8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD5cbiAgICAgICAgICA8dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+XG4gICAgICAgICAgYCkuam9pbignJyl9XG4gICAgICAgIDx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD5cbiAgICAgIGA7XG4gICAgICBsZXQgbm9kZUxheWVyO1xuXG4gICAgICBpZiAoaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgIG5vZGVMYXllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJzx1bD4nKTtcbiAgICAgICAgaWYgKGxldmVsICsgMiA9PT0gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgICAgIHRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndmVydGljYWxOb2RlcycpO1xuICAgICAgICAgIHRyLmlubmVySFRNTCA9IGA8dGQ+PC90ZD5gO1xuICAgICAgICAgIHRyLmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQobm9kZUxheWVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlV3JhcHBlci5hcHBlbmRDaGlsZChub2RlTGF5ZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlTGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBub2RlTGF5ZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdub2RlcycgKyBpc0hpZGRlbik7XG4gICAgICAgIG5vZGVXcmFwcGVyLmFwcGVuZENoaWxkKGxpbmVMYXllcik7XG4gICAgICAgIG5vZGVXcmFwcGVyLmFwcGVuZENoaWxkKG5vZGVMYXllcik7XG4gICAgICB9XG4gICAgICAvLyByZWN1cnNlIHRocm91Z2ggY2hpbGRyZW4gbm9kZXNcbiAgICAgIGNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgbGV0IG5vZGVDZWxsO1xuXG4gICAgICAgIGlmIChpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgICBub2RlQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgIG5vZGVDZWxsLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIDIpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGVMYXllci5hcHBlbmRDaGlsZChub2RlQ2VsbCk7XG4gICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkobm9kZUNlbGwsIGNoaWxkLCBsZXZlbCArIDEsIGNhbGxiYWNrKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBfY2xpY2tDaGFydChldmVudCkge1xuICAgIGxldCBjbG9zZXN0Tm9kZSA9IHRoaXMuX2Nsb3Nlc3QoZXZlbnQudGFyZ2V0LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlJyk7XG4gICAgfSk7XG5cbiAgICBpZiAoIWNsb3Nlc3ROb2RlICYmIHRoaXMuY2hhcnQucXVlcnlTZWxlY3RvcignLm5vZGUuZm9jdXNlZCcpKSB7XG4gICAgICB0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5ub2RlLmZvY3VzZWQnKS5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1c2VkJyk7XG4gICAgfVxuICB9XG4gIF9jbGlja0V4cG9ydEJ1dHRvbigpIHtcbiAgICBsZXQgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGNoYXJ0Q29udGFpbmVyID0gdGhpcy5jaGFydENvbnRhaW5lcixcbiAgICAgIG1hc2sgPSBjaGFydENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAubWFzaycpLFxuICAgICAgc291cmNlQ2hhcnQgPSBjaGFydENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcub3JnY2hhcnQ6bm90KC5oaWRkZW4pJyksXG4gICAgICBmbGFnID0gb3B0cy5kaXJlY3Rpb24gPT09ICdsMnInIHx8IG9wdHMuZGlyZWN0aW9uID09PSAncjJsJztcblxuICAgIGlmICghbWFzaykge1xuICAgICAgbWFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgbWFzay5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ21hc2snKTtcbiAgICAgIG1hc2suaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPmA7XG4gICAgICBjaGFydENvbnRhaW5lci5hcHBlbmRDaGlsZChtYXNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWFzay5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgY2hhcnRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY2FudmFzQ29udGFpbmVyJyk7XG4gICAgd2luZG93Lmh0bWwyY2FudmFzKHNvdXJjZUNoYXJ0LCB7XG4gICAgICAnd2lkdGgnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0IDogc291cmNlQ2hhcnQuY2xpZW50V2lkdGgsXG4gICAgICAnaGVpZ2h0JzogZmxhZyA/IHNvdXJjZUNoYXJ0LmNsaWVudFdpZHRoIDogc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0LFxuICAgICAgJ29uY2xvbmUnOiBmdW5jdGlvbiAoY2xvbmVEb2MpIHtcbiAgICAgICAgbGV0IGNhbnZhc0NvbnRhaW5lciA9IGNsb25lRG9jLnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXNDb250YWluZXInKTtcblxuICAgICAgICBjYW52YXNDb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAndmlzaWJsZSc7XG4gICAgICAgIGNhbnZhc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcub3JnY2hhcnQ6bm90KC5oaWRkZW4pJykudHJhbnNmb3JtID0gJyc7XG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbigoY2FudmFzKSA9PiB7XG4gICAgICBsZXQgZG93bmxvYWRCdG4gPSBjaGFydENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcub2MtZG93bmxvYWQtYnRuJyk7XG5cbiAgICAgIGNoYXJ0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5tYXNrJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICBkb3dubG9hZEJ0bi5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBjYW52YXMudG9EYXRhVVJMKCkpO1xuICAgICAgZG93bmxvYWRCdG4uY2xpY2soKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZXhwb3J0IHRoZSBjdXJlbnQgb3JnY2hhcnQhJywgZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNoYXJ0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2NhbnZhc0NvbnRhaW5lcicpO1xuICAgIH0pO1xuICB9XG4gIF9sb29wQ2hhcnQoY2hhcnQpIHtcbiAgICBsZXQgc3ViT2JqID0geyAnaWQnOiBjaGFydC5xdWVyeVNlbGVjdG9yKCcubm9kZScpLmlkIH07XG5cbiAgICBpZiAoY2hhcnQuY2hpbGRyZW5bM10pIHtcbiAgICAgIEFycmF5LmZyb20oY2hhcnQuY2hpbGRyZW5bM10uY2hpbGRyZW4pLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoaXMuX2xvb3BDaGFydChlbC5maXJzdENoaWxkKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHN1Yk9iajtcbiAgfVxuICBnZXRIaWVyYXJjaHkoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykuaWQpIHtcbiAgICAgIHJldHVybiAnRXJyb3I6IE5vZGVzIG9mIG9yZ2hjYXJ0IHRvIGJlIGV4cG9ydGVkIG11c3QgaGF2ZSBpZCBhdHRyaWJ1dGUhJztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2xvb3BDaGFydCh0aGlzLmNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJykpO1xuICB9XG4gIF9vblBhblN0YXJ0KGV2ZW50KSB7XG4gICAgbGV0IGNoYXJ0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgIGlmICh0aGlzLl9jbG9zZXN0KGV2ZW50LnRhcmdldCwgKGVsKSA9PiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlJykpIHx8XG4gICAgICAoZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aCA+IDEpKSB7XG4gICAgICBjaGFydC5kYXRhc2V0LnBhbm5pbmcgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2hhcnQuc3R5bGUuY3Vyc29yID0gJ21vdmUnO1xuICAgIGNoYXJ0LmRhdGFzZXQucGFubmluZyA9IHRydWU7XG5cbiAgICBsZXQgbGFzdFggPSAwLFxuICAgICAgbGFzdFkgPSAwLFxuICAgICAgbGFzdFRmID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoY2hhcnQpLnRyYW5zZm9ybTtcblxuICAgIGlmIChsYXN0VGYgIT09ICdub25lJykge1xuICAgICAgbGV0IHRlbXAgPSBsYXN0VGYuc3BsaXQoJywnKTtcblxuICAgICAgaWYgKCFsYXN0VGYuaW5jbHVkZXMoJzNkJykpIHtcbiAgICAgICAgbGFzdFggPSBOdW1iZXIucGFyc2VJbnQodGVtcFs0XSwgMTApO1xuICAgICAgICBsYXN0WSA9IE51bWJlci5wYXJzZUludCh0ZW1wWzVdLCAxMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYXN0WCA9IE51bWJlci5wYXJzZUludCh0ZW1wWzEyXSwgMTApO1xuICAgICAgICBsYXN0WSA9IE51bWJlci5wYXJzZUludCh0ZW1wWzEzXSwgMTApO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgc3RhcnRYID0gMCxcbiAgICAgIHN0YXJ0WSA9IDA7XG5cbiAgICBpZiAoIWV2ZW50LnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuIG9uIGRlc2t0b3BcbiAgICAgIHN0YXJ0WCA9IGV2ZW50LnBhZ2VYIC0gbGFzdFg7XG4gICAgICBzdGFydFkgPSBldmVudC5wYWdlWSAtIGxhc3RZO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcbiAgICAgIHN0YXJ0WCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBsYXN0WDtcbiAgICAgIHN0YXJ0WSA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBsYXN0WTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjaGFydC5kYXRhc2V0LnBhblN0YXJ0ID0gSlNPTi5zdHJpbmdpZnkoeyAnc3RhcnRYJzogc3RhcnRYLCAnc3RhcnRZJzogc3RhcnRZIH0pO1xuICAgIGNoYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uUGFubmluZy5iaW5kKHRoaXMpKTtcbiAgICBjaGFydC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblBhbm5pbmcuYmluZCh0aGlzKSk7XG4gIH1cbiAgX29uUGFubmluZyhldmVudCkge1xuICAgIGxldCBjaGFydCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG5cbiAgICBpZiAoY2hhcnQuZGF0YXNldC5wYW5uaW5nID09PSAnZmFsc2UnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBuZXdYID0gMCxcbiAgICAgIG5ld1kgPSAwLFxuICAgICAgcGFuU3RhcnQgPSBKU09OLnBhcnNlKGNoYXJ0LmRhdGFzZXQucGFuU3RhcnQpLFxuICAgICAgc3RhcnRYID0gcGFuU3RhcnQuc3RhcnRYLFxuICAgICAgc3RhcnRZID0gcGFuU3RhcnQuc3RhcnRZO1xuXG4gICAgaWYgKCFldmVudC50YXJnZXRUb3VjaGVzKSB7IC8vIHBhbmQgb24gZGVza3RvcFxuICAgICAgbmV3WCA9IGV2ZW50LnBhZ2VYIC0gc3RhcnRYO1xuICAgICAgbmV3WSA9IGV2ZW50LnBhZ2VZIC0gc3RhcnRZO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcbiAgICAgIG5ld1ggPSBldmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIC0gc3RhcnRYO1xuICAgICAgbmV3WSA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBzdGFydFk7XG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGxhc3RUZiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNoYXJ0KS50cmFuc2Zvcm07XG5cbiAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgIGlmICghbGFzdFRmLmluY2x1ZGVzKCczZCcpKSB7XG4gICAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9ICdtYXRyaXgoMSwgMCwgMCwgMSwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9ICdtYXRyaXgzZCgxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJywgMCwgMSknO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XG5cbiAgICAgIGlmICghbGFzdFRmLmluY2x1ZGVzKCczZCcpKSB7XG4gICAgICAgIG1hdHJpeFs0XSA9IG5ld1g7XG4gICAgICAgIG1hdHJpeFs1XSA9IG5ld1kgKyAnKSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRyaXhbMTJdID0gbmV3WDtcbiAgICAgICAgbWF0cml4WzEzXSA9IG5ld1k7XG4gICAgICB9XG4gICAgICBjaGFydC5zdHlsZS50cmFuc2Zvcm0gPSBtYXRyaXguam9pbignLCcpO1xuICAgIH1cbiAgfVxuICBfb25QYW5FbmQoZXZlbnQpIHtcbiAgICBsZXQgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuXG4gICAgaWYgKGNoYXJ0LmRhdGFzZXQucGFubmluZyA9PT0gJ3RydWUnKSB7XG4gICAgICBjaGFydC5kYXRhc2V0LnBhbm5pbmcgPSBmYWxzZTtcbiAgICAgIGNoYXJ0LnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25QYW5uaW5nKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25QYW5uaW5nKTtcbiAgICB9XG4gIH1cbiAgX3NldENoYXJ0U2NhbGUoY2hhcnQsIG5ld1NjYWxlKSB7XG4gICAgbGV0IGxhc3RUZiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNoYXJ0KS50cmFuc2Zvcm07XG5cbiAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJztcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuXG4gICAgICBpZiAoIWxhc3RUZi5pbmNsdWRlcygnM2QnKSkge1xuICAgICAgICBtYXRyaXhbMF0gPSAnbWF0cml4KCcgKyBuZXdTY2FsZTtcbiAgICAgICAgbWF0cml4WzNdID0gbmV3U2NhbGU7XG4gICAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9IGxhc3RUZiArICcgc2NhbGUoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnKSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFydC5zdHlsZS50cmFuc2Zvcm0gPSBsYXN0VGYgKyAnIHNjYWxlM2QoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnLCAxKSc7XG4gICAgICB9XG4gICAgfVxuICAgIGNoYXJ0LmRhdGFzZXQuc2NhbGUgPSBuZXdTY2FsZTtcbiAgfVxuICBfb25XaGVlbGluZyhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgbmV3U2NhbGUgPSBldmVudC5kZWx0YVkgPiAwID8gMC44IDogMS4yO1xuXG4gICAgdGhpcy5fc2V0Q2hhcnRTY2FsZSh0aGlzLmNoYXJ0LCBuZXdTY2FsZSk7XG4gIH1cbiAgX2dldFBpbmNoRGlzdChldmVudCkge1xuICAgIHJldHVybiBNYXRoLnNxcnQoKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WCkgKlxuICAgICAgKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WCkgK1xuICAgICAgKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WSkgKlxuICAgICAgKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WSkpO1xuICB9XG4gIF9vblRvdWNoU3RhcnQoZXZlbnQpIHtcbiAgICBsZXQgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuXG4gICAgaWYgKGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgIGxldCBkaXN0ID0gdGhpcy5fZ2V0UGluY2hEaXN0KGV2ZW50KTtcblxuICAgICAgY2hhcnQuZGF0YXNldC5waW5jaGluZyA9IHRydWU7XG4gICAgICBjaGFydC5kYXRhc2V0LnBpbmNoRGlzdFN0YXJ0ID0gZGlzdDtcbiAgICB9XG4gIH1cbiAgX29uVG91Y2hNb3ZlKGV2ZW50KSB7XG4gICAgbGV0IGNoYXJ0ID0gdGhpcy5jaGFydDtcblxuICAgIGlmIChjaGFydC5kYXRhc2V0LnBpbmNoaW5nKSB7XG4gICAgICBsZXQgZGlzdCA9IHRoaXMuX2dldFBpbmNoRGlzdChldmVudCk7XG5cbiAgICAgIGNoYXJ0LmRhdGFzZXQucGluY2hEaXN0RW5kID0gZGlzdDtcbiAgICB9XG4gIH1cbiAgX29uVG91Y2hFbmQoZXZlbnQpIHtcbiAgICBsZXQgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuXG4gICAgaWYgKGNoYXJ0LmRhdGFzZXQucGluY2hpbmcpIHtcbiAgICAgIGNoYXJ0LmRhdGFzZXQucGluY2hpbmcgPSBmYWxzZTtcbiAgICAgIGxldCBkaWZmID0gY2hhcnQuZGF0YXNldC5waW5jaERpc3RFbmQgLSBjaGFydC5kYXRhc2V0LnBpbmNoRGlzdFN0YXJ0O1xuXG4gICAgICBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgdGhpcy5fc2V0Q2hhcnRTY2FsZShjaGFydCwgMSk7XG4gICAgICB9IGVsc2UgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgIHRoaXMuX3NldENoYXJ0U2NhbGUoY2hhcnQsIC0xKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==
