{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap dcef95cc250d4527bfa7","webpack:///./src/index.js"],"names":["OrgChart","chartContainer","data","nodeTitle","nodeId","toggleSiblingsResp","depth","chartClass","exportButton","exportFilename","parentNodeSymbol","draggable","direction","pan","zoom","_name","options","_init","opts","chart","document","createElement","setAttribute","addEventListener","event","node","_closest","target","el","classList","contains","querySelector","removeClass","nodeName","buildHierarchy","_buildJsonDS","children","ajaxURL","_attachRel","spinner","_getJSON","then","resp","catch","err","console","error","finally","parentNode","removeChild","appendChild","fn","expr","sibs","parseNode","child","matches","push","preSib","previousElementSibling","nextSib","nextElementSibling","offsetParent","elements","className","forEach","add","classNames","indexOf","split","remove","prop","val","style","attr","removeAttr","url","Promise","resolve","reject","client","XMLHttpRequest","handler","readyState","status","response","Error","statusText","open","onreadystatechange","responseType","setRequestHeader","send","li","subObj","firstChild","textContent","trim","tagName","length","id","subLi","flags","relationship","item","offsetWidth","flag","topEdge","bottomEdge","leftEdge","type","getNodeState","visible","toggle","_switchHorizontalArrow","currentRoot","nodeData","callback","table","createNode","dataset","nodeDiv","innerHTML","insertBefore","lastChild","temp","tr","_addClass","slice","parent","_repaint","_isInAction","_switchVerticalArrow","nodeContainer","siblings","_siblings","sib","inAjax","preSibs","_prevAll","querySelectorAll","_isVisible","nextSibs","_nextAll","animatedNodes","concat","lines","line","visibility","removeAttribute","someLines","_removeClass","hideSiblings","_css","grandfatherVisible","_removeAttr","hideAncestorsSiblings","_buildParentNode","showParent","stopPropagation","parentState","exist","tis","startLoading","Object","keys","addParent","_endLoading","$node","closest","count","buildChildNode","call","append","find","prepend","showDescendants","childrenState","fquerySelectorAll","some","hideDescendants","_startLoading","dataSet","addChildren","assign","hEdge","siblingsState","prevSib","showSiblings","families","addSiblings","that","toggleBtn","descWrapper","descendants","map","ul","subToggleBtn","level","chilren","parentId","nodeContent","verticalDepth","Number","substr","$nodeDiv","rightEdge","symbol","title","_hoverNode","_clickNode","_clickTopEdge","_clickBottomEdge","_clickToggleButton","_clickHorizontalEdge","on","origEvent","originalEvent","isFirefox","test","window","navigator","userAgent","toLowerCase","dataTransfer","setData","css","ghostNode","nodeCover","createElementNS","get","$","transValues","scale","Math","abs","parseFloat","outerWidth","outerHeight","xOffset","offsetX","yOffset","offsetY","ghostNodeWrapper","src","XMLSerializer","serializeToString","setDragImage","$dragged","$dragZone","eq","$dragHier","each","index","dropCriteria","addClass","preventDefault","$dropZone","dropEffect","$orgchart","after","end","dropColspan","parseInt","horizontalEdges","next","addBack","before","$dropSibs","dragColspan","$dragSibs","triggerHandler","appendTo","nodeWrapper","childNodes","hasChildren","isVerticalNode","_createNode","isHidden","isVerticalLayer","i","$nodeWrapper","$appendTo","$childNodes","lineLayer","nodeLayer","nodeCell"],"mappings":"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","file":"orgchart.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"orgchart\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"orgchart\"] = factory();\n\telse\n\t\troot[\"orgchart\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap dcef95cc250d4527bfa7\n **/","export default class OrgChart {\n  constructor({\n    chartContainer,\n    data,\n    nodeTitle = 'name',\n    nodeId = 'id',\n    toggleSiblingsResp = false,\n    depth = 999,\n    chartClass = '',\n    exportButton = false,\n    exportFilename = 'OrgChart',\n    parentNodeSymbol = 'fa-users',\n    draggable = false,\n    direction = 't2b',\n    pan = false,\n    zoom = false\n  } = {}) {\n    this._name = 'OrgChart';\n    this.options = {\n      'chartContainer': chartContainer,\n      'nodeTitle': nodeTitle,\n      'nodeId': nodeId,\n      'toggleSiblingsResp': toggleSiblingsResp,\n      'depth': depth,\n      'chartClass': chartClass,\n      'exportButton': exportButton,\n      'exportFilename': exportFilename,\n      'parentNodeSymbol': parentNodeSymbol,\n      'draggable': draggable,\n      'direction': direction,\n      'pan': pan,\n      'zoom': zoom\n    };\n\n    this._init();\n  }\n  get name() {\n    return this._name;\n  }\n  _init() {\n    // build the org-chart\n    let opts = this.options,\n      data = opts.data,\n      chart = document.createElement('div');\n\n    this.chart = chart;\n\n    chart.setAttribute('data-options', opts);\n    chart.setAttribute('class', 'orgchart' + (opts.chartClass !== '' ? ' ' + opts.chartClass : '') +\n      (opts.direction !== 't2b' ? ' ' + opts.direction : ''));\n    chart.addEventListener('click', function (event) {\n      let node = this._closest(event.target, function (el) {\n        return el.classList.contains('node');\n      });\n\n      if (!node) {\n        chart.querySelector('.node.focused').removeClass('focused');\n      }\n    }, false);\n    if (typeof data === 'object') {\n      if (data.nodeName) { // ul datasource\n        this.buildHierarchy(chart, this._buildJsonDS(data.children[0], 0, opts));\n      } else { // local json datasource\n        this.buildHierarchy(chart, opts.ajaxURL ? data : this._attachRel(data, '00'), 0, opts);\n      }\n    } else {\n      let spinner = document.createElement('i');\n\n      spinner.setAttribute('class', 'fa fa-circle-o-notch fa-spin spinner');\n      this._getJSON(data)\n      .then(function (resp) {\n        this.buildHierarchy(chart, opts.ajaxURL ? resp : this._attachRel(resp, '00'), 0, opts);\n      })\n      .catch(function (err) {\n        console.error('failed to fetch datasource for orgchart', err);\n      })\n      .finally(function () {\n        let spinner = chart.querySelector('.spinner');\n\n        spinner.parentNode.removeChild(spinner);\n      });\n    }\n    opts.chartContainer.appendChild(chart);\n  }\n  _closest(el, fn) {\n    return el && (fn(el) ? el : this._closest(el.parentNode, fn));\n  }\n  _siblings(el, expr) {\n    let sibs = [];\n\n    for (let child of el.parseNode.children) {\n      if (child !== el) {\n        if (expr) {\n          if (el.matches(expr)) {\n            sibs.push(child);\n          }\n        } else {\n          sibs.push(child);\n        }\n      }\n    }\n    return sibs;\n  }\n  _prevAll(el, expr) {\n    let sibs = [];\n    let preSib = el.previousElementSibling;\n\n    while (preSib) {\n      if (!expr || el.matches(expr)) {\n        sibs.push(preSib);\n      }\n      preSib = preSib.previousElementSibling;\n    }\n    return sibs;\n  }\n  _nextAll(el, expr) {\n    let sibs = [];\n    let nextSib = el.nextElementSibling;\n\n    while (nextSib) {\n      if (!expr || el.matches(expr)) {\n        sibs.push(nextSib);\n      }\n      nextSib = nextSib.nextElementSibling;\n    }\n    return sibs;\n  }\n  _isVisible(el) {\n    return el.offsetParent !== null;\n  }\n  _addClass(elements, className) {\n    elements.forEach(function (el) {\n      el.classList.add(className);\n    });\n  }\n  _removeClass(elements, classNames) {\n    elements.forEach(function (el) {\n      if (classNames.indexOf(' ')) {\n        for (let className of classNames.split(' ')) {\n          el.classList.remove(className);\n        }\n      } else {\n        el.classList.remove(classNames);\n      }\n    });\n  }\n  _css(elements, prop, val) {\n    elements.forEach(function (el) {\n      el.style[prop] = val;\n    });\n  }\n  _removeAttr(elements, attr) {\n    elements.forEach(function (el) {\n      el.removeAttr(attr);\n    });\n  }\n  _getJSON(url) {\n    return new Promise(function (resolve, reject) {\n      let client = new XMLHttpRequest();\n\n      function handler() {\n        if (this.readyState !== 4) {\n          return;\n        }\n        if (this.status === 200) {\n          resolve(this.response);\n        } else {\n          reject(new Error(this.statusText));\n        }\n      }\n      client.open('GET', url);\n      client.onreadystatechange = handler;\n      client.responseType = 'json';\n      client.setRequestHeader('Accept', 'application/json');\n      client.send();\n    });\n  }\n  _buildJsonDS(li) {\n    var subObj = {\n      'name': li.firstChild.textContent.trim(),\n      'relationship': (li.parentNode.parentNode.tagName === 'li' ? '1' : '0') +\n        (li.parentNode.children > 1 ? 1 : 0) + (li.children.length ? 1 : 0)\n    };\n\n    if (li.id) {\n      subObj.id = li.id;\n    }\n    for (let subLi of li.querySelector('ul').children) {\n      if (!subObj.children) { subObj.children = []; }\n      subObj.children.push(this._buildJsonDS(subLi));\n    }\n    return subObj;\n  }\n  _attachRel(data, flags) {\n    data.relationship = flags + (data.children && data.children.length > 0 ? 1 : 0);\n    if (data.children) {\n      for (let item of data.children) {\n        this._attachRel(item, '1' + (data.children.length > 1 ? 1 : 0));\n      }\n    }\n    return data;\n  }\n  _repaint(node) {\n    if (node) {\n      node.style.offsetWidth = node.offsetWidth;\n    }\n  }\n  // whether the cursor is hovering over the node\n  _isInAction(node) {\n    return node.querySelector(':scope > .edge').className.indexOf('fa-') > -1;\n  }\n  hoverNode(event) {\n    let node = event.target,\n      flag = false,\n      topEdge = node.querySelector(':scope > .topEdge'),\n      bottomEdge = node.querySelector(':scope > .bottomEdge'),\n      leftEdge = node.querySelector(':scope > .leftEdge');\n\n    if (event.type === 'mouseenter') {\n      if (topEdge) {\n        flag = this.getNodeState(node, 'parent').visible;\n        topEdge.classList.toggle('fa-chevron-up', !flag);\n        topEdge.classList.toggle('fa-chevron-down', flag);\n      }\n      if (bottomEdge) {\n        flag = this.getNodeState(node, 'children').visible;\n        bottomEdge.classList.toggle('fa-chevron-down', !flag);\n        bottomEdge.classList.toggle('fa-chevron-up', flag);\n      }\n      if (leftEdge) {\n        this._switchHorizontalArrow(node);\n      }\n    } else {\n      node.querySelector(':scope > .edge')\n        .classList.remove('fa-chevron-up', 'fa-chevron-down', 'fa-chevron-right', 'fa-chevron-left');\n    }\n  }\n  // define node click event handler\n  _clickNode(event) {\n    let node = event.target,\n      chart = this._closest(node, function (el) {\n        return el.classList.contains('orgchart');\n      });\n\n    chart.querySelector('.focused').classList.remove('focused');\n    node.classList.add('focused');\n  }\n  // build the parent node of specific node\n  _buildParentNode(currentRoot, nodeData, opts, callback) {\n    let table = document.createElement('table');\n\n    nodeData.relationship = '001';\n    this.createNode(nodeData, 0, opts || this.chart.dataset.options)\n      .then(function (nodeDiv) {\n        let chart = this.chart;\n\n        nodeDiv.classList.remove('slide-up');\n        nodeDiv.classList.add('slide-down');\n        table.innerHTML = `\n          <tr class=\"hidden\"><td colspan=\"2\"></td></tr>\n          <tr class=\"lines hidden\"><td colspan=\"2\"><div class=\"downLine\"></div></td></tr>\n          <tr class=\"lines hidden\"><td class=\"rightLine\">&nbsp;</td><td class=\"leftLine\">&nbsp;</td></tr>\n          <tr class=\"nodes\"><td colspan=\"2\"></td></tr>\n        `;\n        table.firstChild.firstChild.appendChild(nodeDiv);\n        chart.insertBefore(table, chart.firstChild);\n        table.lastChild.firstChild.appendChild(chart.lastChild);\n        callback();\n      })\n      .catch(function (err) {\n        console.error('Failed to create parent node', err);\n      });\n  }\n  // show the parent node of the specified node\n  showParent(node) {\n    // just show only one superior level\n    let temp = this._closest(node, function (el) {\n      return el.nodeName === 'TABLE';\n    }).parentNode.children;\n\n    for (let tr of temp) {\n      tr.classList.remove('hidden');\n    }\n    // just show only one line\n    this._addClass(temp[2].children.slice(1, -1), 'hidden');\n    // show parent node with animation\n    let parent = temp[0].querySelector('.node');\n\n    this._repaint(parent);\n    parent.classList.add('slide');\n    parent.classList.remove('slide-down');\n    parent.addEventListener('transitionend', function () {\n      parent.classList.remove('slide');\n      if (this._isInAction(node)) {\n        this._switchVerticalArrow(node.querySelector(':scope > .topEdge'));\n      }\n    }, { 'once': true});\n  }\n  // hide the sibling nodes of the specified node\n  hideSiblings(node, direction) {\n    let nodeContainer = this._closest(node, function (el) {\n      return el.nodeName === 'TABLE';\n    }).parentNode;\n\n    let siblings = this._siblings(nodeContainer);\n\n    for (let sib of siblings) {\n      if (sib.querySelector('.spinner')) {\n        this.chart.dataset.inAjax = false;\n      }\n    }\n\n    if (!direction || (direction && direction === 'left')) {\n      let preSibs = this._prevAll(nodeContainer);\n\n      for (let sib of preSibs) {\n        for (let node of sib.querySelectorAll('.node')) {\n          if (!this._isVisible(node)) {\n            node.classList.add('slide', 'slide-right');\n          }\n        }\n      }\n    }\n    if (!direction || (direction && direction !== 'left')) {\n      let nextSibs = this._nextAll(nodeContainer);\n\n      for (let sib of nextSibs) {\n        for (let node of sib.querySelectorAll('.node')) {\n          if (!this._isVisible(node)) {\n            node.classList.add('slide', 'slide-left');\n          }\n        }\n      }\n    }\n\n    let animatedNodes = [];\n\n    for (let sib of this._siblings(nodeContainer)) {\n      animatedNodes.concat(sib.querySelectorAll('.slide'));\n    }\n    let lines = [];\n\n    for (let node of animatedNodes) {\n      let temp = this._closest(node, function (el) {\n        return el.classList.contains('nodes');\n      }).parentNode.firstChild;\n\n      lines.push(temp);\n      lines.push(temp.nextElementSibling);\n    }\n    lines.forEach(function (line) {\n      line.style.visibility = 'hidden';\n    });\n\n    animatedNodes[0].addEventListener('transitionend', function () {\n      lines.forEach(function (line) {\n        line.removeAttribute('style');\n      });\n      let sibs = [];\n\n      if (direction) {\n        if (direction === 'left') {\n          sibs = this._prevAll(nodeContainer, ':not(.hidden)');\n        } else {\n          sibs = this._nextAll(nodeContainer, ':not(.hidden)');\n        }\n      } else {\n        sibs = this._siblings(nodeContainer);\n      }\n      let temp = this._closest(nodeContainer, function (el) {\n        return el.classList.contains('nodes');\n      }).previousElementSibling.querySelectorAll(':scope > :not(.hidden)');\n\n      let someLines = temp.slice(1, direction ? sibs.length * 2 + 1 : -1);\n\n      this._addClass(someLines, 'hidden');\n      this._removeClass(animatedNodes, 'slide');\n      sibs.querySelectorAll('.node').slice(1).forEach(function (node) {\n        if (this._isVisible(node)) {\n          node.classList.remove('slide-left', 'slide-right');\n          node.classList.add('slide-up');\n        }\n      });\n      this._addClass(sibs.querySelectorAll('.lines'), 'hidden');\n      this._addClass(sibs.querySelectorAll('.nodes'), 'hidden');\n      this._addClass(sibs.querySelectorAll('.verticalNodes'), 'hidden');\n      this._addClass(sibs, 'hidden');\n\n      if (this._isInAction(node)) {\n        this._switchHorizontalArrow(node);\n      }\n    }, { 'once': true });\n  }\n  // recursively hide the ancestor node and sibling nodes of the specified node\n  hideAncestorsSiblings(node) {\n    let temp = this._closest(node, function (el) {\n      return el.classList.contains('nodes');\n    }).parentNode.children;\n\n    if (temp[0].querySelector('.spinner')) {\n      this.chart.dataset.inAjax = false;\n    }\n    // hide the sibling nodes\n    if (this.getNodeState(node, 'siblings').visible) {\n      this.hideSiblings(node);\n    }\n    // hide the lines\n    let lines = temp.slice(1);\n\n    this._css(lines, 'visibility', 'hidden');\n    // hide the superior nodes with transition\n    let parent = temp[0].querySelector('.node'),\n      grandfatherVisible = this.getNodeState(parent, 'parent').visible;\n\n    if (parent && this._isVisible(parent)) {\n      parent.classList.add('slide', 'slide-down');\n      parent.addEventListener('transitionend', function () {\n        parent.classList.remove('slide');\n        this._removeAttr(lines, 'style');\n        this._addClass(temp, 'hidden');\n      }, { 'once': true });\n    }\n    // if the current node has the parent node, hide it recursively\n    if (parent && grandfatherVisible) {\n      this.hideAncestorsSiblings(parent);\n    }\n  }\n  // exposed method\n  addParent(currentRoot, data, opts) {\n    this._buildParentNode(currentRoot, data, opts, function () {\n      if (!currentRoot.querySelector(':scope .topEdge').length) {\n        let topEdge = document.createElement('i');\n\n        topEdge.setAttribute('class', 'edge verticalEdge topEdge fa');\n        currentRoot.appendChild(topEdge);\n      }\n      this.showParent(currentRoot);\n    });\n  }\n  // define click event handler for the top edge\n  _clickTopEdge(event) {\n    event.stopPropagation();\n    let topEdge = event.target,\n      node = topEdge.parentNode,\n      parentState = this.getNodeState(node, 'parent'),\n      opts = this.dataset.options;\n\n    if (parentState.exist) {\n      let temp = this._closest(node, function (el) {\n        return el.classList.contains('nodes');\n      });\n      let parent = temp.parentNode.firstChild.querySelector('.node');\n\n      if (parent.classList.contains('slide')) { return; }\n      // hide the ancestor nodes and sibling nodes of the specified node\n      if (parentState.visible) {\n        this.hideAncestorsSiblings(node);\n        parent.addEventListener('transitionend', function () {\n          if (this._isInAction(node)) {\n            this._switchVerticalArrow(topEdge);\n            tis._switchHorizontalArrow(node);\n          }\n        }, { 'once': true });\n      } else { // show the ancestors and siblings\n        this.showParent(node);\n      }\n    } else {\n      // load the new parent node of the specified node by ajax request\n      var nodeId = topEdge.parentNode.id;\n      // start up loading status\n      if (startLoading(topEdge, node, opts)) {\n        // load new nodes\n        this._getJSON(typeof opts.ajaxURL.parent === 'function' ? opts.ajaxURL.parent(nodeData) : opts.ajaxURL.parent + nodeId)\n        .then(function(resp) {\n          let chart = this._closest(node, function (el) {\n            return el.classList.contains('orgchart');\n          });\n          if (chart.dataset.inAjax) {\n            if (!Object.keys(resp).length) {\n              this.addParent(node, data, opts);\n            }\n          }\n        })\n        .catch(function(err) {\n          console.error('Failed to get parent node data.', err);\n        })\n        .finally(function() {\n          this._endLoading(topEdge, node, opts);\n        });\n      }\n    }\n  }\n  // exposed method\n  addChildren(node, data, opts) {\n    var opts = opts || $node.closest('.orgchart').data('options');\n    var count = 0;\n    buildChildNode.call($node.closest('.orgchart').parent(), $node.closest('table'), data, opts, function() {\n      if (++count === data.children.length) {\n        if (!$node.children('.bottomEdge').length) {\n          $node.append('<i class=\"edge verticalEdge bottomEdge fa\"></i>');\n        }\n        if (!$node.find('.symbol').length) {\n          $node.children('.title').prepend('<i class=\"fa '+ opts.parentNodeSymbol + ' symbol\"></i>');\n        }\n        showDescendants($node);\n      }\n    });\n  }\n  // bind click event handler for the bottom edge\n  _clickBottomEdge(event) {\n    event.stopPropagation();\n    let bottomEdge = event.target,\n      node = bottomEdge.parentNode,\n      childrenState = this.getNodeState(node, 'children');\n\n    if (childrenState.exist) {\n      let temp = this._closest(node, function (el) {\n        return el.matches('tr');\n      }).parentNode.children[3];\n\n      if (temp.fquerySelectorAll('.node').some((node) => this._isVisible(node) && node.matches('.slide'))) { return; }\n      // hide the descendant nodes of the specified node\n      if (childrenState.visible) {\n        this.hideDescendants(node);\n      } else { // show the descendants\n        this.showDescendants(node);\n      }\n    } else { // load the new children nodes of the specified node by ajax request\n      let nodeId = bottomEdge.parentNode.id;\n \n      if (this._startLoading(bottomEdge, node, opts)) {\n        this._getJSON(typeof opts.ajaxURL.children === 'function' ? opts.ajaxURL.children(nodeData) : opts.ajaxURL.children + nodeId)\n        .then(function(resp) {\n          if (this.chart.dataSet.inAjax) {\n            if (resp.children.length) {\n              this.addChildren(node, resp, Object.assign({}, opts, { depth: 0 }));\n            }\n          }\n        })\n        .catch(function(err) {\n          console.error('Failed to get children nodes data', err);\n        })\n        .finally(function() {\n          this._endLoading(bottomEdge, node, opts);\n        });\n      }\n    }\n  }\n  // bind click event handler for the left and right edges\n  _clickHorizontalEdge(event) {\n    event.stopPropagation();\n    let hEdge = event.target,\n      node = hEdge.parentNode,\n      siblingsState = this.getNodeState(node, 'siblings');\n      if (siblingsState.exist) {\n        let temp = this._closest(node, function (el) {\n            return el.matches('table');\n          }).parentNode,\n          siblings = this._siblings(temp);\n\n        if (siblings.querySelectorAll('.node').some((node) => this._isVisible(node) && node.matches('.slide'))) { return; }\n        if (opts.toggleSiblingsResp) {\n          let prevSib = this._closest(node, function (el) {\n              return el.matches('table');\n            }).parentNode.previousElementSibling,\n            nextSib = this._closest(node, function (el) {\n              return el.matches('table');\n            }).parentNode.nextElementSibling;\n          if (hEdge.matches('.leftEdge')) {\n            if (prevSib.matches('.hidden')) {\n              this.showSiblings(node, 'left');\n            } else {\n              this.hideSiblings(node, 'left');\n            }\n          } else {\n            if (nextSib.matches('.hidden')) {\n              this.showSiblings(node, 'right');\n            } else {\n              this.hideSiblings(node, 'right');\n            }\n          }\n        } else {\n          if (siblingsState.visible) {\n            this.hideSiblings(node);\n          } else {\n            this.showSiblings(node);\n          }\n        }\n      } else {\n        // load the new sibling nodes of the specified node by ajax request\n        let nodeId = hEdge.parentNode.id,\n          url = (this.getNodeState(node, 'parent').exist) ?\n            (typeof opts.ajaxURL.siblings === 'function' ? opts.ajaxURL.siblings(nodeData) : opts.ajaxURL.siblings + nodeId) :\n            (typeof opts.ajaxURL.families === 'function' ? opts.ajaxURL.families(nodeData) : opts.ajaxURL.families + nodeId);\n\n        if (this._startLoading(hEdge, node, opts)) {\n          this._getJSON(url)\n          .then(function(resp) {\n            if (this.chart.dataSet.inAjax) {\n              if (resp.siblings || resp.children) {\n                this.addSiblings(node, resp, opts);\n              }\n            }\n          })\n          .catch(function(err) {\n            console.err('Failed to get sibling nodes data', err);\n          })\n          .finally(function() {\n            this._endLoading(hEdge, node, opts);\n          });\n        }\n      }\n  }\n  // event handler for toggle buttons in Hybrid(horizontal + vertical) OrgChart\n  _clickToggleButton (event) {\n    let that = this, \n      toggleBtn = event.target,\n      descWrapper = toggleBtn.parentNode.nextElementSibling,\n      descendants = descWrapper.querySelectorAll('.node'),\n      children = descWrapper.children.map(function (item) {\n        return item.querySelector('.node');\n      });\n\n    if (children.some((item) => item.matches('.slide'))) { return; }\n    toggleBtn.classList.toggle('fa-plus-square');\n    toggleBtn.classList.toggle('fa-minus-square');\n    if (descendants[0].matches('.slide-up')) {\n      descWrapper.classList.remove('hidden');\n      this._repaint(children[0]);\n      this._addClass(children, 'slide');\n      this._removeClass(children, 'slide-up');\n      children[0].addEventListener('transitionend', function() {\n        that._removeClass(children, 'slide');\n      }, { 'once': true });\n    } else {\n      this._addClass(descendants, 'slide slide-up');\n      descendants[0].addEventListener('transitionend', function() {\n        that._removeClass(descendants, 'slide');\n        let ul = this._closest(descendants[0], function (el) {\n          return el.matches('ul');\n        });\n\n        ul.classList.add('hidden');\n      }, { 'once': true })\n      let subToggleBtn = descendants[0].querySelector('.toggleBtn').classList.remove('fa-minus-square');\n\n      subToggleBtn.classList.add('fa-plus-square');\n    }\n  }\n  // create node\n  _createNode(nodeData, level, opts) {\n    return new Promise(function (resolve, reject) {\n      for (let child of nodeData.chilren) {\n        child.parentId = nodeData.id;\n      }\n\n    // construct the content of node\n    let nodeDiv = document.createElement('div');\n    if (nodeData[opts.nodeId]) {\n      nodeDiv.id = nodeData[opts.nodeId];\n    }\n    nodeData.setAttribute('class', 'node ' + (nodeData.className || '') +  (level >= opts.depth ? ' slide-up' : ''));\n    if (opts.draggable) {\n      nodeDiv.setAttribute('draggable', true);\n    }\n    if (nodeData.parentId) {\n      nodeDiv.setAttribute('data-parent', nodeData.parentId);\n    }\n    nodeDiv.innerHTML = `\n      <div class=\"title\">${nodeData[opts.nodeTitle]}</div>\n      ${opts.nodeContent ? `<div class=\"content\">${nodeData[opts.nodeContent]}</div>` : ''}\n    `;\n    // append 4 direction arrows or expand/collapse buttons\n    let flags = nodeData.relationship || '';\n\n    if (opts.verticalDepth && (level + 2) > opts.verticalDepth) {\n      if ((level + 1) >= opts.verticalDepth && Number(flags.substr(2,1))) {\n        let toggleBtn = document.createElement('i');\n        toggleBtn.setAttribute('class', 'toggleBtn fa fa-minus-square');\n        nodeDiv.appendChild(toggleBtn);\n      }\n    } else {\n      if (Number(flags.substr(0,1))) {\n        let topEdge = document.createElement('i');\n        topEdge.setAttribute('class', 'edge verticalEdge topEdge fa');\n        $nodeDiv.appendChild(topEdge);\n      }\n      if(Number(flags.substr(1,1))) {\n        let rightEdge = document.createElement('i');\n        rightEdge.setAttribute('class', 'edge horizontalEdge rightEdge fa');\n        nodeDiv.appendChild(rightEdge);\n        let leftEdge = document.createElement('i');\n        rightEdge.setAttribute('class', 'edge horizontalEdge leftEdge fa');\n        nodeDiv.appendChild(leftEdge);\n      }\n      if(Number(flags.substr(2,1))) {\n        let bottomEdge = document.createElement('i');\n        bottomEdge.setAttribute('class', 'edge verticalEdge bottomEdge fa');\n        nodeDiv.appendChild(bottomEdge);\n        let symbol = document.createElement('i');\n        symbol.setAttribute('class', 'fa '+ opts.parentNodeSymbol + ' symbol');\n        let title = nodeDiv.querySelector('.scope > .title');\n        title.insertBefore(symbol, title.children[0]);\n      }\n    }\n\n      nodeDiv.addEventListener('mouseenter', this._hoverNode);\n      nodeDiv.addEventListener('mouseleave', this._hoverNode);\n      nodeDiv.addEventListener('click', this._clickNode);\n      nodeDiv.querySelector('.topEdge').addEventListener('click', this._clickTopEdge);\n      nodeDiv.querySelector('.bottomEdge').addEventListener('click', this._clickBottomEdge);\n      nodeDiv.querySelector('.toggleBtn').addEventListener('click', this._clickToggleButton);\n      nodeDiv.querySelector('.leftEdge').addEventListener('click', this._clickHorizontalEdge);\n      nodeDiv.querySelector('.rightEdge').addEventListener('click', this._clickHorizontalEdge);\n\n    if (opts.draggable) {\n      $nodeDiv.on('dragstart', function (event) {\n        var origEvent = event.originalEvent;\n        var isFirefox = /firefox/.test(window.navigator.userAgent.toLowerCase());\n        if (isFirefox) {\n          origEvent.dataTransfer.setData('text/html', 'hack for firefox');\n        }\n        // if users enable zoom or direction options\n        if ($nodeDiv.closest('.orgchart').css('transform') !== 'none') {\n          var ghostNode, nodeCover;\n          if (!document.querySelector('.ghost-node')) {\n            ghostNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n            ghostNode.classList.add('ghost-node');\n            nodeCover = document.createElementNS('http://www.w3.org/2000/svg','rect');\n            ghostNode.appendChild(nodeCover);\n            $nodeDiv.closest('.orgchart').append(ghostNode);\n          } else {\n            ghostNode = $nodeDiv.closest('.orgchart').children('.ghost-node').get(0);\n            nodeCover = $(ghostNode).children().get(0);\n          }\n          var transValues = $nodeDiv.closest('.orgchart').css('transform').split(',');\n          var scale = Math.abs(window.parseFloat((opts.direction === 't2b' || opts.direction === 'b2t') ? transValues[0].slice(transValues[0].indexOf('(') + 1) : transValues[1]));\n          ghostNode.setAttribute('width', $nodeDiv.outerWidth(false));\n          ghostNode.setAttribute('height', $nodeDiv.outerHeight(false));\n          nodeCover.setAttribute('x',5 * scale);\n          nodeCover.setAttribute('y',5 * scale);\n          nodeCover.setAttribute('width', 120 * scale);\n          nodeCover.setAttribute('height', 40 * scale);\n          nodeCover.setAttribute('rx', 4 * scale);\n          nodeCover.setAttribute('ry', 4 * scale);\n          nodeCover.setAttribute('stroke-width', 1 * scale);\n          var xOffset = origEvent.offsetX * scale;\n          var yOffset = origEvent.offsetY * scale;\n          if (opts.direction === 'l2r') {\n            xOffset = origEvent.offsetY * scale;\n            yOffset = origEvent.offsetX * scale;\n          } else if (opts.direction === 'r2l') {\n            xOffset = $nodeDiv.outerWidth(false) - origEvent.offsetY * scale;\n            yOffset = origEvent.offsetX * scale;\n          } else if (opts.direction === 'b2t') {\n            xOffset = $nodeDiv.outerWidth(false) - origEvent.offsetX * scale;\n            yOffset = $nodeDiv.outerHeight(false) - origEvent.offsetY * scale;\n          }\n          if (isFirefox) { // hack for old version of Firefox(< 48.0)\n            nodeCover.setAttribute('fill', 'rgb(255, 255, 255)');\n            nodeCover.setAttribute('stroke', 'rgb(191, 0, 0)');\n            var ghostNodeWrapper = document.createElement('img');\n            ghostNodeWrapper.src = 'data:image/svg+xml;utf8,' + (new XMLSerializer()).serializeToString(ghostNode);\n            origEvent.dataTransfer.setDragImage(ghostNodeWrapper, xOffset, yOffset);\n          } else {\n            origEvent.dataTransfer.setDragImage(ghostNode, xOffset, yOffset);\n          }\n        }\n        var $dragged = $(this);\n        var $dragZone = $dragged.closest('.nodes').siblings().eq(0).find('.node:first');\n        var $dragHier = $dragged.closest('table').find('.node');\n        $dragged.closest('.orgchart')\n          .data('dragged', $dragged)\n          .find('.node').each(function(index, node) {\n            if ($dragHier.index(node) === -1) {\n              if (opts.dropCriteria) {\n                if (opts.dropCriteria($dragged, $dragZone, $(node))) {\n                  $(node).addClass('allowedDrop');\n                }\n              } else {\n                $(node).addClass('allowedDrop');\n              }\n            }\n          });\n      })\n      .on('dragover', function (event) {\n        event.preventDefault();\n        var $dropZone = $(this);\n        var $dragged = $dropZone.closest('.orgchart').data('dragged');\n        var $dragZone = $dragged.closest('.nodes').siblings().eq(0).find('.node:first');\n        if ($dragged.closest('table').find('.node').index($dropZone) > -1 ||\n          (opts.dropCriteria && !opts.dropCriteria($dragged, $dragZone, $dropZone))) {\n          event.originalEvent.dataTransfer.dropEffect = 'none';\n        }\n      })\n      .on('dragend', function(event) {\n        $(this).closest('.orgchart').find('.allowedDrop').removeClass('allowedDrop');\n      })\n      .on('drop', function(event) {\n        var $dropZone = $(this);\n        var $orgchart = $dropZone.closest('.orgchart');\n        var $dragged = $orgchart.data('dragged');\n        $orgchart.find('.allowedDrop').removeClass('allowedDrop');\n        var $dragZone = $dragged.closest('.nodes').siblings().eq(0).children();\n        // firstly, deal with the hierarchy of drop zone\n        if (!$dropZone.closest('tr').siblings().length) { // if the drop zone is a leaf node\n          $dropZone.append('<i class=\"edge verticalEdge bottomEdge fa\"></i>')\n            .parent().attr('colspan', 2)\n            .parent().after('<tr class=\"lines\"><td colspan=\"2\"><div class=\"downLine\"></div></td></tr>'\n            + '<tr class=\"lines\"><td class=\"rightLine\">&nbsp;</td><td class=\"leftLine\">&nbsp;</td></tr>'\n            + '<tr class=\"nodes\"></tr>')\n            .siblings(':last').append($dragged.find('.horizontalEdge').remove().end().closest('table').parent());\n        } else {\n          var dropColspan = parseInt($dropZone.parent().attr('colspan')) + 2;\n          var horizontalEdges = '<i class=\"edge horizontalEdge rightEdge fa\"></i><i class=\"edge horizontalEdge leftEdge fa\"></i>';\n          $dropZone.closest('tr').next().addBack().children().attr('colspan', dropColspan);\n          if (!$dragged.find('.horizontalEdge').length) {\n            $dragged.append(horizontalEdges);\n          }\n          $dropZone.closest('tr').siblings().eq(1).children(':last').before('<td class=\"leftLine topLine\">&nbsp;</td><td class=\"rightLine topLine\">&nbsp;</td>')\n            .end().next().append($dragged.closest('table').parent());\n          var $dropSibs = $dragged.closest('table').parent().siblings().find('.node:first');\n          if ($dropSibs.length === 1) {\n            $dropSibs.append(horizontalEdges);\n          }\n        }\n        // secondly, deal with the hierarchy of dragged node\n        var dragColspan = parseInt($dragZone.attr('colspan'));\n        if (dragColspan > 2) {\n          $dragZone.attr('colspan', dragColspan - 2)\n            .parent().next().children().attr('colspan', dragColspan - 2)\n            .end().next().children().slice(1, 3).remove();\n          var $dragSibs = $dragZone.parent().siblings('.nodes').children().find('.node:first');\n          if ($dragSibs.length ===1) {\n            $dragSibs.find('.horizontalEdge').remove();\n          }\n        } else {\n          $dragZone.removeAttr('colspan')\n            .find('.bottomEdge').remove()\n            .end().end().siblings().remove();\n        }\n        $orgchart.triggerHandler({ 'type': 'nodedropped.orgchart', 'draggedNode': $dragged, 'dragZone': $dragZone.children(), 'dropZone': $dropZone });\n      });\n    }\n    // allow user to append dom modification after finishing node create of orgchart \n    if (opts.createNode) {\n      opts.createNode($nodeDiv, nodeData);\n    }\n\n      resolve(nodeDiv);\n    });\n  }\n  buildHierarchy(appendTo, nodeData, level, opts, callback) {\n    // Construct the node\n    let nodeWrapper,\n      childNodes = nodeData.children,\n      hasChildren = childNodes ? childNodes.length : false,\n      isVerticalNode = (opts.verticalDepth && (level + 1) >= opts.verticalDepth) ? true : false;\n\n    if (Object.keys(nodeData).length > 1) { // if nodeData has nested structure\n      nodeWrapper = isVerticalNode ? appendTo : document.createElement('table');\n      if (!isVerticalNode) {\n        appendTo.appendChild(nodeWrapper);\n      }\n      this._createNode(nodeData, level, opts)\n      .then(function(nodeDiv) {\n        if (isVerticalNode) {\n          nodeWrapper.appendChild(nodeDiv);\n        }else {\n          let tr = document.createElement('tr');\n          tr.innerHTML = `\n            <td ${hasChildren ? `colspan=\"${childNodes.length * 2}\"` : ''}>\n            </td>\n          `;\n          tr.firstChild.appendChild(nodeDiv);\n          nodeWrapper.appendChild(tr);\n        }\n        if (callback) {\n          callback();\n        }\n      })\n      .catch(function(err) {\n        console.error('Failed to creat node', err);\n      });\n    }\n    // Construct the inferior nodes and connectiong lines\n    if (hasChildren) {\n      if (Object.keys(nodeData).length === 1) { // if nodeData is just an array\n        $nodeWrapper = $appendTo;\n      }\n      var isHidden = level + 1 >= opts.depth ? ' hidden' : '';\n      var isVerticalLayer = (opts.verticalDepth && (level + 2) >= opts.verticalDepth) ? true : false;\n\n      // draw the line close to parent node\n      if (!isVerticalLayer) {\n        let tr = document.createElement('tr');\n        tr.setAttribute('class', 'lines' + isHidden);\n        tr.innerHTML = `\n          <td colspan=\"${childNodes.length * 2}\">\n            <div class=\"downLine\"></div>\n          </td>\n        `;\n        nodeWrapper.appendChild(tr);\n      }\n      // draw the lines close to children nodes\n      for (var i=1; i<$childNodes.length; i++) {\n        lineLayer += '<td class=\"leftLine topLine\">&nbsp;</td><td class=\"rightLine topLine\">&nbsp;</td>';\n      }\n\n      let lineLayer = document.createElement('tr');\n        lineLayer.setAttribute('class', 'lines' + isHidden);\n        lineLayer.innerHTML = `\n          <td class=\"rightLine\"> </td>\n          ${childNodes.map(() => `\n            <td class=\"leftLine topLine\"> </td>\n            <td class=\"rightLine topLine\"> </td>\n          `)}\n          <td class=\"leftLine\"> </td>\n        `;\n      let nodeLayer;\n\n      if (isVerticalLayer) {\n        nodeLayer = document.createElement('<ul>');\n        if (level + 2 === opts.verticalDepth) {\n          let tr = document.createElement('tr');\n          tr.setAttribute('class', 'verticalNodes');\n          tr.innerHTML = `<td></td>`;\n          tr.firstChild.appendChild(nodeLayer);\n        } else {\n          nodeWrapper.appendChild(nodeLayer);\n        }\n      } else {\n        nodeLayer = document.createElement('tr');\n        nodeLayer.setAttribute('class', 'nodes' + isHidden);\n        nodeWrapper.appendChild(lineLayer);\n        nodeWrapper.appendChild(nodeLayer);\n      }\n      // recurse through children nodes\n      childNodes.map(() => {\n        let nodeCell;\n\n        if (isVerticalLayer) {\n          nodeCell = document.createElement('li');\n        } else {\n          nodeCell = document.createElement('td');\n          nodeCell.setAttribute('colspan', 2);\n        }\n        nodeLayer.appendChild(nodeCell);\n        buildHierarchy(nodeCell, this, level + 1, opts, callback);\n      });\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/"],"sourceRoot":""}