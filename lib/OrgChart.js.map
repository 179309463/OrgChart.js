{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ac10ac77c2a59954f0b6","webpack:///./src/index.js"],"names":["OrgChart","chartContainer","data","nodeTitle","nodeContent","nodeId","toggleSiblingsResp","depth","chartClass","exportButton","exportFilename","parentNodeSymbol","draggable","direction","pan","zoom","_name","options","_init","opts","chart","document","createElement","dataset","setAttribute","addEventListener","event","node","_closest","target","el","classList","contains","querySelector","removeClass","nodeName","buildHierarchy","_buildJsonDS","children","ajaxURL","_attachRel","spinner","_getJSON","then","resp","catch","err","console","error","finally","parentNode","removeChild","appendChild","fn","expr","sibs","parseNode","child","matches","push","preSib","previousElementSibling","nextSib","nextElementSibling","offsetParent","elements","className","forEach","add","classNames","indexOf","split","remove","prop","val","style","attr","removeAttr","url","Promise","resolve","reject","client","XMLHttpRequest","handler","readyState","status","response","Error","statusText","open","onreadystatechange","responseType","setRequestHeader","send","li","subObj","firstChild","textContent","trim","tagName","length","id","subLi","flags","relationship","item","offsetWidth","relation","parendNode","Array","from","lastChild","map","_siblings","some","_isVisible","flag","topEdge","bottomEdge","leftEdge","type","getNodeState","visible","toggle","_switchHorizontalArrow","currentRoot","nodeData","callback","table","createNode","nodeDiv","innerHTML","insertBefore","temp","tr","_addClass","slice","parent","_repaint","_isInAction","_switchVerticalArrow","nodeContainer","siblings","sib","inAjax","preSibs","_prevAll","querySelectorAll","nextSibs","_nextAll","animatedNodes","concat","lines","line","visibility","removeAttribute","someLines","_removeClass","hideSiblings","_css","grandfatherVisible","_removeAttr","hideAncestorsSiblings","_buildParentNode","showParent","stopPropagation","parentState","exist","_startLoading","source","Object","keys","addParent","_endLoading","that","descendants","filter","count","_buildChildNode","symbol","showDescendants","childrenState","fquerySelectorAll","hideDescendants","addChildren","assign","hEdge","siblingsState","prevSib","showSiblings","families","addSiblings","toggleBtn","descWrapper","ul","subToggleBtn","_clickNode","_clickHorizontalEdge","_clickBottomEdge","_clickToggleButton","isFirefox","test","window","navigator","userAgent","toLowerCase","dataTransfer","setData","transform","ghostNode","nodeCover","createElementNS","transValues","scale","Math","abs","parseFloat","offsetHeight","xOffset","offsetX","yOffset","offsetY","ghostNodeWrapper","src","XMLSerializer","serializeToString","setDragImage","dragged","dragZone","dragHier","index","dropCriteria","preventDefault","dropZone","includes","dropEffect","draggedTd","dropColspan","parseInt","colspan","find","dropSibs","dragColspan","dragSibs","td","customE","CustomEvent","dispatchEvent","level","parentId","verticalDepth","Number","substr","rightEdge","title","_hoverNode","bind","_dispatchClickEvent","_onDragStart","_onDragOver","_onDragEnd","_onDrop","appendTo","nodeWrapper","childNodes","isVerticalNode","_createNode","isHidden","isVerticalLayer","lineLayer","join","nodeLayer","nodeCell"],"mappings":"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","file":"OrgChart.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"OrgChart\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OrgChart\"] = factory();\n\telse\n\t\troot[\"OrgChart\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ac10ac77c2a59954f0b6\n **/","export default class OrgChart {\n  constructor({\n    chartContainer,\n    data,\n    nodeTitle = 'name',\n    nodeContent,\n    nodeId = 'id',\n    toggleSiblingsResp = false,\n    depth = 999,\n    chartClass = '',\n    exportButton = false,\n    exportFilename = 'OrgChart',\n    parentNodeSymbol = 'fa-users',\n    draggable = false,\n    direction = 't2b',\n    pan = false,\n    zoom = false\n  } = {}) {\n    this._name = 'OrgChart';\n    this.data = data;\n    this.options = {\n      'chartContainer': chartContainer,\n      'nodeTitle': nodeTitle,\n      'nodeContent': nodeContent,\n      'nodeId': nodeId,\n      'toggleSiblingsResp': toggleSiblingsResp,\n      'depth': depth,\n      'chartClass': chartClass,\n      'exportButton': exportButton,\n      'exportFilename': exportFilename,\n      'parentNodeSymbol': parentNodeSymbol,\n      'draggable': draggable,\n      'direction': direction,\n      'pan': pan,\n      'zoom': zoom\n    };\n\n    this._init();\n  }\n  get name() {\n    return this._name;\n  }\n  _init() {\n    // build the org-chart\n    let opts = this.options,\n      data = this.data,\n      chart = document.createElement('div');\n\n    this.chart = chart;\n    chart.dataset.options = opts;\n    chart.setAttribute('class', 'orgchart' + (opts.chartClass !== '' ? ' ' + opts.chartClass : '') +\n      (opts.direction !== 't2b' ? ' ' + opts.direction : ''));\n    chart.addEventListener('click', function (event) {\n      let node = this._closest(event.target, function (el) {\n        return el.classList.contains('node');\n      });\n\n      if (!node) {\n        chart.querySelector('.node.focused').removeClass('focused');\n      }\n    }, false);\n    if (typeof data === 'object') {\n      if (data.nodeName) { // ul datasource\n        this.buildHierarchy(chart, this._buildJsonDS(data.children[0], 0, opts));\n      } else { // local json datasource\n        this.buildHierarchy(chart, opts.ajaxURL ? data : this._attachRel(data, '00'), 0, opts);\n      }\n    } else {\n      let spinner = document.createElement('i');\n\n      spinner.setAttribute('class', 'fa fa-circle-o-notch fa-spin spinner');\n      this._getJSON(data)\n      .then(function (resp) {\n        this.buildHierarchy(chart, opts.ajaxURL ? resp : this._attachRel(resp, '00'), 0, opts);\n      })\n      .catch(function (err) {\n        console.error('failed to fetch datasource for orgchart', err);\n      })\n      .finally(function () {\n        let spinner = chart.querySelector('.spinner');\n\n        spinner.parentNode.removeChild(spinner);\n      });\n    }\n    opts.chartContainer.appendChild(chart);\n  }\n  _closest(el, fn) {\n    return el && (fn(el) ? el : this._closest(el.parentNode, fn));\n  }\n  _siblings(el, expr) {\n    let sibs = [];\n\n    for (let child of el.parseNode.children) {\n      if (child !== el) {\n        if (expr) {\n          if (el.matches(expr)) {\n            sibs.push(child);\n          }\n        } else {\n          sibs.push(child);\n        }\n      }\n    }\n    return sibs;\n  }\n  _prevAll(el, expr) {\n    let sibs = [];\n    let preSib = el.previousElementSibling;\n\n    while (preSib) {\n      if (!expr || el.matches(expr)) {\n        sibs.push(preSib);\n      }\n      preSib = preSib.previousElementSibling;\n    }\n    return sibs;\n  }\n  _nextAll(el, expr) {\n    let sibs = [];\n    let nextSib = el.nextElementSibling;\n\n    while (nextSib) {\n      if (!expr || el.matches(expr)) {\n        sibs.push(nextSib);\n      }\n      nextSib = nextSib.nextElementSibling;\n    }\n    return sibs;\n  }\n  _isVisible(el) {\n    return el.offsetParent !== null;\n  }\n  _addClass(elements, className) {\n    elements.forEach(function (el) {\n      el.classList.add(className);\n    });\n  }\n  _removeClass(elements, classNames) {\n    elements.forEach(function (el) {\n      if (classNames.indexOf(' ')) {\n        for (let className of classNames.split(' ')) {\n          el.classList.remove(className);\n        }\n      } else {\n        el.classList.remove(classNames);\n      }\n    });\n  }\n  _css(elements, prop, val) {\n    elements.forEach(function (el) {\n      el.style[prop] = val;\n    });\n  }\n  _removeAttr(elements, attr) {\n    elements.forEach(function (el) {\n      el.removeAttr(attr);\n    });\n  }\n  _getJSON(url) {\n    return new Promise(function (resolve, reject) {\n      let client = new XMLHttpRequest();\n\n      function handler() {\n        if (this.readyState !== 4) {\n          return;\n        }\n        if (this.status === 200) {\n          resolve(this.response);\n        } else {\n          reject(new Error(this.statusText));\n        }\n      }\n      client.open('GET', url);\n      client.onreadystatechange = handler;\n      client.responseType = 'json';\n      client.setRequestHeader('Accept', 'application/json');\n      client.send();\n    });\n  }\n  _buildJsonDS(li) {\n    var subObj = {\n      'name': li.firstChild.textContent.trim(),\n      'relationship': (li.parentNode.parentNode.tagName === 'li' ? '1' : '0') +\n        (li.parentNode.children > 1 ? 1 : 0) + (li.children.length ? 1 : 0)\n    };\n\n    if (li.id) {\n      subObj.id = li.id;\n    }\n    for (let subLi of li.querySelector('ul').children) {\n      if (!subObj.children) { subObj.children = []; }\n      subObj.children.push(this._buildJsonDS(subLi));\n    }\n    return subObj;\n  }\n  _attachRel(data, flags) {\n    data.relationship = flags + (data.children && data.children.length > 0 ? 1 : 0);\n    if (data.children) {\n      for (let item of data.children) {\n        this._attachRel(item, '1' + (data.children.length > 1 ? 1 : 0));\n      }\n    }\n    return data;\n  }\n  _repaint(node) {\n    if (node) {\n      node.style.offsetWidth = node.offsetWidth;\n    }\n  }\n  // whether the cursor is hovering over the node\n  _isInAction(node) {\n    return node.querySelector(':scope > .edge').className.indexOf('fa-') > -1;\n  }\n  // detect the exist/display state of related node\n  getNodeState(node, relation) {\n    let target = [];\n\n    if (relation === 'parent') {\n      target.push(this._closest(node, (el) => el.classList.contains('nodes'))\n        .parendNode.children[0].querySelector('.node'));\n    } else if (relation === 'children') {\n      target = Array.from(this._closest(node, (el) => el.nodeName === 'TABLE').children.lastChild.children)\n        .map((el) => el.querySelector('.node'));\n    } else {\n      target = this._siblings(this._closest(node, (el) => el.nodeName === 'TABLE').parentNode)\n        .map((el) => el.querySelector('.node'));\n    }\n    if (target.length) {\n      if (target.some((el) => this._isVisible(el))) {\n        return { 'exist': true, 'visible': true, 'nodes': target };\n      }\n      return { 'exist': true, 'visible': false, 'nodes': target };\n    }\n    return { 'exist': false, 'visible': false, 'nodes': target };\n  }\n  _hoverNode(event) {\n    let node = event.target,\n      flag = false,\n      topEdge = node.querySelector(':scope > .topEdge'),\n      bottomEdge = node.querySelector(':scope > .bottomEdge'),\n      leftEdge = node.querySelector(':scope > .leftEdge');\n\n    if (event.type === 'mouseenter') {\n      if (topEdge) {\n        flag = this.getNodeState(node, 'parent').visible;\n        topEdge.classList.toggle('fa-chevron-up', !flag);\n        topEdge.classList.toggle('fa-chevron-down', flag);\n      }\n      if (bottomEdge) {\n        flag = this.getNodeState(node, 'children').visible;\n        bottomEdge.classList.toggle('fa-chevron-down', !flag);\n        bottomEdge.classList.toggle('fa-chevron-up', flag);\n      }\n      if (leftEdge) {\n        this._switchHorizontalArrow(node);\n      }\n    } else {\n      node.querySelector(':scope > .edge')\n        .classList.remove('fa-chevron-up', 'fa-chevron-down', 'fa-chevron-right', 'fa-chevron-left');\n    }\n  }\n  // define node click event handler\n  _clickNode(event) {\n    let node = event.target;\n\n    this.chart.querySelector('.focused').classList.remove('focused');\n    node.classList.add('focused');\n  }\n  // build the parent node of specific node\n  _buildParentNode(currentRoot, nodeData, opts, callback) {\n    let table = document.createElement('table');\n\n    nodeData.relationship = '001';\n    this.createNode(nodeData, 0, opts || this.chart.dataset.options)\n      .then(function (nodeDiv) {\n        let chart = this.chart;\n\n        nodeDiv.classList.remove('slide-up');\n        nodeDiv.classList.add('slide-down');\n        table.innerHTML = `\n          <tr class=\"hidden\"><td colspan=\"2\"></td></tr>\n          <tr class=\"lines hidden\"><td colspan=\"2\"><div class=\"downLine\"></div></td></tr>\n          <tr class=\"lines hidden\"><td class=\"rightLine\">&nbsp;</td><td class=\"leftLine\">&nbsp;</td></tr>\n          <tr class=\"nodes\"><td colspan=\"2\"></td></tr>\n        `;\n        table.firstChild.firstChild.appendChild(nodeDiv);\n        chart.insertBefore(table, chart.firstChild);\n        table.lastChild.firstChild.appendChild(chart.lastChild);\n        callback();\n      })\n      .catch(function (err) {\n        console.error('Failed to create parent node', err);\n      });\n  }\n  // show the parent node of the specified node\n  showParent(node) {\n    // just show only one superior level\n    let temp = this._closest(node, function (el) {\n      return el.nodeName === 'TABLE';\n    }).parentNode.children;\n\n    for (let tr of temp) {\n      tr.classList.remove('hidden');\n    }\n    // just show only one line\n    this._addClass(temp[2].children.slice(1, -1), 'hidden');\n    // show parent node with animation\n    let parent = temp[0].querySelector('.node');\n\n    this._repaint(parent);\n    parent.classList.add('slide');\n    parent.classList.remove('slide-down');\n    parent.addEventListener('transitionend', function () {\n      parent.classList.remove('slide');\n      if (this._isInAction(node)) {\n        this._switchVerticalArrow(node.querySelector(':scope > .topEdge'));\n      }\n    }, { 'once': true});\n  }\n  // hide the sibling nodes of the specified node\n  hideSiblings(node, direction) {\n    let nodeContainer = this._closest(node, function (el) {\n      return el.nodeName === 'TABLE';\n    }).parentNode;\n\n    let siblings = this._siblings(nodeContainer);\n\n    for (let sib of siblings) {\n      if (sib.querySelector('.spinner')) {\n        this.chart.dataset.inAjax = false;\n      }\n    }\n\n    if (!direction || (direction && direction === 'left')) {\n      let preSibs = this._prevAll(nodeContainer);\n\n      for (let sib of preSibs) {\n        for (let node of sib.querySelectorAll('.node')) {\n          if (!this._isVisible(node)) {\n            node.classList.add('slide', 'slide-right');\n          }\n        }\n      }\n    }\n    if (!direction || (direction && direction !== 'left')) {\n      let nextSibs = this._nextAll(nodeContainer);\n\n      for (let sib of nextSibs) {\n        for (let node of sib.querySelectorAll('.node')) {\n          if (!this._isVisible(node)) {\n            node.classList.add('slide', 'slide-left');\n          }\n        }\n      }\n    }\n\n    let animatedNodes = [];\n\n    for (let sib of this._siblings(nodeContainer)) {\n      animatedNodes.concat(sib.querySelectorAll('.slide'));\n    }\n    let lines = [];\n\n    for (let node of animatedNodes) {\n      let temp = this._closest(node, function (el) {\n        return el.classList.contains('nodes');\n      }).parentNode.firstChild;\n\n      lines.push(temp);\n      lines.push(temp.nextElementSibling);\n    }\n    lines.forEach(function (line) {\n      line.style.visibility = 'hidden';\n    });\n\n    animatedNodes[0].addEventListener('transitionend', function () {\n      lines.forEach(function (line) {\n        line.removeAttribute('style');\n      });\n      let sibs = [];\n\n      if (direction) {\n        if (direction === 'left') {\n          sibs = this._prevAll(nodeContainer, ':not(.hidden)');\n        } else {\n          sibs = this._nextAll(nodeContainer, ':not(.hidden)');\n        }\n      } else {\n        sibs = this._siblings(nodeContainer);\n      }\n      let temp = this._closest(nodeContainer, function (el) {\n        return el.classList.contains('nodes');\n      }).previousElementSibling.querySelectorAll(':scope > :not(.hidden)');\n\n      let someLines = temp.slice(1, direction ? sibs.length * 2 + 1 : -1);\n\n      this._addClass(someLines, 'hidden');\n      this._removeClass(animatedNodes, 'slide');\n      sibs.querySelectorAll('.node').slice(1).forEach(function (node) {\n        if (this._isVisible(node)) {\n          node.classList.remove('slide-left', 'slide-right');\n          node.classList.add('slide-up');\n        }\n      });\n      this._addClass(sibs.querySelectorAll('.lines'), 'hidden');\n      this._addClass(sibs.querySelectorAll('.nodes'), 'hidden');\n      this._addClass(sibs.querySelectorAll('.verticalNodes'), 'hidden');\n      this._addClass(sibs, 'hidden');\n\n      if (this._isInAction(node)) {\n        this._switchHorizontalArrow(node);\n      }\n    }, { 'once': true });\n  }\n  // recursively hide the ancestor node and sibling nodes of the specified node\n  hideAncestorsSiblings(node) {\n    let temp = this._closest(node, function (el) {\n      return el.classList.contains('nodes');\n    }).parentNode.children;\n\n    if (temp[0].querySelector('.spinner')) {\n      this.chart.dataset.inAjax = false;\n    }\n    // hide the sibling nodes\n    if (this.getNodeState(node, 'siblings').visible) {\n      this.hideSiblings(node);\n    }\n    // hide the lines\n    let lines = temp.slice(1);\n\n    this._css(lines, 'visibility', 'hidden');\n    // hide the superior nodes with transition\n    let parent = temp[0].querySelector('.node'),\n      grandfatherVisible = this.getNodeState(parent, 'parent').visible;\n\n    if (parent && this._isVisible(parent)) {\n      parent.classList.add('slide', 'slide-down');\n      parent.addEventListener('transitionend', function () {\n        parent.classList.remove('slide');\n        this._removeAttr(lines, 'style');\n        this._addClass(temp, 'hidden');\n      }, { 'once': true });\n    }\n    // if the current node has the parent node, hide it recursively\n    if (parent && grandfatherVisible) {\n      this.hideAncestorsSiblings(parent);\n    }\n  }\n  // exposed method\n  addParent(currentRoot, data, opts) {\n    this._buildParentNode(currentRoot, data, opts, function () {\n      if (!currentRoot.querySelector(':scope .topEdge').length) {\n        let topEdge = document.createElement('i');\n\n        topEdge.setAttribute('class', 'edge verticalEdge topEdge fa');\n        currentRoot.appendChild(topEdge);\n      }\n      this.showParent(currentRoot);\n    });\n  }\n  // define click event handler for the top edge\n  _clickTopEdge(event) {\n    event.stopPropagation();\n    let topEdge = event.target,\n      node = topEdge.parentNode,\n      parentState = this.getNodeState(node, 'parent'),\n      opts = this.chart.dataset.options;\n\n    if (parentState.exist) {\n      let temp = this._closest(node, function (el) {\n        return el.classList.contains('nodes');\n      });\n      let parent = temp.parentNode.firstChild.querySelector('.node');\n\n      if (parent.classList.contains('slide')) { return; }\n      // hide the ancestor nodes and sibling nodes of the specified node\n      if (parentState.visible) {\n        this.hideAncestorsSiblings(node);\n        parent.addEventListener('transitionend', function () {\n          if (this._isInAction(node)) {\n            this._switchVerticalArrow(topEdge);\n            this._switchHorizontalArrow(node);\n          }\n        }, { 'once': true });\n      } else { // show the ancestors and siblings\n        this.showParent(node);\n      }\n    } else {\n      // load the new parent node of the specified node by ajax request\n      let nodeId = topEdge.parentNode.id;\n\n      // start up loading status\n      if (this._startLoading(topEdge, node, opts)) {\n        // load new nodes\n        this._getJSON(typeof opts.ajaxURL.parent === 'function' ?\n          opts.ajaxURL.parent(node.dataset.source) : opts.ajaxURL.parent + nodeId)\n        .then(function (resp) {\n          if (this.chart.dataset.inAjax) {\n            if (!Object.keys(resp).length) {\n              this.addParent(node, resp, opts);\n            }\n          }\n        })\n        .catch(function (err) {\n          console.error('Failed to get parent node data.', err);\n        })\n        .finally(function () {\n          this._endLoading(topEdge, node, opts);\n        });\n      }\n    }\n  }\n  // show the children nodes of the specified node\n  showDescendants(node) {\n    let that = this,\n      temp = this._prevAll(node.parentNode.parentNode),\n      descendants = [];\n\n    this._removeClass(temp, 'hidden');\n    if (temp.some((el) => el.classList.contains('verticalNodes'))) {\n      temp.forEach((el) => {\n        descendants.push([...Array.from(el.querySelectorAll('.node')).filter((el) => {\n          return that._isVisible(el);\n        })]);\n      });\n    } else {\n      Array.from(temp[2].children).forEach((el) => {\n        descendants.push([...Array.from(el.querySelector('tr').querySelectorAll('.node')).filter((el) => {\n          return that._isVisible(el);\n        })]);\n      });\n    }\n    // the two following statements are used to enforce browser to repaint\n    this._repaint(descendants[0]);\n    descendants.forEach((el) => {\n      el.classList.add('slide');\n      el.classList.remove('slide-up');\n    });\n    descendants[0].addEventListener('transitionend', function () {\n      descendants.removeClass('slide');\n      if (that._isInAction(node)) {\n        that._switchVerticalArrow(node.querySelector('.bottomEdge'));\n      }\n    }, { 'once': true });\n  }\n  // exposed method\n  addChildren(node, data, opts) {\n    if (!opts) {\n      opts = this.chart.dataset.options;\n    }\n    let count = 0;\n\n    this._buildChildNode(this._closest(node, (el) => el.nodeName === 'TABLE'), data, opts, function () {\n      if (++count === data.children.length) {\n        if (!node.querySelector('.bottomEdge')) {\n          let bottomEdge = document.createElement('i');\n\n          bottomEdge.setAttribute('class', 'edge verticalEdge bottomEdge fa');\n          node.appendChild(bottomEdge);\n        }\n        if (!node.querySelector('.symbol')) {\n          let symbol = document.createElement('i');\n\n          symbol.setAttribute('class', 'fa ' + opts.parentNodeSymbol + ' symbol');\n          node.querySelector(':scope > .title').appendChild(symbol);\n        }\n        this.showDescendants(node);\n      }\n    });\n  }\n  // bind click event handler for the bottom edge\n  _clickBottomEdge(event) {\n    event.stopPropagation();\n    let opts = this.chart.dataset.options,\n      bottomEdge = event.target,\n      node = bottomEdge.parentNode,\n      childrenState = this.getNodeState(node, 'children');\n\n    if (childrenState.exist) {\n      let temp = this._closest(node, function (el) {\n        return el.nodeName === 'TR';\n      }).parentNode.children[3];\n\n      if (temp.fquerySelectorAll('.node').some((node) => {\n        return this._isVisible(node) && node.classList.contains('slide');\n      })) { return; }\n      // hide the descendant nodes of the specified node\n      if (childrenState.visible) {\n        this.hideDescendants(node);\n      } else { // show the descendants\n        this.showDescendants(node);\n      }\n    } else { // load the new children nodes of the specified node by ajax request\n      let nodeId = bottomEdge.parentNode.id;\n\n      if (this._startLoading(bottomEdge, node, opts)) {\n        this._getJSON(typeof opts.ajaxURL.children === 'function' ?\n          opts.ajaxURL.children(node.dataset.source) : opts.ajaxURL.children + nodeId)\n        .then(function (resp) {\n          if (this.chart.dataset.inAjax) {\n            if (resp.children.length) {\n              this.addChildren(node, resp, Object.assign({}, opts, { depth: 0 }));\n            }\n          }\n        })\n        .catch(function (err) {\n          console.error('Failed to get children nodes data', err);\n        })\n        .finally(function () {\n          this._endLoading(bottomEdge, node, opts);\n        });\n      }\n    }\n  }\n  // bind click event handler for the left and right edges\n  _clickHorizontalEdge(event) {\n    event.stopPropagation();\n    let opts = this.chart.dataset.options,\n      hEdge = event.target,\n      node = hEdge.parentNode,\n      siblingsState = this.getNodeState(node, 'siblings');\n\n    if (siblingsState.exist) {\n      let temp = this._closest(node, function (el) {\n          return el.nodeName === 'TABLE';\n        }).parentNode,\n        siblings = this._siblings(temp);\n\n      if (siblings.querySelectorAll('.node').some((node) => {\n        return this._isVisible(node) && node.classList.contains('slide');\n      })) { return; }\n      if (opts.toggleSiblingsResp) {\n        let prevSib = this._closest(node, (el) => el.nodeName === 'TABLE').parentNode.previousElementSibling,\n          nextSib = this._closest(node, (el) => el.nodeName === 'TABLE').parentNode.nextElementSibling;\n\n        if (hEdge.classList.contains('.leftEdge')) {\n          if (prevSib.classList.contains('.hidden')) {\n            this.showSiblings(node, 'left');\n          } else {\n            this.hideSiblings(node, 'left');\n          }\n        } else {\n          if (nextSib.classList.contains('.hidden')) {\n            this.showSiblings(node, 'right');\n          } else {\n            this.hideSiblings(node, 'right');\n          }\n        }\n      } else {\n        if (siblingsState.visible) {\n          this.hideSiblings(node);\n        } else {\n          this.showSiblings(node);\n        }\n      }\n    } else {\n      // load the new sibling nodes of the specified node by ajax request\n      let nodeId = hEdge.parentNode.id,\n        url = (this.getNodeState(node, 'parent').exist) ?\n          (typeof opts.ajaxURL.siblings === 'function' ?\n            opts.ajaxURL.siblings(node.dataset.source) : opts.ajaxURL.siblings + nodeId) :\n          (typeof opts.ajaxURL.families === 'function' ?\n            opts.ajaxURL.families(node.dataset.source) : opts.ajaxURL.families + nodeId);\n\n      if (this._startLoading(hEdge, node, opts)) {\n        this._getJSON(url)\n        .then(function (resp) {\n          if (this.chart.dataset.inAjax) {\n            if (resp.siblings || resp.children) {\n              this.addSiblings(node, resp, opts);\n            }\n          }\n        })\n        .catch(function (err) {\n          console.err('Failed to get sibling nodes data', err);\n        })\n        .finally(function () {\n          this._endLoading(hEdge, node, opts);\n        });\n      }\n    }\n  }\n  // event handler for toggle buttons in Hybrid(horizontal + vertical) OrgChart\n  _clickToggleButton(event) {\n    let that = this,\n      toggleBtn = event.target,\n      descWrapper = toggleBtn.parentNode.nextElementSibling,\n      descendants = descWrapper.querySelectorAll('.node'),\n      children = descWrapper.children.map(function (item) {\n        return item.querySelector('.node');\n      });\n\n    if (children.some((item) => item.classList.contains('.slide'))) { return; }\n    toggleBtn.classList.toggle('fa-plus-square');\n    toggleBtn.classList.toggle('fa-minus-square');\n    if (descendants[0].classList.contains('.slide-up')) {\n      descWrapper.classList.remove('hidden');\n      this._repaint(children[0]);\n      this._addClass(children, 'slide');\n      this._removeClass(children, 'slide-up');\n      children[0].addEventListener('transitionend', function () {\n        that._removeClass(children, 'slide');\n      }, { 'once': true });\n    } else {\n      this._addClass(descendants, 'slide slide-up');\n      descendants[0].addEventListener('transitionend', function () {\n        that._removeClass(descendants, 'slide');\n        let ul = this._closest(descendants[0], function (el) {\n          return el.nodeName === 'ul';\n        });\n\n        ul.classList.add('hidden');\n      }, { 'once': true });\n      let subToggleBtn = descendants[0].querySelector('.toggleBtn').classList.remove('fa-minus-square');\n\n      subToggleBtn.classList.add('fa-plus-square');\n    }\n  }\n  _dispatchClickEvent(event) {\n    let classList = event.target.classList;\n\n    if (classList.contains('.topEdge')) {\n      this._clickNode(event);\n    } else if (classList.contains('.rightEdge') || classList.contains('.leftEdge')) {\n      this._clickHorizontalEdge(event);\n    } else if (classList.contains('.bottomEdge')) {\n      this._clickBottomEdge(event);\n    } else if (classList.contains('.toggleBtn')) {\n      this._clickToggleButton(event);\n    } else {\n      this._clickNode(event);\n    }\n  }\n  _onDragStart(event) {\n    let nodeDiv = event.target,\n      opts = this.chart.dataset.options,\n      isFirefox = /firefox/.test(window.navigator.userAgent.toLowerCase());\n\n    if (isFirefox) {\n      event.dataTransfer.setData('text/html', 'hack for firefox');\n    }\n    // if users enable zoom or direction options\n    if (this.chart.style.transform !== 'none') {\n      let ghostNode, nodeCover;\n\n      if (!document.querySelector('.ghost-node')) {\n        ghostNode = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        ghostNode.classList.add('ghost-node');\n        nodeCover = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        ghostNode.appendChild(nodeCover);\n        this.chart.appendChild(ghostNode);\n      } else {\n        ghostNode = this.chart.querySelector(':scope > .ghost-node');\n        nodeCover = ghostNode.children[0];\n      }\n      let transValues = this.chart.style.transform.split(','),\n        scale = Math.abs(window.parseFloat((opts.direction === 't2b' || opts.direction === 'b2t') ?\n          transValues[0].slice(transValues[0].indexOf('(') + 1) : transValues[1]));\n\n      ghostNode.setAttribute('width', nodeDiv.offsetWidth);\n      ghostNode.setAttribute('height', nodeDiv.offsetHeight);\n      nodeCover.setAttribute('x', 5 * scale);\n      nodeCover.setAttribute('y', 5 * scale);\n      nodeCover.setAttribute('width', 120 * scale);\n      nodeCover.setAttribute('height', 40 * scale);\n      nodeCover.setAttribute('rx', 4 * scale);\n      nodeCover.setAttribute('ry', 4 * scale);\n      nodeCover.setAttribute('stroke-width', 1 * scale);\n      let xOffset = event.offsetX * scale,\n        yOffset = event.offsetY * scale;\n\n      if (opts.direction === 'l2r') {\n        xOffset = event.offsetY * scale;\n        yOffset = event.offsetX * scale;\n      } else if (opts.direction === 'r2l') {\n        xOffset = nodeDiv.offsetWidth - event.offsetY * scale;\n        yOffset = event.offsetX * scale;\n      } else if (opts.direction === 'b2t') {\n        xOffset = nodeDiv.offsetWidth - event.offsetX * scale;\n        yOffset = nodeDiv.offsetHeight - event.offsetY * scale;\n      }\n      if (isFirefox) { // hack for old version of Firefox(< 48.0)\n        let ghostNodeWrapper = document.createElement('img');\n\n        ghostNodeWrapper.src = 'data:image/svg+xml;utf8,' + (new XMLSerializer()).serializeToString(ghostNode);\n        event.dataTransfer.setDragImage(ghostNodeWrapper, xOffset, yOffset);\n        nodeCover.setAttribute('fill', 'rgb(255, 255, 255)');\n        nodeCover.setAttribute('stroke', 'rgb(191, 0, 0)');\n      } else {\n        event.dataTransfer.setDragImage(ghostNode, xOffset, yOffset);\n      }\n    }\n    let dragged = event.target,\n      dragZone = this._closest(dragged, (el) => {\n        return el.classList.contains('.nodes');\n      }).parentNode.children[0].querySelector('.node'),\n      dragHier = this._closest(dragged, (el) => {\n        return el.nodeName === 'TABLE';\n      }).querySelectorAll('.node');\n\n    this.chart.dataset.dragged = dragged;\n    Array.from(this.chart.querySelectorAll('.node')).forEach(function (node) {\n      if (dragHier.index(node) === -1) {\n        if (opts.dropCriteria) {\n          if (opts.dropCriteria(dragged, dragZone, node)) {\n            node.classList.add('allowedDrop');\n          }\n        } else {\n          node.classList.add('allowedDrop');\n        }\n      }\n    });\n  }\n  _onDragOver(event) {\n    event.preventDefault();\n    let opts = this.chart.dataset.options,\n      dropZone = event.target,\n      dragged = this.chart.dataset.dragged,\n      dragZone = this._closest(dragged, function (el) {\n        return el.classList.contains('.nodes');\n      }).parentNode.children[0].querySelector('.node');\n\n    if (Array.from(this._closest(dragged, (el) => el.nodeName === 'TABLE').querySelectorAll('.node'))\n      .includes(dropZone) || (opts.dropCriteria && !opts.dropCriteria(dragged, dragZone, dropZone))) {\n      event.dataTransfer.dropEffect = 'none';\n    }\n  }\n  _onDragEnd(event) {\n    Array.from(this.chart.querySelectorAll('.allowedDrop')).forEach(function (el) {\n      el.classList.remove('allowedDrop');\n    });\n  }\n  _onDrop(event) {\n    let dropZone = event.target,\n      chart = this.chart,\n      dragged = chart.dataset.dragged,\n      dragZone = this._closest(dragged, function (el) {\n        return el.classList.contains('.nodes');\n      }).parentNode.children[0].firstChild;\n\n    this._removeClass(chart.querySelectorAll('.allowedDrop'), 'allowedDrop');\n    // firstly, deal with the hierarchy of drop zone\n    if (!dropZone.parentNode.parentNode.nextElementSibling) { // if the drop zone is a leaf node\n      let bottomEdge = document.createElement('i');\n\n      bottomEdge.setAttribute('class', 'edge verticalEdge bottomEdge fa');\n      dropZone.appendChild(bottomEdge);\n      dropZone.parentNode.setAttribute('colspan', 2);\n      let table = this._closest(dropZone, function (el) {\n          return el.nodeName === 'TABLE';\n        }),\n        tr = document.createElement(tr);\n\n      tr.setAttribute('class', 'lines');\n      tr.innerHTML = `<td colspan=\"2\"><div class=\"downLine\"></div></td>`;\n      table.appendChild(tr);\n      tr.innerHTML = `<td class=\"rightLine\">&nbsp;</td><td class=\"leftLine\">&nbsp;</td>`;\n      table.appendChild(tr);\n      tr.setAttribute('class', 'nodes');\n      tr.innerHTML = ``;\n      table.appendChild(tr);\n      for (let hEdge of dragged.querySelectorAll('.horizontalEdge')) {\n        dragged.removeChild(hEdge);\n      }\n      let draggedTd = this._closest(dragged, (el) => el.nodeName === 'TABLE').parentNode;\n\n      tr.appendChild(draggedTd);\n    } else {\n      let dropColspan = window.parseInt(dropZone.parentNode.colspan) + 2,\n        hEdge = document.createElement('i');\n\n      dropZone.parentNode.setAttribute('colspan', dropColspan);\n      dropZone.parentNode.parentNode.nextElementSibling.firstChild.setAttribute('colspan', dropColspan);\n      if (!dragged.find('.horizontalEdge').length) {\n        hEdge.setAttribute('class', 'edge horizontalEdge rightEdge fa');\n        dragged.appendChild(hEdge);\n        hEdge.classList.remove('rightEdge');\n        hEdge.classList.add('leftEdge');\n        dragged.appendChild(hEdge);\n      }\n      let temp = dropZone.parentNode.parentNode.nextElementSibling.nextElementSibling,\n        line = document.createElement('td');\n\n      line.setAttribute('class', 'leftLine topLine');\n      line.innerHTML = `&nbsp;`;\n      temp.insertBefore(line, temp.lastChild);\n      line.classList.remove('leftLine');\n      line.classList.add('rightLine');\n      temp.insertBefore(line, temp.lastChild);\n      temp.nextElementSibling.appendChild(this._closest(dragged, function (el) {\n        return el.nodeName === 'TABLE';\n      }).parentNode);\n\n      let dropSibs = this._closest(dragged, function (el) {\n        return el.classList.contains('nodes');\n      }).children;\n\n      if (dropSibs.length === 1) {\n        dropSibs[0].firstChild.appendChild(hEdge);\n        hEdge.classList.remove('leftEdge');\n        hEdge.classList.add('rightEdge');\n        dropSibs[0].firstChild.appendChild(hEdge);\n      }\n    }\n    // secondly, deal with the hierarchy of dragged node\n    let dragColspan = window.parseInt(dragZone.colspan);\n\n    if (dragColspan > 2) {\n      dragZone.setAttribute('colspan', dragColspan - 2);\n      dragZone.parentNode.nextElementSibling.firstChild.setAttribute('colspan', dragColspan - 2);\n      let temp = dragZone.parentNode.nextElementSibling.nextElementSibling;\n\n      temp.removeChild(temp.children[1]);\n      temp.removeChild(temp.children[2]);\n\n      let dragSibs = Array.from(dragZone.parentNode.parentNode.children[3].children).map(function (td) {\n        return td.querySelector('.node');\n      });\n\n      if (dragSibs.length === 1) {\n        dragSibs[0].removeChild(dragSibs[0].querySelector('.horizontalEdge'));\n      }\n    } else {\n      dragZone.removeAttribute('colspan');\n      dragZone.removeChild(dragZone.querySelector('.bottomEdge'));\n      Array.from(dragZone.parentNode.parentNode.children).slice(1)\n        .forEach((tr) => dragged.parentNode.parentNode.removeChild(tr));\n    }\n    let customE = new CustomEvent('nodedropped.orgchart', {\n      'draggedNode': dragged,\n      'dragZone': dragZone.children,\n      'dropZone': dropZone\n    });\n\n    chart.dispatchEvent(customE);\n  }\n  // create node\n  _createNode(nodeData, level, opts) {\n    let that = this;\n\n    return new Promise(function (resolve, reject) {\n      for (let child of nodeData.children) {\n        child.parentId = nodeData.id;\n      }\n\n      // construct the content of node\n      let nodeDiv = document.createElement('div');\n\n      nodeDiv.dataset.source = nodeData;\n      if (nodeData[opts.nodeId]) {\n        nodeDiv.id = nodeData[opts.nodeId];\n      }\n      nodeDiv.setAttribute('class', 'node ' + (nodeData.className || '') + (level >= opts.depth ? ' slide-up' : ''));\n      if (opts.draggable) {\n        nodeDiv.setAttribute('draggable', true);\n      }\n      if (nodeData.parentId) {\n        nodeDiv.setAttribute('data-parent', nodeData.parentId);\n      }\n      nodeDiv.innerHTML = `\n        <div class=\"title\">${nodeData[opts.nodeTitle]}</div>\n        ${opts.nodeContent ? `<div class=\"content\">${nodeData[opts.nodeContent]}</div>` : ''}\n      `;\n      // append 4 direction arrows or expand/collapse buttons\n      let flags = nodeData.relationship || '';\n\n      if (opts.verticalDepth && (level + 2) > opts.verticalDepth) {\n        if ((level + 1) >= opts.verticalDepth && Number(flags.substr(2, 1))) {\n          let toggleBtn = document.createElement('i');\n\n          toggleBtn.setAttribute('class', 'toggleBtn fa fa-minus-square');\n          nodeDiv.appendChild(toggleBtn);\n        }\n      } else {\n        if (Number(flags.substr(0, 1))) {\n          let topEdge = document.createElement('i');\n\n          topEdge.setAttribute('class', 'edge verticalEdge topEdge fa');\n          nodeDiv.appendChild(topEdge);\n        }\n        if (Number(flags.substr(1, 1))) {\n          let rightEdge = document.createElement('i'),\n            leftEdge = document.createElement('i');\n\n          rightEdge.setAttribute('class', 'edge horizontalEdge rightEdge fa');\n          nodeDiv.appendChild(rightEdge);\n          leftEdge.setAttribute('class', 'edge horizontalEdge leftEdge fa');\n          nodeDiv.appendChild(leftEdge);\n        }\n        if (Number(flags.substr(2, 1))) {\n          let bottomEdge = document.createElement('i'),\n            symbol = document.createElement('i'),\n            title = nodeDiv.querySelector(':scope > .title');\n\n          bottomEdge.setAttribute('class', 'edge verticalEdge bottomEdge fa');\n          nodeDiv.appendChild(bottomEdge);\n          symbol.setAttribute('class', 'fa ' + opts.parentNodeSymbol + ' symbol');\n          title.insertBefore(symbol, title.children[0]);\n        }\n      }\n\n      nodeDiv.addEventListener('mouseenter', that._hoverNode.bind(that));\n      nodeDiv.addEventListener('mouseleave', that._hoverNode.bind(that));\n      nodeDiv.addEventListener('click', that._dispatchClickEvent);\n      if (opts.draggable) {\n        nodeDiv.addEventListener('dragstart', that._onDragStart);\n        nodeDiv.addEventListener('dragover', that._onDragOver);\n        nodeDiv.addEventListener('dragend', that._onDragEnd);\n        nodeDiv.addEventListener('drop', that._onDrop);\n      }\n      // allow user to append dom modification after finishing node create of orgchart\n      if (opts.createNode) {\n        opts.createNode(nodeDiv, nodeData);\n      }\n\n      resolve(nodeDiv);\n    });\n  }\n  buildHierarchy(appendTo, nodeData, level, opts, callback) {\n    // Construct the node\n    let that = this,\n      nodeWrapper,\n      childNodes = nodeData.children,\n      isVerticalNode = opts.verticalDepth && (level + 1) >= opts.verticalDepth;\n\n    if (Object.keys(nodeData).length > 1) { // if nodeData has nested structure\n      nodeWrapper = isVerticalNode ? appendTo : document.createElement('table');\n      if (!isVerticalNode) {\n        appendTo.appendChild(nodeWrapper);\n      }\n      this._createNode(nodeData, level, opts)\n      .then(function (nodeDiv) {\n        if (isVerticalNode) {\n          nodeWrapper.appendChild(nodeDiv);\n        }else {\n          let tr = document.createElement('tr');\n\n          tr.innerHTML = `\n            <td ${childNodes ? `colspan=\"${childNodes.length * 2}\"` : ''}>\n            </td>\n          `;\n          tr.children[0].appendChild(nodeDiv);\n          nodeWrapper.appendChild(tr);\n        }\n        if (callback) {\n          callback();\n        }\n        // Construct the inferior nodes and connectiong lines\n        if (childNodes) {\n          if (Object.keys(nodeData).length === 1) { // if nodeData is just an array\n            nodeWrapper = appendTo;\n          }\n          let isHidden = level + 1 >= opts.depth ? ' hidden' : '',\n            isVerticalLayer = opts.verticalDepth && (level + 2) >= opts.verticalDepth;\n\n          // draw the line close to parent node\n          if (!isVerticalLayer) {\n            let tr = document.createElement('tr');\n\n            tr.setAttribute('class', 'lines' + isHidden);\n            tr.innerHTML = `\n              <td colspan=\"${ childNodes.length * 2 }\">\n                <div class=\"downLine\"></div>\n              </td>\n            `;\n            nodeWrapper.appendChild(tr);\n          }\n          // draw the lines close to children nodes\n          let lineLayer = document.createElement('tr');\n\n          lineLayer.setAttribute('class', 'lines' + isHidden);\n          lineLayer.innerHTML = `\n            <td class=\"rightLine\">&nbsp;</td>\n            ${childNodes.map(() => `\n              <td class=\"leftLine topLine\">&nbsp;</td>\n              <td class=\"rightLine topLine\">&nbsp;</td>\n              `).join('')}\n            <td class=\"leftLine\">&nbsp;</td>\n          `;\n          let nodeLayer;\n\n          if (isVerticalLayer) {\n            nodeLayer = document.createElement('<ul>');\n            if (level + 2 === opts.verticalDepth) {\n              let tr = document.createElement('tr');\n\n              tr.setAttribute('class', 'verticalNodes');\n              tr.innerHTML = `<td></td>`;\n              tr.firstChild.appendChild(nodeLayer);\n            } else {\n              nodeWrapper.appendChild(nodeLayer);\n            }\n          } else {\n            nodeLayer = document.createElement('tr');\n            nodeLayer.setAttribute('class', 'nodes' + isHidden);\n            nodeWrapper.appendChild(lineLayer);\n            nodeWrapper.appendChild(nodeLayer);\n          }\n          // recurse through children nodes\n          childNodes.forEach((child) => {\n            let nodeCell;\n\n            if (isVerticalLayer) {\n              nodeCell = document.createElement('li');\n            } else {\n              nodeCell = document.createElement('td');\n              nodeCell.setAttribute('colspan', 2);\n            }\n            nodeLayer.appendChild(nodeCell);\n            that.buildHierarchy(nodeCell, child, level + 1, opts, callback);\n          });\n        }\n      })\n      .catch(function (err) {\n        console.error('Failed to creat node', err);\n      });\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/"],"sourceRoot":""}